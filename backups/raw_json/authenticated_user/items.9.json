[{"rendered_body":"\u003cp\u003emoduleを\u003ccode\u003e.satyh\u003c/code\u003eに書かずに以下のように直接\u003ccode\u003e.saty\u003c/code\u003eの中で書いた場合\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"ml\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003efoo.saty\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"n\"\u003e@require\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003estdja\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003emodule\u003c/span\u003e \u003cspan class=\"n\"\u003eFoo\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kr\"\u003esig\u003c/span\u003e\n\u003cspan class=\"kr\"\u003eend\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"kr\"\u003estruct\u003c/span\u003e\n\u003cspan class=\"kr\"\u003eend\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003edocument\u003c/span\u003e \u003cspan class=\"p\"\u003e(|\u003c/span\u003e\n  \u003cspan class=\"n\"\u003etitle\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"err\"\u003e単にエラーが出る場合\u003c/span\u003e\u003cspan class=\"kr\"\u003ein\u003c/span\u003e\u003cspan class=\"err\"\u003eを忘れていることが多い\u003c/span\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eauthor\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eSeiei\u003c/span\u003e \u003cspan class=\"n\"\u003eMIYAGI\u003c/span\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eshow-title\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eshow-toc\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e|)\u003c/span\u003e \u003cspan class=\"n\"\u003e'\u0026lt;\u0026gt;\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eコンパイルするとよくわからないエラーがでます\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"shell-session\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"gp\"\u003e$\u003c/span\u003e satysfi \u003cspan class=\"nt\"\u003e-b\u003c/span\u003e foo.saty\n\u003cspan class=\"go\"\u003e ---- ---- ---- ----\n  target file: 'foo.pdf'\n  dump file: 'foo.satysfi-aux' (already exists)\n  parsing 'foo.saty' ...\n! [Syntax Error at Parser] at \"foo.saty\", line 7, characters 0-8:\n\u003c/span\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこういうときはinつけると直る\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"ml\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003efoo.saty\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"n\"\u003e@require\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003estdja\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003emodule\u003c/span\u003e \u003cspan class=\"n\"\u003eFoo\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kr\"\u003esig\u003c/span\u003e\n\u003cspan class=\"kr\"\u003eend\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"kr\"\u003estruct\u003c/span\u003e\n\u003cspan class=\"kr\"\u003eend\u003c/span\u003e\n\n\u003cspan class=\"kr\"\u003ein\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003edocument\u003c/span\u003e \u003cspan class=\"p\"\u003e(|\u003c/span\u003e\n  \u003cspan class=\"n\"\u003etitle\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"err\"\u003e単にエラーが出る場合\u003c/span\u003e\u003cspan class=\"kr\"\u003ein\u003c/span\u003e\u003cspan class=\"err\"\u003eを忘れていることが多い\u003c/span\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eauthor\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eSeiei\u003c/span\u003e \u003cspan class=\"n\"\u003eMIYAGI\u003c/span\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eshow-title\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eshow-toc\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e|)\u003c/span\u003e \u003cspan class=\"n\"\u003e'\u0026lt;\u0026gt;\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"なんで\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%AA%E3%82%93%E3%81%A7\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eなんで\u003c/h2\u003e\n\n\u003cp\u003eたぶん\u003ccode\u003ein\u003c/code\u003eつけてないときは\u003ccode\u003enxtopsubseq\u003c/code\u003eが一番上の\u003ccode\u003enxtoplevel\u003c/code\u003eに行ってて\u003ccode\u003edocument\u003c/code\u003eみたいな変数参照だとうまく動かなくてエラーになっている。\u003ccode\u003ein\u003c/code\u003eつけると一番したの\u003ccode\u003enxlet\u003c/code\u003eにいっててうまく動く（っぽい、詳しくはわからん）\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"ml\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003esrc/frontend/parser.mly\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"n\"\u003enxtoplevel\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003etop\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eLETREC\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003erecdec\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003enxrecdec\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003esubseq\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003enxtopsubseq\u003c/span\u003e                          \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003emake_letrec_expression\u003c/span\u003e \u003cspan class=\"n\"\u003etop\u003c/span\u003e \u003cspan class=\"n\"\u003erecdec\u003c/span\u003e \u003cspan class=\"n\"\u003esubseq\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003etop\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eLETNONREC\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003enonrecdec\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003enxnonrecdec\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003esubseq\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003enxtopsubseq\u003c/span\u003e                 \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003emake_let_expression_of_pattern\u003c/span\u003e \u003cspan class=\"n\"\u003etop\u003c/span\u003e \u003cspan class=\"n\"\u003enonrecdec\u003c/span\u003e \u003cspan class=\"n\"\u003esubseq\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003etop\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eLETMUTABLE\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003evartok\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eVAR\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003eOVERWRITEEQ\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003eutast\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003enxlet\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003esubseq\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003enxtopsubseq\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003emake_let_mutable_expression\u003c/span\u003e \u003cspan class=\"n\"\u003etop\u003c/span\u003e \u003cspan class=\"n\"\u003evartok\u003c/span\u003e \u003cspan class=\"n\"\u003eutast\u003c/span\u003e \u003cspan class=\"n\"\u003esubseq\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003etop\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eLETHORZ\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003edec\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003enxhorzdec\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003esubseq\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003enxtopsubseq\u003c/span\u003e                           \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003emake_let_expression\u003c/span\u003e \u003cspan class=\"n\"\u003etop\u003c/span\u003e \u003cspan class=\"n\"\u003edec\u003c/span\u003e \u003cspan class=\"n\"\u003esubseq\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003etop\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eLETVERT\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003edec\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003enxvertdec\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003esubseq\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003enxtopsubseq\u003c/span\u003e                           \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003emake_let_expression\u003c/span\u003e \u003cspan class=\"n\"\u003etop\u003c/span\u003e \u003cspan class=\"n\"\u003edec\u003c/span\u003e \u003cspan class=\"n\"\u003esubseq\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003etop\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eLETMATH\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003edec\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003enxmathdec\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003esubseq\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003enxtopsubseq\u003c/span\u003e                           \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003emake_let_expression\u003c/span\u003e \u003cspan class=\"n\"\u003etop\u003c/span\u003e \u003cspan class=\"n\"\u003edec\u003c/span\u003e \u003cspan class=\"n\"\u003esubseq\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003etop\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eTYPE\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003evariantdec\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003enxvariantdec\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003esubseq\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003enxtopsubseq\u003c/span\u003e                    \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003emake_variant_declaration\u003c/span\u003e \u003cspan class=\"n\"\u003etop\u003c/span\u003e \u003cspan class=\"n\"\u003evariantdec\u003c/span\u003e \u003cspan class=\"n\"\u003esubseq\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003etop\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eMODULE\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003emdlnmtok\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eCONSTRUCTOR\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003esigopt\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003enxsigopt\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n      \u003cspan class=\"n\"\u003eDEFEQ\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003eSTRUCT\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003estrct\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003enxstruct\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003esubseq\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003enxtopsubseq\u003c/span\u003e                      \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003emake_module\u003c/span\u003e \u003cspan class=\"n\"\u003etop\u003c/span\u003e \u003cspan class=\"n\"\u003emdlnmtok\u003c/span\u003e \u003cspan class=\"n\"\u003esigopt\u003c/span\u003e \u003cspan class=\"n\"\u003estrct\u003c/span\u003e \u003cspan class=\"n\"\u003esubseq\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003etop\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eOPEN\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003emdlnmtok\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eCONSTRUCTOR\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003esubseq\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003enxtopsubseq\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"kr\"\u003elet\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erng\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003emdlnm\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emdlnmtok\u003c/span\u003e \u003cspan class=\"kr\"\u003ein\u003c/span\u003e\n        \u003cspan class=\"n\"\u003emake_standard\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTok\u003c/span\u003e \u003cspan class=\"n\"\u003etop\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eRanged\u003c/span\u003e \u003cspan class=\"n\"\u003esubseq\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eUTOpenIn\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erng\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003emdlnm\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003esubseq\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"n\"\u003enxtopsubseq\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003eutast\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003enxtoplevel\u003c/span\u003e     \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003eutast\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003eEOI\u003c/span\u003e                  \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003eend_header\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003eIN\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003eutast\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003enxlet\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003eEOI\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003eutast\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e\u003ca href=\"https://github.com/gfngfn/SATySFi/blob/2c950de6b9d2882bb0afbac1b09e82b4768ce1a4/src/frontend/parser.mly#L531-L550\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://github.com/gfngfn/SATySFi/blob/2c950de6b9d2882bb0afbac1b09e82b4768ce1a4/src/frontend/parser.mly#L531-L550\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"参考\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8F%82%E8%80%83\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e参考\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://github.com/gfngfn/SATySFi/blob/2c950de6b9d2882bb0afbac1b09e82b4768ce1a4/src/frontend/lexer.mll\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://github.com/gfngfn/SATySFi/blob/2c950de6b9d2882bb0afbac1b09e82b4768ce1a4/src/frontend/lexer.mll\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"https://github.com/gfngfn/SATySFi/blob/2c950de6b9d2882bb0afbac1b09e82b4768ce1a4/src/frontend/parser.mly\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://github.com/gfngfn/SATySFi/blob/2c950de6b9d2882bb0afbac1b09e82b4768ce1a4/src/frontend/parser.mly\u003c/a\u003e\u003c/p\u003e\n","body":"moduleを`.satyh`に書かずに以下のように直接`.saty`の中で書いた場合\n\n```ml:foo.saty\n@require: stdja\n\nmodule Foo : sig\nend = struct\nend\n\ndocument (|\n  title = {単にエラーが出る場合inを忘れていることが多い};\n  author = {Seiei MIYAGI};\n  show-title = true;\n  show-toc = false;\n|) '\u003c\u003e\n```\n\nコンパイルするとよくわからないエラーがでます\n\n```shell-session\n$ satysfi -b foo.saty\n ---- ---- ---- ----\n  target file: 'foo.pdf'\n  dump file: 'foo.satysfi-aux' (already exists)\n  parsing 'foo.saty' ...\n! [Syntax Error at Parser] at \"foo.saty\", line 7, characters 0-8:\n```\n\nこういうときはinつけると直る\n\n```ml:foo.saty\n@require: stdja\n\nmodule Foo : sig\nend = struct\nend\n\nin\n\ndocument (|\n  title = {単にエラーが出る場合inを忘れていることが多い};\n  author = {Seiei MIYAGI};\n  show-title = true;\n  show-toc = false;\n|) '\u003c\u003e\n```\n\n## なんで\n\nたぶん`in`つけてないときは`nxtopsubseq`が一番上の`nxtoplevel`に行ってて`document`みたいな変数参照だとうまく動かなくてエラーになっている。`in`つけると一番したの`nxlet`にいっててうまく動く（っぽい、詳しくはわからん）\n\n```ml:src/frontend/parser.mly\nnxtoplevel:\n  | top=LETREC; recdec=nxrecdec; subseq=nxtopsubseq                          { make_letrec_expression top recdec subseq }\n  | top=LETNONREC; nonrecdec=nxnonrecdec; subseq=nxtopsubseq                 { make_let_expression_of_pattern top nonrecdec subseq }\n  | top=LETMUTABLE; vartok=VAR; OVERWRITEEQ; utast=nxlet; subseq=nxtopsubseq { make_let_mutable_expression top vartok utast subseq }\n  | top=LETHORZ; dec=nxhorzdec; subseq=nxtopsubseq                           { make_let_expression top dec subseq }\n  | top=LETVERT; dec=nxvertdec; subseq=nxtopsubseq                           { make_let_expression top dec subseq }\n  | top=LETMATH; dec=nxmathdec; subseq=nxtopsubseq                           { make_let_expression top dec subseq }\n  | top=TYPE; variantdec=nxvariantdec; subseq=nxtopsubseq                    { make_variant_declaration top variantdec subseq }\n  | top=MODULE; mdlnmtok=CONSTRUCTOR; sigopt=nxsigopt;\n      DEFEQ; STRUCT; strct=nxstruct; subseq=nxtopsubseq                      { make_module top mdlnmtok sigopt strct subseq }\n  | top=OPEN; mdlnmtok=CONSTRUCTOR; subseq=nxtopsubseq {\n      let (rng, mdlnm) = mdlnmtok in\n        make_standard (Tok top) (Ranged subseq) (UTOpenIn(rng, mdlnm, subseq))\n    }\n;\nnxtopsubseq:\n  | utast=nxtoplevel     { utast }\n  | EOI                  { end_header }\n  | IN; utast=nxlet; EOI { utast }\n;\n```\nhttps://github.com/gfngfn/SATySFi/blob/2c950de6b9d2882bb0afbac1b09e82b4768ce1a4/src/frontend/parser.mly#L531-L550\n\n## 参考\n\nhttps://github.com/gfngfn/SATySFi/blob/2c950de6b9d2882bb0afbac1b09e82b4768ce1a4/src/frontend/lexer.mll\nhttps://github.com/gfngfn/SATySFi/blob/2c950de6b9d2882bb0afbac1b09e82b4768ce1a4/src/frontend/parser.mly\n","coediting":false,"comments_count":0,"created_at":"2018-10-08T22:06:30+09:00","group":null,"id":"c6c6ab5ffb9c88bdf362","likes_count":0,"private":false,"reactions_count":0,"tags":[{"name":"SATySFi","versions":[]}],"title":"SATySFiでmoduleを宣言したあとdocumentを書いて単に「! [Syntax Error at Parser] at \"foo.saty\", line 7, characters 0-8:」とエラーが出る場合inつければ直る","updated_at":"2018-10-08T22:06:30+09:00","url":"https://qiita.com/hanachin_/items/c6c6ab5ffb9c88bdf362","user":{"description":"既婚バイ","facebook_id":"seiei.higa","followees_count":166,"followers_count":120,"github_login_name":"hanachin","id":"hanachin_","items_count":55,"linkedin_id":"","location":"Naha, Okinawa, Japan","name":"Seiei Miyagi","organization":"YassLab","permanent_id":2074,"profile_image_url":"https://qiita-image-store.s3.amazonaws.com/0/2074/profile-images/1511092027","twitter_screen_name":"hanachin_","website_url":""},"page_views_count":null}]