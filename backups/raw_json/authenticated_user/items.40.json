[{"rendered_body":"\u003cp\u003e\u003cimg alt=\":hibiscus:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f33a.png\" title=\":hibiscus:\" width=\"20\"\u003e \u003ca href=\"http://qiita.com/advent-calendar/2016/okinawarb\"\u003eOkinawa.rbã®Advent Calendar 2016\u003c/a\u003e \u003cimg alt=\":pig2:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f416.png\" title=\":pig2:\" width=\"20\"\u003e 10æ—¥ç›®ã§ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eRubyã§Methodã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å–ã‚Šå‡ºã™syntaxãŒæ¬²ã—ã„ã¨ãã£ã¦ã‚ã‚Šã¾ã™ã‚ˆã­ã€‚ruby-coreã§\u003ccode\u003eo.:method\u003c/code\u003eã‚„\u003ccode\u003eo[.method]\u003c/code\u003eã‚„\u003ccode\u003eo-\u0026gt;method\u003c/code\u003eãªã©ãŒææ¡ˆã•ã‚Œã¦ã„ã¾ã™ãŒã—ã£ãã‚Šã“ãªã„ã¿ãŸã„ã§ã™ã€‚\u003cbr\u003e\n\u003ca href=\"https://bugs.ruby-lang.org/issues/12125#change-57209\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://bugs.ruby-lang.org/issues/12125#change-57209\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eRubyã®syntaxã‚’ã„ã˜ã‚‹ç·´ç¿’ã«ææ¡ˆã•ã‚Œã¦ã„ã‚‹syntaxã¨ã¯åˆ¥ã®syntaxã‚’é›‘ã«å®Ÿè£…ã—ã¦ã¿ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"bulb-ã©ã†ã„ã†syntaxã‚’å®Ÿè£…ã™ã‚‹ã‹\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#bulb-%E3%81%A9%E3%81%86%E3%81%84%E3%81%86syntax%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B%E3%81%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003cimg alt=\":bulb:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f4a1.png\" title=\":bulb:\" width=\"20\"\u003e ã©ã†ã„ã†syntaxã‚’å®Ÿè£…ã™ã‚‹ã‹\u003c/h2\u003e\n\n\u003cp\u003eã“ã“ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒã‚ã‚Šã¾ã™ã€‚\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"rb\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"n\"\u003eo\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"no\"\u003eObject\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®methodãƒ¡ã‚½ãƒƒãƒ‰ã®å–ã‚Šå‡ºã—æ–¹ã‚’è€ƒãˆã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eã¨ã‚Šã ã™ãƒ¡ã‚½ãƒƒãƒ‰ã®åå‰ã‚’æŒ‡å®šã—ãªã„ã¨å–ã‚Šå‡ºã›ãªã„ã®ã§ã€ã¨ã‚Šã‚ãˆãšmethodã¨æ›¸ãå¿…è¦ã¯ã‚ã‚‹ã§ã—ã‚‡ã†ã€‚\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"rb\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"n\"\u003eo\u003c/span\u003e \u003cspan class=\"sr\"\u003e/*ä½•ã‹ã—ã‚‰ã®syntax*/\u003c/span\u003e \u003cspan class=\"nb\"\u003emethod\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eã‚‹ã‚Šã¾ã®\u003ca href=\"https://docs.ruby-lang.org/ja/latest/doc/symref.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003eRubyã§ä½¿ã‚ã‚Œã‚‹è¨˜å·ã®æ„å‘³\u003c/a\u003eã‚„\u003ca href=\"https://docs.ruby-lang.org/ja/latest/doc/spec=2fliteral.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003eãƒªãƒ†ãƒ©ãƒ«\u003c/a\u003eã®ãƒšãƒ¼ã‚¸ã‚’è¦‹ã‚‹ã¨è¨˜å·ã¯ã ã„ãŸã„ä½¿ã‚ã‚Œã¦ã„ãã†ã§ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eRubyã§ã¯Procã‚’ã¤ãã‚‹ã¨ãã«\u003ccode\u003e-\u0026gt; { }\u003c/code\u003eã€ãƒ–ãƒ­ãƒƒã‚¯ã‚’ä½œã‚‹ã¨ãã«\u003ccode\u003efoo { }\u003c/code\u003eã®ã‚ˆã†ã«\u003ccode\u003e{}\u003c/code\u003eã‚’ä½¿ã†ã“ã¨ãŒå¤šã„ã§ã™ã­ã€‚methodãƒ¡ã‚½ãƒƒãƒ‰ã‚‚Procã‚„ãƒ–ãƒ­ãƒƒã‚¯ã¨åŒã˜ã‚ˆã†ã«callã§ãã‚‹ã®ã§åŒã˜ã‚ˆã†ã«\u003ccode\u003e{}\u003c/code\u003eã‚’ä½¿ã£ã¦æ›¸ããŸã„ã§ã™ã€‚\u003cbr\u003e\nãªã®ã§ã€ä»Šå›ã¯\u003ccode\u003ereceiver.{method}\u003c/code\u003eã§Methodã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å–ã‚Šå‡ºã›ã‚‹ã‚ˆã†ã«ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚\u003c/p\u003e\n\n\u003cp\u003eä»¥é™\u003ccode\u003e.{}\u003c/code\u003eæ¼”ç®—å­ã¨å‘¼ã³ã¾ã™ã€‚\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"wrench-æº–å‚™\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#wrench-%E6%BA%96%E5%82%99\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003cimg alt=\":wrench:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f527.png\" title=\":wrench:\" width=\"20\"\u003e æº–å‚™\u003c/h2\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"console\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"go\"\u003e% git clone git://github.com/ruby/ruby.git\n% cd ruby\n% git fetch --tags\n% git checkout -b method_method_syntax v2_4_0_preview3\n\u003c/span\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eä»Šå›ã¯syntaxé›‘ã«è¶³ã—ã¦ã¿ã‚‹ã®ãŒç›®çš„ãªã®ã§ãƒ“ãƒ«ãƒ‰ã¯å„è‡ªREADMEã‚’èª­ã‚“ã§ã‚„ã£ã¦ã„ã \u003cimg alt=\":muscle:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f4aa.png\" title=\":muscle:\" width=\"20\"\u003e\u003cbr\u003e\n\u003ca href=\"https://github.com/ruby/ruby#how-to-compile-and-install\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://github.com/ruby/ruby#how-to-compile-and-install\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"applepen_fountain-ãƒ†ã‚¹ãƒˆ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#applepen_fountain-%E3%83%86%E3%82%B9%E3%83%88\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003cimg alt=\":apple:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f34e.png\" title=\":apple:\" width=\"20\"\u003e\u003cimg alt=\":pen_fountain:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f58b.png\" title=\":pen_fountain:\" width=\"20\"\u003e ãƒ†ã‚¹ãƒˆ\u003c/h2\u003e\n\n\u003cp\u003eé›‘ã«è¶³ã™ã ã‘ãªã®ã§ä»¥ä¸‹ã§applepenã¨è¡¨ç¤ºã•ã‚Œã‚Œã°ã„ã„ã“ã¨ã«ã—ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"rb\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"err\"\u003eãŒ°å¤ªéƒ\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"\"\u003c/span\u003e\n\u003cspan class=\"n\"\u003euh\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"err\"\u003eãŒ°å¤ªéƒ\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003econcat\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"err\"\u003eğŸ\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"apple\"\u003c/span\u003e\n\u003cspan class=\"err\"\u003eâœ’ï¸\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"pen\"\u003c/span\u003e\n\n\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"err\"\u003eğŸ\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"err\"\u003eâœ’ï¸\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"nf\"\u003eeach\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"n\"\u003euh\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"nb\"\u003eputs\u003c/span\u003e \u003cspan class=\"err\"\u003eãŒ°å¤ªéƒ\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eto_s\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e# applepen\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"eyes-parseyã‚’èª­ã‚€\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#eyes-parsey%E3%82%92%E8%AA%AD%E3%82%80\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003cimg alt=\":eyes:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f440.png\" title=\":eyes:\" width=\"20\"\u003e parse.yã‚’èª­ã‚€\u003c/h2\u003e\n\n\u003cp\u003eRubyã®ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ã¯parse.yã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eparse.yã‚’èª­ã‚“ã§ä»¥ä¸‹ã®è¡¨ç¾ãŒã‚ã‹ã‚Œã°\u003ccode\u003e.{}\u003c/code\u003eæ¼”ç®—å­ã‚’å®šç¾©ã§ããã†ã§ã™ã€‚\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eãƒ¬ã‚·ãƒ¼ãƒãƒ¼\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e.\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eãƒ¡ã‚½ãƒƒãƒ‰å\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003e{\u003c/code\u003e ã¨ \u003ccode\u003e}\u003c/code\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eparse.yã¯ã ã„ãŸã„1ä¸‡è¡Œã¡ã‚‡ã£ã¨ã‚ã‚‹ã†ã¡åŠåˆ†ãã‚‰ã„ã¾ã§syntaxãŒå®šç¾©ã•ã‚Œã¦ã¦ãã®ä¸‹ã«ãƒˆãƒ¼ã‚¯ãƒ³åˆ‡ã‚Šå‡ºã™å‡¦ç†ãŒã‚ã‚Šã¾ã™ã€‚\u003cbr\u003e\nè‰²ã€…å®šç¾©ã•ã‚Œã¦ã‚‹ã¨ã“ã«ã¯Ripperå‘ã‘ã®ã‚³ãƒ¼ãƒ‰ãŒæŒŸã¾ã£ã¦ã„ã‚‹ã®ã§é›‘ã«syntaxè¶³ã™ãªã‚‰1ä¸‡è¡Œã®ã†ã¡ã®å‰åŠåˆ†ã€ãã‚Œãã‚Œã®å®šç¾©ã®ä¸Šã®æ–¹ã ã‘èª­ã‚ã°ã‚ˆã•ãã†ã§ã™ \u003cimg alt=\":ok_hand:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f44c.png\" title=\":ok_hand:\" width=\"20\"\u003e \u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"yacc\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eparse.y\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003eãªã¾ãˆ : ãƒˆãƒ¼ã‚¯ãƒ³1 ãƒˆãƒ¼ã‚¯ãƒ³2\n         {\n           /*%%%*/\n             $$ = ã˜ã£ã“ã†ã•ã‚Œã‚‹ã‚„ã¤\n           /*%\n             $$ = Ripperã®ãŸã‚ã®ã‚‚ã‚ã‚‚ã‚\n           %*/\n        }\n    ;\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"ãƒ¡ã‚½ãƒƒãƒ‰åã®è¡¨ã—æ–¹\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E5%90%8D%E3%81%AE%E8%A1%A8%E3%81%97%E6%96%B9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eãƒ¡ã‚½ãƒƒãƒ‰åã®è¡¨ã—æ–¹\u003c/h3\u003e\n\n\u003cp\u003eã¨ã‚Šã‚ãˆãšãƒ¡ã‚½ãƒƒãƒ‰åã®å®šç¾©ã®ã‚ãŸã‚Šã‚’æ¢ã—ã¾ã™ã€‚ãƒ¡ã‚½ãƒƒãƒ‰åã‚’å®šç¾©ã™ã‚‹ã¨ãã¯defã¨æ›¸ãã®ã§defã§grepã—ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e% git grep -n '\"def\"' parse.y\nparse.y:3129:                   token_info_push(\"def\");\nparse.y:11176:    {keyword_def, \"def\"},\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003ccode\u003ekeyword_def\u003c/code\u003eãŒã§ã¦ãã¾ã—ãŸã€‚ãã‚Œã£ã½ã„ã®ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã§æ¤œç´¢ã™ã‚‹ã¨\u003ccode\u003ek_def\u003c/code\u003eãŒå‡ºã¦ããŸã®ã§æ›´ã«\u003ccode\u003ek_def\u003c/code\u003eã§æ¤œç´¢ã—ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"yacc\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eparse.y\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003ek_def       : keyword_def\n            {\n            token_info_push(\"def\");\n            /*%%%*/\n            $\u0026lt;num\u0026gt;$ = ruby_sourceline;\n            /*%\n            %*/\n            }\n        ;\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e\u003ccode\u003ek_def\u003c/code\u003eã®æ¬¡ã«æ¥ã‚‹ã®ã¯\u003ccode\u003efname\u003c/code\u003eã®ã‚ˆã†ã§ã™ã€‚\u003ccode\u003efname\u003c/code\u003eã‚’ã—ã‚‰ã¹ã‚Œã°ã€ãƒ¡ã‚½ãƒƒãƒ‰åã‚’è¡¨ã™ä½•ã‹ãŒã‚ã‹ã‚Šãã†ã§ã™ã€‚\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"yacc\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eparse.y\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003eprimary     : literal\n\n/* ä¸­ç•¥ */\n\n        | k_def fname\n            {\n            local_push(0);\n            $\u0026lt;id\u0026gt;$ = current_arg;\n            current_arg = 0;\n            }\n            {\n            $\u0026lt;num\u0026gt;$ = in_def;\n            in_def = 1;\n            }\n          f_arglist\n          bodystmt\n          k_end\n            {\n            /*%%%*/\n            NODE *body = remove_begin($6);\n            reduce_nodes(\u0026amp;body);\n            $$ = NEW_DEFN($2, $5, body, METHOD_VISI_PRIVATE);\n            nd_set_line($$, $\u0026lt;num\u0026gt;1);\n            /*%\n            $$ = dispatch3(def, $2, $5, $6);\n            %*/\n            local_pop();\n            in_def = $\u0026lt;num\u0026gt;4 \u0026amp; 1;\n            current_arg = $\u0026lt;id\u0026gt;3;\n            }\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eãŠã£ã€\u003ccode\u003efname\u003c/code\u003eãŒãƒ¡ã‚½ãƒƒãƒ‰åã‚’è¡¨ã—ã¦ã‚‹ã£ã½ã„ã€‚Rubyã®å ´åˆã€å†å®šç¾©ã§ãã‚‹æ¼”ç®—å­ãŒã‚ã‚‹ã®ã§ãƒ¡ã‚½ãƒƒãƒ‰åã£ã½ã„\u003ccode\u003etIDENTIFIER\u003c/code\u003eã®ä»–ã«\u003ccode\u003eop\u003c/code\u003eã‚„äºˆç´„èªãªã©ã‚‚å¼•æ•°ã«å–ã‚Œã‚‹ã‚ˆã†ã§ã™ã­ã€‚\u003c/p\u003e\n\n\u003cp\u003emethodãƒ¡ã‚½ãƒƒãƒ‰ã§ã¯å¼•æ•°ã«\u003ccode\u003e:+\u003c/code\u003eãªã©æ¼”ç®—å­ã®ãƒ¡ã‚½ãƒƒãƒ‰åã‚„å¤§æ–‡å­—ã®ãƒ¡ã‚½ãƒƒãƒ‰å\u003ccode\u003e:Integer\u003c/code\u003eã‚‚å–ã‚Œã‚‹ã®ã§\u003ccode\u003etIDENTIFIER\u003c/code\u003eã‚„\u003ccode\u003eop\u003c/code\u003eã‚„\u003ccode\u003etCONSTANT\u003c/code\u003eã¯ã¤ã‹ãˆãã†ã§ã™ãŒäºˆç´„èªã®\u003ccode\u003ereswords\u003c/code\u003eã¯å¿…è¦ãªã•ãã†ã§ã™ã­ã€‚\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"yacc\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eparse.y\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003efname       : tIDENTIFIER\n        | tCONSTANT\n        | tFID\n        | op\n            {\n            SET_LEX_STATE(EXPR_ENDFN);\n            $$ = $1;\n            }\n        | reswords\n            {\n            SET_LEX_STATE(EXPR_ENDFN);\n            /*%%%*/\n            $$ = $\u0026lt;id\u0026gt;1;\n            /*%\n            $$ = $1;\n            %*/\n            }\n        ;\n\n/* ä¸­ç•¥ */\n\nreswords    : keyword__LINE__ | keyword__FILE__ | keyword__ENCODING__\n        | keyword_BEGIN | keyword_END\n        | keyword_alias | keyword_and | keyword_begin\n        | keyword_break | keyword_case | keyword_class | keyword_def\n        | keyword_defined | keyword_do | keyword_else | keyword_elsif\n        | keyword_end | keyword_ensure | keyword_false\n        | keyword_for | keyword_in | keyword_module | keyword_next\n        | keyword_nil | keyword_not | keyword_or | keyword_redo\n        | keyword_rescue | keyword_retry | keyword_return | keyword_self\n        | keyword_super | keyword_then | keyword_true | keyword_undef\n        | keyword_when | keyword_yield | keyword_if | keyword_unless\n        | keyword_while | keyword_until\n        ;\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e\u003ccode\u003etIDENTIFIER\u003c/code\u003eã§æ¢ã™ã¨ä»Šå›ã®ç›®çš„ã«åˆã£ã¦ãã†ãªå®šç¾©ãŒã§ã¦ãã¾ã—ãŸã€‚\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"yacc\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eparse.y\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003eoperation2  : tIDENTIFIER\n        | tCONSTANT\n        | tFID\n        | op\n        ;\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003chr\u003e\n\n\u003cp\u003eæ•æ‰: æ›¸ã„ã¦ã‚‹æ™‚ç‚¹ã§ã¯\u003ccode\u003ereswords\u003c/code\u003eã„ã‚‰ãªã„ã¨æ€ã£ã¦ãŸã‘ã©ã“ã†ã„ã†ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚‚æ›¸ã‘ã‚‹ã‹ã‚‰ã„ã‚‹ã£ã½ã„\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"rb\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003enil\u003c/span\u003e\n  \u003cspan class=\"nb\"\u003eputs\u003c/span\u003e \u003cspan class=\"s1\"\u003e'hi'\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n\u003cspan class=\"nb\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003esend\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ss\"\u003e:nil\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"ãƒ¡ã‚½ãƒƒãƒ‰ã‚ˆã³ã ã—\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%82%88%E3%81%B3%E3%81%A0%E3%81%97\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eãƒ¡ã‚½ãƒƒãƒ‰ã‚ˆã³ã ã—\u003c/h3\u003e\n\n\u003cp\u003eãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—æ™‚ã®ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã‚„\u003ccode\u003e.\u003c/code\u003eã‚„ãƒ¡ã‚½ãƒƒãƒ‰åã®è¡¨ã—æ–¹ã‚’ç¢ºèªã™ã‚‹ãŸã‚å®šç¾©ã‚’æ¢ã—ã¾ã™ã€‚ãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—ã¯\u003ccode\u003e.\u003c/code\u003eãŒé–“ã«ã‚ã‚‹ã®ã§\u003ccode\u003e.\u003c/code\u003eã§æ¢ã—ã¦ã¿ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"sh\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"c\"\u003e# git grep -n '\".\"' parse.y`ã§ã¯ã†ã¾ãgrepã§ããªã‹ã£ãŸ\u003c/span\u003e\n% git \u003cspan class=\"nb\"\u003egrep\u003c/span\u003e \u003cspan class=\"nt\"\u003e-n\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"'\u003c/span\u003e\u003cspan class=\"se\"\u003e\\.\u003c/span\u003e\u003cspan class=\"s2\"\u003e'\"\u003c/span\u003e parse.y\nparse.y:4976:dot_or_colon       : \u003cspan class=\"s1\"\u003e'.'\u003c/span\u003e\nparse.y:4988:call_op    : \u003cspan class=\"s1\"\u003e'.'\u003c/span\u003e\nparse.y:4991:                   \u003cspan class=\"nv\"\u003e$$\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s1\"\u003e'.'\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\nparse.y:4993:                   \u003cspan class=\"nv\"\u003e$$\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e ripper_id2sym\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'.'\u003c/span\u003e\u003cspan class=\"o\"\u003e)\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\nparse.y:6064:      \u003cspan class=\"k\"\u003ecase\u003c/span\u003e \u003cspan class=\"s1\"\u003e'$'\u003c/span\u003e: \u003cspan class=\"k\"\u003ecase\u003c/span\u003e \u003cspan class=\"s1\"\u003e'*'\u003c/span\u003e: \u003cspan class=\"k\"\u003ecase\u003c/span\u003e \u003cspan class=\"s1\"\u003e'+'\u003c/span\u003e: \u003cspan class=\"k\"\u003ecase\u003c/span\u003e \u003cspan class=\"s1\"\u003e'.'\u003c/span\u003e:\nparse.y:6275:   BIT\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e';'\u003c/span\u003e, idx\u003cspan class=\"p\"\u003e)\u003c/span\u003e | BIT\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e','\u003c/span\u003e, idx\u003cspan class=\"o\"\u003e)\u003c/span\u003e | BIT\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'.'\u003c/span\u003e, idx\u003cspan class=\"o\"\u003e)\u003c/span\u003e | BIT\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'='\u003c/span\u003e, idx\u003cspan class=\"o\"\u003e)\u003c/span\u003e | \u003cspan class=\"se\"\u003e\\\u003c/span\u003e\nparse.y:6606:   \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"o\"\u003e(\u003c/span\u003ec \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s1\"\u003e'.'\u003c/span\u003e\u003cspan class=\"o\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e{\u003c/span\u003e\nparse.y:7363:   \u003cspan class=\"k\"\u003eelse if\u003c/span\u003e \u003cspan class=\"o\"\u003e(\u003c/span\u003ec \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s1\"\u003e'.'\u003c/span\u003e \u003cspan class=\"o\"\u003e||\u003c/span\u003e c \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s1\"\u003e'e'\u003c/span\u003e \u003cspan class=\"o\"\u003e||\u003c/span\u003e c \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s1\"\u003e'E'\u003c/span\u003e\u003cspan class=\"o\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e{\u003c/span\u003e\nparse.y:7381:     \u003cspan class=\"k\"\u003ecase\u003c/span\u003e \u003cspan class=\"s1\"\u003e'.'\u003c/span\u003e:\nparse.y:7395:       tokadd\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'.'\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\nparse.y:7722:      \u003cspan class=\"k\"\u003ecase\u003c/span\u003e \u003cspan class=\"s1\"\u003e'.'\u003c/span\u003e:            /\u003cspan class=\"k\"\u003e*\u003c/span\u003e \u003cspan class=\"nv\"\u003e$.\u003c/span\u003e: last \u003cspan class=\"nb\"\u003eread \u003c/span\u003eline number \u003cspan class=\"k\"\u003e*\u003c/span\u003e/\nparse.y:8051:         \u003cspan class=\"k\"\u003ecase\u003c/span\u003e \u003cspan class=\"s1\"\u003e'.'\u003c/span\u003e: \u003cspan class=\"o\"\u003e{\u003c/span\u003e\nparse.y:8053:           \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"o\"\u003e(\u003c/span\u003epeek\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'.'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"o\"\u003e(\u003c/span\u003ec \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s1\"\u003e'\u0026amp;'\u003c/span\u003e\u003cspan class=\"o\"\u003e))\u003c/span\u003e \u003cspan class=\"o\"\u003e{\u003c/span\u003e\nparse.y:8286:   \u003cspan class=\"k\"\u003eelse if\u003c/span\u003e \u003cspan class=\"o\"\u003e(\u003c/span\u003ec \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s1\"\u003e'.'\u003c/span\u003e\u003cspan class=\"o\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e{\u003c/span\u003e\nparse.y:8386:      \u003cspan class=\"k\"\u003ecase\u003c/span\u003e \u003cspan class=\"s1\"\u003e'.'\u003c/span\u003e:\nparse.y:8388:   \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"o\"\u003e((\u003c/span\u003ec \u003cspan class=\"o\"\u003e=\u003c/span\u003e nextc\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s1\"\u003e'.'\u003c/span\u003e\u003cspan class=\"o\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e{\u003c/span\u003e\nparse.y:8389:       \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"o\"\u003e((\u003c/span\u003ec \u003cspan class=\"o\"\u003e=\u003c/span\u003e nextc\u003cspan class=\"o\"\u003e())\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s1\"\u003e'.'\u003c/span\u003e\u003cspan class=\"o\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e{\u003c/span\u003e\nparse.y:8400:   \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"s1\"\u003e'.'\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003ccode\u003ecall_op\u003c/code\u003eãŒæ€ªã—ã„ã®ã§ãã‚Œã§æ¤œç´¢ã™ã‚‹ã¨ã€ãã‚Œã£ã½ã„ã®ãŒã§ã¾ã—ãŸã€‚ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã¯\u003ccode\u003eprimary_value\u003c/code\u003eã¨æ›¸ãã€ãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—ã®\u003ccode\u003e.\u003c/code\u003eã¯\u003ccode\u003ecall_op\u003c/code\u003eã¨å‘¼ã°ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"yacc\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eparse.y\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003emethod_call : fcall paren_args\n\n/* ä¸­ç•¥ */\n\n        | primary_value call_op operation2\n            {\n            /*%%%*/\n            $\u0026lt;num\u0026gt;$ = ruby_sourceline;\n            /*% %*/\n            }\n          opt_paren_args\n            {\n            /*%%%*/\n            $$ = NEW_QCALL($2, $1, $3, $5);\n            nd_set_line($$, $\u0026lt;num\u0026gt;4);\n            /*%\n            $$ = dispatch3(call, $1, $2, $3);\n            $$ = method_optarg($$, $5);\n            %*/\n            }\n\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"-ã¨-ã®è¡¨ç¾\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#-%E3%81%A8-%E3%81%AE%E8%A1%A8%E7%8F%BE\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003ccode\u003e{\u003c/code\u003e ã¨ \u003ccode\u003e}\u003c/code\u003eã®è¡¨ç¾\u003c/h3\u003e\n\n\u003cp\u003egrepã—ãŸã‚‰ã™ãã¿ã¤ã‹ã£ãŸã€‚\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e% git grep -n \"'{'\" parse.y\nparse.y:1068:             '{' top_compstmt '}'\nparse.y:1168:             '{' top_compstmt '}'\nparse.y:1280:           | keyword_END '{' compstmt '}'\nparse.y:3720:brace_block        : '{'\nparse.y:5771:    if (peek('{')) {  /* handle \\u{...} form */\nparse.y:6144:       if (c2 == '$' || c2 == '@' || c2 == '{') {\nparse.y:6312:      case '{':\nparse.y:7582:   else if (term == '{') term = '}';\nparse.y:8541:      case '{':\nparse.y:8554:       c = '{';          /* block (primary) */\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eæ™®é€šã«\u003ccode\u003e'{'\u003c/code\u003eã¨\u003ccode\u003e'}'\u003c/code\u003eã‚’æ›¸ã‘ã°ã‚ˆã•ãã†ã§ã™ã­!\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"yacc\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eparse.y\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003etop_stmt    : stmt\n        | keyword_BEGIN\n            {\n            /*%%%*/\n            /* local_push(0); */\n            /*%\n            %*/\n            }\n          '{' top_compstmt '}'\n            {\n            /*%%%*/\n            ruby_eval_tree_begin = block_append(ruby_eval_tree_begin,\n                                $4);\n            /* NEW_PREEXE($4)); */\n            /* local_pop(); */\n            $$ = NEW_BEGIN(0);\n            /*%\n            $$ = dispatch1(BEGIN, $4);\n            %*/\n            }\n        ;\n\n/* ä¸­ç•¥ */\n\nstmt_or_begin   : stmt\n                    {\n            $$ = $1;\n            }\n                | keyword_BEGIN\n            {\n            yyerror(\"BEGIN is permitted only at toplevel\");\n            /*%%%*/\n            /* local_push(0); */\n            /*%\n            %*/\n            }\n          '{' top_compstmt '}'\n            {\n            /*%%%*/\n            ruby_eval_tree_begin = block_append(ruby_eval_tree_begin,\n                                $4);\n            /* NEW_PREEXE($4)); */\n            /* local_pop(); */\n            $$ = NEW_BEGIN(0);\n            /*%\n            $$ = dispatch1(BEGIN, $4);\n            %*/\n            }\n\n/* ä¸­ç•¥ */\n\nbrace_block : '{'\n            {\n            /*%%%*/\n            $\u0026lt;num\u0026gt;$ = ruby_sourceline;\n            /*% %*/\n            }\n          brace_body '}'\n            {\n            $$ = $3;\n            /*%%%*/\n            nd_set_line($$, $\u0026lt;num\u0026gt;2);\n            /*% %*/\n            }\n        | keyword_do\n            {\n            /*%%%*/\n            $\u0026lt;num\u0026gt;$ = ruby_sourceline;\n            /*% %*/\n            }\n          do_body keyword_end\n            {\n            $$ = $3;\n            /*%%%*/\n            nd_set_line($$, $\u0026lt;num\u0026gt;2);\n            /*% %*/\n            }\n        ;\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"memo-parseyã‚’æ›¸ã\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#memo-parsey%E3%82%92%E6%9B%B8%E3%81%8F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003cimg alt=\":pencil:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f4dd.png\" title=\":pencil:\" width=\"20\"\u003e parse.yã‚’æ›¸ã\u003c/h2\u003e\n\n\u003cp\u003eparse.yã‚’ã¿ã‚‹ã¨\u003ccode\u003eprimary_value\u003c/code\u003eã¨\u003ccode\u003ecall_op\u003c/code\u003eã¨\u003ccode\u003e'{'\u003c/code\u003eã¨\u003ccode\u003eoperation2\u003c/code\u003eã¨\u003ccode\u003e'}'\u003c/code\u003eã‚’çµ„ã¿åˆã‚ã›ã‚Œã°ãã‚Œã£ã½ã„syntaxãŒå®šç¾©ã§ããã†ãªã®ã§æ›¸ã„ã¦ã¿ã¾ã—ã‚‡ã†ã€‚\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"æ›¸ãå ´æ‰€\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%9B%B8%E3%81%8F%E5%A0%B4%E6%89%80\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eæ›¸ãå ´æ‰€\u003c/h3\u003e\n\n\u003cp\u003eã©ã“ã«æ›¸ãã‹æ‚©ã‚€ã‚“ã§ã™ãŒãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—ã‚„Î»ã½ã„å®šç¾©ã‚ã£ãŸã‚“ã§ãã®ã‚ãŸã‚Šã«è¶³ã—ã¾ã™\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"yacc\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eparse.y\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003eprimary     : literal\n\n/* ä¸­ç•¥ */\n\n        | method_call\n        | method_call brace_block\n            {\n            /*%%%*/\n            block_dup_check($1-\u0026gt;nd_args, $2);\n            $2-\u0026gt;nd_iter = $1;\n            $$ = $2;\n            /*%\n            $$ = method_add_block($1, $2);\n            %*/\n            }\n\n/* ã“ã®ã¸ã‚“? */\n\n        | tLAMBDA lambda\n            {\n            $$ = $2;\n            }\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eä»–ã®éƒ¨åˆ†ã®çœŸä¼¼ã‚’ã—ã¦ä»˜ã‘è¶³ã—ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"yacc\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eparse.y\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e        | primary_value call_op '{' operation2 '}'\n            {\n                ã“ã“ã«å®Ÿè£…ã‚’æ›¸ã\n            }\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"ãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—ã®å®Ÿè£…ã‚’èª­ã‚€\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E5%91%BC%E3%81%B3%E5%87%BA%E3%81%97%E3%81%AE%E5%AE%9F%E8%A3%85%E3%82%92%E8%AA%AD%E3%82%80\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—ã®å®Ÿè£…ã‚’èª­ã‚€\u003c/h3\u003e\n\n\u003cp\u003e\u003ccode\u003eobject.{method}\u003c/code\u003eã¨æ›¸ã„ãŸã¨ãã€Objectã«å¯¾ã—ã¦methodãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã—ãŸã„ã®ã§å‚è€ƒã®ãŸã‚ã«method_callã®å®Ÿè£…ã‚’èª­ã¿ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"yacc\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eparse.y\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003emethod_call : fcall paren_args\n            {\n/* ç•¥ */\n            }\n        | primary_value call_op operation2\n            {\n            /*%%%*/\n            $\u0026lt;num\u0026gt;$ = ruby_sourceline;\n            /*% %*/\n            }\n          opt_paren_args\n            {\n            /*%%%*/\n                        /* \n            $$ = NEW_QCALL($2, $1, $3, $5);\n            nd_set_line($$, $\u0026lt;num\u0026gt;4);\n            /*%\n/* ã“ã“ã‹ã‚‰ã—ãŸã¯Ripperå‘ã‘å®šç¾©ã®ã‚ˆã† */\n            $$ = dispatch3(call, $1, $2, $3);\n            $$ = method_optarg($$, $5);\n            %*/\n            }\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eå®šç¾©ã—ã¦ã‚‹éƒ¨åˆ†ã®æœ€åˆã®ãƒˆãƒ¼ã‚¯ãƒ³ã‹ã‚‰é †ç•ªã‚ˆã\u003ccode\u003e$æ•°å­—\u003c/code\u003eã¨å…¥ã£ã¦ã„ãã‚ˆã†ã§ã™ã€‚\u003cbr\u003e\nmethod_callã®å®šç¾©ã®å ´åˆã¯\u003ccode\u003eprimary_value\u003c/code\u003eãŒ\u003ccode\u003e$1\u003c/code\u003eã«ã€\u003ccode\u003ecall_op\u003c/code\u003eãŒ\u003ccode\u003e$2\u003c/code\u003eã«ã€\u003ccode\u003eoperation2\u003c/code\u003eãŒ\u003ccode\u003e$3\u003c/code\u003eã«ã€\u003ccode\u003eruby_source_line\u003c/code\u003eãŒ\u003ccode\u003e$4\u003c/code\u003eã«ã€\u003ccode\u003eopt_paren_args\u003c/code\u003eãŒ\u003ccode\u003e$5\u003c/code\u003eã§ã—ã‚‡ã†ã‹ã€‚\u003cbr\u003e\nå®Ÿè£…éƒ¨åˆ†ã§ã¯\u003ccode\u003eNEW_QCALL(call_op, primary_value, operation2, opt_paren_args)\u003c/code\u003eã®çµæœã‚’\u003ccode\u003e$$\u003c/code\u003eã«ä»£å…¥ã—ã¦ã„ã¾ã™ã­ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eNEW_QCALL\u003c/code\u003eã®å®šç¾©ã‚’èª­ã‚€ã¨ã€\u003ccode\u003eNEW_QCALL\u003c/code\u003eã§ã¯ã¼ã£ã¡æ¼”ç®—å­(\u003ccode\u003e\u0026amp;.\u003c/code\u003e)ã§ãƒ¡ã‚½ãƒƒãƒ‰ãŒå‘¼ã°ã‚ŒãŸã¨ãã«å¯¾å¿œã™ã‚‹ãŸã‚ã®å‡¦ç†ãŒå…¥ã‚Šã€æœ€çµ‚çš„ã«\u003ccode\u003eNODE_CALL\u003c/code\u003eãŒå‘¼ã°ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eparse.y\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"cp\"\u003e#define CALL_Q_P(q) ((q) == tANDDOT)\n#define NODE_CALL_Q(q) (CALL_Q_P(q) ? NODE_QCALL : NODE_CALL)\n#define NEW_QCALL(q,r,m,a) NEW_NODE(NODE_CALL_Q(q),r,m,a)\n\u003c/span\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e\u003ccode\u003eNODE_CALL\u003c/code\u003eã®ä½¿ã„æ–¹ã‚’èª¿ã¹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ä»¥ä¸‹ã®ã‚ˆã†ãªé–¢æ•°ãŒã‚ã‚Šã¾ã—ãŸã€‚\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eparse.y\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"n\"\u003eNODE\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\n\u003cspan class=\"nf\"\u003ecall_bin_op_gen\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003estruct\u003c/span\u003e \u003cspan class=\"n\"\u003eparser_params\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003eparser\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eNODE\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003erecv\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eID\u003c/span\u003e \u003cspan class=\"n\"\u003eid\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eNODE\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003earg1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003evalue_expr\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erecv\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003evalue_expr\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003earg1\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eNEW_CALL\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erecv\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eid\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eNEW_LIST\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003earg1\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003emethodãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã¶å ´åˆã€\u003ccode\u003eNODE_CALL\u003c/code\u003eã«ç¬¬ä¸€å¼•æ•°ã«ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã€ç¬¬äºŒå¼•æ•°ã®idã«methodãƒ¡ã‚½ãƒƒãƒ‰ã®IDã€ç¬¬ä¸‰å¼•æ•°ã«\u003ccode\u003eNEW_LIST(methodãƒ¡ã‚½ãƒƒãƒ‰ã«æ¸¡ã™å¼•æ•°ã®NODE)\u003c/code\u003eã‚’æ¸¡ã™ã¨ã‚ˆã•ãã†ã§ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eãã‚Œã§ã¯å®Ÿè£…ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"æ›¸ã\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%9B%B8%E3%81%8F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eæ›¸ã\u003c/h3\u003e\n\n\u003cp\u003eã¾ãšã¯NEW_QCALLã‚’å‘¼ã³å‡ºã—ã¾ã—ã‚‡ã†ã€‚ç¬¬1å¼•æ•°ã«ã¯call_opã‚’æ¸¡ã—ã€ç¬¬2å¼•æ•°ã«receiverã‚’æ¸¡ã—ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"yacc\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eparse.y\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e        | primary_value call_op '{' operation2 '}'\n            {\n                $$ = NEW_QCALL($2, $1, methodãƒ¡ã‚½ãƒƒãƒ‰ã®ID, NEW_LIST(methodãƒ¡ã‚½ãƒƒãƒ‰ã®å¼•æ•°ã®NODE);\n            }\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003emethodãƒ¡ã‚½ãƒƒãƒ‰ã‚’ã®IDã‚’å–ã‚‹æ–¹æ³•ã‚’èª¿ã¹ã¾ã™ã€‚ã€ŒIDã‚’è¿”ã™ã€ã§æ¤œç´¢ã™ã‚‹ã¨ä»¥ä¸‹ã®æ–‡æ›¸ãŒå¼•ã£ã‹ã‹ã‚Šã¾ã—ãŸã€‚\u003ccode\u003erb_intern\u003c/code\u003eã‚’ä½¿ã†ã¨ã‚ˆã•ãã†ã§ã™ \u003cimg alt=\":smiley:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f603.png\" title=\":smiley:\" width=\"20\"\u003e \u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"rdoc\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003edoc/extension.ja.rdoc\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003eID rb_intern(const char *name) ::\n\n  æ–‡å­—åˆ—ã«å¯¾å¿œã™ã‚‹IDã‚’è¿”ã™ï¼\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"yacc\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eparse.y\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e        | primary_value call_op '{' operation2 '}'\n            {\n                $$ = NEW_QCALL($2, $1, rb_intern(\"method\"), NEW_LIST(methodãƒ¡ã‚½ãƒƒãƒ‰ã®å¼•æ•°ã®NODE);\n            }\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eæ¬¡ã¯operation2ã‹ã‚‰methodãƒ¡ã‚½ãƒƒãƒ‰ã®å¼•æ•°ã®NODEã‚’ä½œã‚Šã¾ã™ã€‚methodãƒ¡ã‚½ãƒƒãƒ‰ã®å¼•æ•°ã¯ã‚·ãƒ³ãƒœãƒ«ãªã®ã§ã‚·ãƒ³ãƒœãƒ«ã®å®šç¾©ã‚’èª­ã‚€ã¨\u003ccode\u003eNEW_LIT(ID2SYM(ã€œ))\u003c/code\u003eã§ã‚·ãƒ³ãƒœãƒ«ãŒå‡ºæ¥ã‚‹ã‚ˆã†ã§ã™ã€‚\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"yacc\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eparse.y\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003eliteral     : numeric\n        | symbol\n            {\n            /*%%%*/\n            $$ = NEW_LIT(ID2SYM($1));\n            /*%\n            $$ = dispatch1(symbol_literal, $1);\n            %*/\n            }\n        | dsym\n        ;\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eå¿µã®ãŸã‚\u003ccode\u003eNEW_LIT\u003c/code\u003eãŒNODEã‚’è¿”ã™ã‹å®šç¾©ã‚’ç¢ºèª\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003enode.h\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"cp\"\u003e#define NEW_LIT(l) NEW_NODE(NODE_LIT,l,0,0)\n\u003c/span\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eã‚ã¨ã¯\u003ccode\u003e.{}\u003c/code\u003eæ¼”ç®—å­ã®å®šç¾©ã®operation2ã€\u003ccode\u003e$4\u003c/code\u003eã‚’å¼•æ•°ã‚ãŸã—ã¦ã‚·ãƒ³ãƒœãƒ«åŒ–ã™ã‚‹ã¨ã‚ˆã•ãã†ã§ã™ã­!\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"yacc\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eparse.y\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e        | primary_value call_op '{' operation2 '}'\n            {\n                $$ = NEW_QCALL($2, $1, rb_intern(\"method\"), NEW_LIST(NEW_LIT(ID2SYM($4))));\n            }\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eã•ã£ããmakeã—ã¦ã¿ã¾ã™ã€‚parse.yã‹ã‚‰parse.cãŒç”Ÿæˆã•ã‚Œã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã•ã‚Œã¾ã™ã€‚\u003cbr\u003e\nRipperã®å®šç¾©ã‚’çœã„ãŸã®ã§ripperã®ãƒ“ãƒ«ãƒ‰ã¯ã‚³ã‚±ã¾ã—ãŸãŒã€parse.yã¯ã†ã¾ãã‚³ãƒ³ãƒ‘ã‚¤ãƒ«å‡ºæ¥ãŸã‚ˆã†ã§ã™!\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e% make\n(ç•¥)\ngenerating parse.c\ncompiling parse.c\nlinking miniruby\n(ç•¥)\ncompiling ripper.c\nripper.y: In function 'ripper_yyparse':\nripper.y:2798:17: warning: assignment makes integer from pointer without a cast [-Wint-conversion]\n     $$ = NEW_QCALL($2, $1, rb_intern(\"method\"), NEW_LIST(NEW_LIT(ID2SYM($4))));\n                 ^\nlinking shared-object ripper.bundle\nchecking ../.././parse.y and ../.././ext/ripper/eventids2.c\n*** Following extensions failed to configure:\n../.././ext/openssl/extconf.rb:0: Failed to configure openssl. It will not be installed.\n*** Fix the problems, then remove these directories and try again if you want.\n(ç•¥)\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eæ—©é€Ÿç¢ºèªç”¨ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å‹•ã‹ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e% cat method_method_syntax.rb\nãŒ°å¤ªéƒ = \"\"\nuh = ãŒ°å¤ªéƒ.{concat}\n\nğŸ = \"apple\"\nâœ’ï¸ = \"pen\"\n\n[ğŸ, âœ’ï¸].each(\u0026amp;uh)\n\nputs ãŒ°å¤ªéƒ.to_s\n\n% ./ruby --disable=gems method_method_syntax.rb\nmethod_method_syntax.rb:2: syntax error, unexpected {, expecting '('\nuh = ãŒ°å¤ªéƒ.{concat}\n                ^\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eã‚ã‚Œã€ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¾ã—ãŸã€‚\u003ccode\u003eunexpected {\u003c/code\u003eã¨è¨€ã‚ã‚Œã¦é–‰ã¾ã£ã¦ã„ã¾ã™ã€‚\u003ccode\u003e{\u003c/code\u003eãŒã†ã¾ãèªè­˜ã•ã‚Œã¦ãªã•ãã†ã§ã™ã€‚\u003cbr\u003e\nä»–ã®\u003ccode\u003e{\u003c/code\u003eã‚’ä½¿ã†syntaxã‚’ç¢ºèªã™ã‚‹ã¨Hashã®è¨˜æ³•ã®å®šç¾©ã§ã¯\u003ccode\u003etLBRACE\u003c/code\u003eã‚’ä½¿ã£ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"yacc\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eparse.y\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e        | tLBRACE assoc_list '}'\n            {\n            /*%%%*/\n            $$ = new_hash($2);\n            /*%\n            $$ = dispatch1(hash, escape_Qundef($2));\n            %*/\n            }\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eHashã¨åŒã˜ã‚ˆã†ã«tLBRACEã§ç½®ãæ›ãˆã¦ã¿ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"yacc\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eparse.y\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e        | primary_value call_op tLBRACE operation2 '}'\n            {\n                $$ = NEW_QCALL($2, $1, rb_intern(\"method\"), NEW_LIST(NEW_LIT(ID2SYM($4))));\n            }\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã¦å†å®Ÿè¡Œ\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e% make\n% % ./ruby --disable=gems method_method_syntax.rb\napplepen\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eå‹•ãã¾ã—ãŸ \u003cimg alt=\":green_apple:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f34f.png\" title=\":green_apple:\" width=\"20\"\u003e \u003cimg alt=\":pen_fountain:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f58b.png\" title=\":pen_fountain:\" width=\"20\"\u003e \u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://github.com/hanachin/ruby/tree/method_method_syntax\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://github.com/hanachin/ruby/tree/method_method_syntax\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"sparklesgemsparkles-ã¾ã¨ã‚\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#sparklesgemsparkles-%E3%81%BE%E3%81%A8%E3%82%81\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003cimg alt=\":sparkles:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/2728.png\" title=\":sparkles:\" width=\"20\"\u003e\u003cimg alt=\":gem:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f48e.png\" title=\":gem:\" width=\"20\"\u003e\u003cimg alt=\":sparkles:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/2728.png\" title=\":sparkles:\" width=\"20\"\u003e ã¾ã¨ã‚\u003c/h2\u003e\n\n\u003cp\u003eparse.yã‚’èª­ã¿æ›¸ãã—ã¦\u003ccode\u003e.{}\u003c/code\u003eæ¼”ç®—å­ã‚’è¿½åŠ ã—ã¦ã¿ã¾ã—ãŸ\u003cimg alt=\":sparkles:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/2728.png\" title=\":sparkles:\" width=\"20\"\u003e\u003cbr\u003e\nparse.yã„ã˜ã‚‹ã¨æ™®æ®µå¤‰æ›´ã§ããªã„syntaxã‚’å¤‰æ›´å‡ºæ¥ã‚‹ã®ã§æ¥½ã—ã„ã§ã™ã­ \u003cimg alt=\":leopard:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f406.png\" title=\":leopard:\" width=\"20\"\u003e \u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"hibiscus-okinawarbã«ã¤ã„ã¦-pig2-\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#hibiscus-okinawarb%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6-pig2-\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003cimg alt=\":hibiscus:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f33a.png\" title=\":hibiscus:\" width=\"20\"\u003e Okinawa.rbã«ã¤ã„ã¦ \u003cimg alt=\":pig2:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f416.png\" title=\":pig2:\" width=\"20\"\u003e \u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"http://qiita.com/advent-calendar/2016/okinawarb\"\u003eOkinawa.rbã®Advent Calendar 2016\u003c/a\u003e ã¯è¨˜äº‹ã‚’èª­ã‚€äººãƒ»æ›¸ãäººã‚’å‹Ÿé›†ã—ã¦ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eOkinawa.rbã¯å‚åŠ è€…ã‚‚å‹Ÿé›†ã—ã¦ã„ã¾ã™ \u003cimg alt=\":airplane:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/2708-fe0f.png\" title=\":airplane:\" width=\"20\"\u003e\u003cimg alt=\":pineapple:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f34d.png\" title=\":pineapple:\" width=\"20\"\u003e \u003cbr\u003e\né–‹å‚¬æƒ…å ±ã¯Doorkeeperã«è¼‰ã£ã¦ã„ã¾ã™ã€‚æ¯æœˆã©ã“ã‹ã®é€±ã®æ°´æ›œæ—¥ã®å¤œã«é–‹å‚¬ã—ã¦ã„ã¾ã™ \u003cimg alt=\":watermelon:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f349.png\" title=\":watermelon:\" width=\"20\"\u003e  \u003cimg alt=\":calendar_spiral:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f5d3.png\" title=\":calendar_spiral:\" width=\"20\"\u003e\u003cbr\u003e\n\u003ca href=\"https://okinawarb.doorkeeper.jp\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://okinawarb.doorkeeper.jp\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eæµã‚Œçš„ã«ã¯é›‘è«‡ã€åˆå¯¾é¢ã®äººãŒã„ã‚‹ã¨ãã¯è‡ªå·±ç´¹ä»‹ã€ã‚‚ãã‚‚ãã€è§£æ•£ã§ã™ã€‚(åƒ•ã¯ã‚‚ãã‚‚ãã¨Rubyã®ã‚½ãƒ¼ã‚¹ã‚’èª­ã‚“ã ã‚Šã—ã¦ã„ã¾ã™)\u003c/p\u003e\n\n\u003cp\u003eæ¬¡å›ã¯2016-12-14ï¼ˆæ°´ï¼‰19:00 - 22:00ã§ã™ã€‚\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"å‚è€ƒ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8F%82%E8%80%83\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eå‚è€ƒ\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://amzn.to/2huecOL\" rel=\"nofollow noopener\" target=\"_blank\"\u003eRubyã®ã—ãã¿ã€€Ruby Under a Microscope\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e- \u003ca href=\"http://i.loveruby.net/ja/rhg/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eã€Rubyã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰å®Œå…¨è§£èª¬ã€ã‚µãƒãƒ¼ãƒˆãƒšãƒ¼ã‚¸\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://magazine.rubyist.net/?0031-parsey\" rel=\"nofollow noopener\" target=\"_blank\"\u003eRubyist Magazine - parse.y ã®æ­©ãæ–¹ - ãƒ¯ã‚·ã® Ruby ã¯ 4 å¼ã¾ã§ã‚ã‚‹ã -\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n","body":":hibiscus: [Okinawa.rbã®Advent Calendar 2016](http://qiita.com/advent-calendar/2016/okinawarb) :pig2: 10æ—¥ç›®ã§ã™ã€‚\n\nRubyã§Methodã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å–ã‚Šå‡ºã™syntaxãŒæ¬²ã—ã„ã¨ãã£ã¦ã‚ã‚Šã¾ã™ã‚ˆã­ã€‚ruby-coreã§`o.:method`ã‚„`o[.method]`ã‚„`o-\u003emethod`ãªã©ãŒææ¡ˆã•ã‚Œã¦ã„ã¾ã™ãŒã—ã£ãã‚Šã“ãªã„ã¿ãŸã„ã§ã™ã€‚\nhttps://bugs.ruby-lang.org/issues/12125#change-57209\n\n\nRubyã®syntaxã‚’ã„ã˜ã‚‹ç·´ç¿’ã«ææ¡ˆã•ã‚Œã¦ã„ã‚‹syntaxã¨ã¯åˆ¥ã®syntaxã‚’é›‘ã«å®Ÿè£…ã—ã¦ã¿ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚\n\n:bulb: ã©ã†ã„ã†syntaxã‚’å®Ÿè£…ã™ã‚‹ã‹\n----\n\nã“ã“ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒã‚ã‚Šã¾ã™ã€‚\n\n```rb\no = Object.new\n```\n\nã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®methodãƒ¡ã‚½ãƒƒãƒ‰ã®å–ã‚Šå‡ºã—æ–¹ã‚’è€ƒãˆã¾ã™ã€‚\n\nã¨ã‚Šã ã™ãƒ¡ã‚½ãƒƒãƒ‰ã®åå‰ã‚’æŒ‡å®šã—ãªã„ã¨å–ã‚Šå‡ºã›ãªã„ã®ã§ã€ã¨ã‚Šã‚ãˆãšmethodã¨æ›¸ãå¿…è¦ã¯ã‚ã‚‹ã§ã—ã‚‡ã†ã€‚\n\n```rb\no /*ä½•ã‹ã—ã‚‰ã®syntax*/ method\n```\n\nã‚‹ã‚Šã¾ã®[Rubyã§ä½¿ã‚ã‚Œã‚‹è¨˜å·ã®æ„å‘³](https://docs.ruby-lang.org/ja/latest/doc/symref.html)ã‚„[ãƒªãƒ†ãƒ©ãƒ«](https://docs.ruby-lang.org/ja/latest/doc/spec=2fliteral.html)ã®ãƒšãƒ¼ã‚¸ã‚’è¦‹ã‚‹ã¨è¨˜å·ã¯ã ã„ãŸã„ä½¿ã‚ã‚Œã¦ã„ãã†ã§ã™ã€‚\n\nRubyã§ã¯Procã‚’ã¤ãã‚‹ã¨ãã«`-\u003e { }`ã€ãƒ–ãƒ­ãƒƒã‚¯ã‚’ä½œã‚‹ã¨ãã«`foo { }`ã®ã‚ˆã†ã«`{}`ã‚’ä½¿ã†ã“ã¨ãŒå¤šã„ã§ã™ã­ã€‚methodãƒ¡ã‚½ãƒƒãƒ‰ã‚‚Procã‚„ãƒ–ãƒ­ãƒƒã‚¯ã¨åŒã˜ã‚ˆã†ã«callã§ãã‚‹ã®ã§åŒã˜ã‚ˆã†ã«`{}`ã‚’ä½¿ã£ã¦æ›¸ããŸã„ã§ã™ã€‚\nãªã®ã§ã€ä»Šå›ã¯`receiver.{method}`ã§Methodã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å–ã‚Šå‡ºã›ã‚‹ã‚ˆã†ã«ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚\n\nä»¥é™`.{}`æ¼”ç®—å­ã¨å‘¼ã³ã¾ã™ã€‚\n\n:wrench: æº–å‚™\n----\n\n```console\n% git clone git://github.com/ruby/ruby.git\n% cd ruby\n% git fetch --tags\n% git checkout -b method_method_syntax v2_4_0_preview3\n```\n\nä»Šå›ã¯syntaxé›‘ã«è¶³ã—ã¦ã¿ã‚‹ã®ãŒç›®çš„ãªã®ã§ãƒ“ãƒ«ãƒ‰ã¯å„è‡ªREADMEã‚’èª­ã‚“ã§ã‚„ã£ã¦ã„ã :muscle:\nhttps://github.com/ruby/ruby#how-to-compile-and-install\n\n:apple::pen_fountain: ãƒ†ã‚¹ãƒˆ\n----\n\né›‘ã«è¶³ã™ã ã‘ãªã®ã§ä»¥ä¸‹ã§applepenã¨è¡¨ç¤ºã•ã‚Œã‚Œã°ã„ã„ã“ã¨ã«ã—ã¾ã™ã€‚\n\n```rb\nãŒ°å¤ªéƒ = \"\"\nuh = ãŒ°å¤ªéƒ.{concat}\n\nğŸ = \"apple\"\nâœ’ï¸ = \"pen\"\n\n[ğŸ, âœ’ï¸].each(\u0026uh)\n\nputs ãŒ°å¤ªéƒ.to_s\n# applepen\n```\n\n:eyes: parse.yã‚’èª­ã‚€\n----\n\nRubyã®ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ã¯parse.yã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚\n\nparse.yã‚’èª­ã‚“ã§ä»¥ä¸‹ã®è¡¨ç¾ãŒã‚ã‹ã‚Œã°`.{}`æ¼”ç®—å­ã‚’å®šç¾©ã§ããã†ã§ã™ã€‚\n\n- ãƒ¬ã‚·ãƒ¼ãƒãƒ¼\n- `.`\n- ãƒ¡ã‚½ãƒƒãƒ‰å\n- `{` ã¨ `}`\n\n\nparse.yã¯ã ã„ãŸã„1ä¸‡è¡Œã¡ã‚‡ã£ã¨ã‚ã‚‹ã†ã¡åŠåˆ†ãã‚‰ã„ã¾ã§syntaxãŒå®šç¾©ã•ã‚Œã¦ã¦ãã®ä¸‹ã«ãƒˆãƒ¼ã‚¯ãƒ³åˆ‡ã‚Šå‡ºã™å‡¦ç†ãŒã‚ã‚Šã¾ã™ã€‚\nè‰²ã€…å®šç¾©ã•ã‚Œã¦ã‚‹ã¨ã“ã«ã¯Ripperå‘ã‘ã®ã‚³ãƒ¼ãƒ‰ãŒæŒŸã¾ã£ã¦ã„ã‚‹ã®ã§é›‘ã«syntaxè¶³ã™ãªã‚‰1ä¸‡è¡Œã®ã†ã¡ã®å‰åŠåˆ†ã€ãã‚Œãã‚Œã®å®šç¾©ã®ä¸Šã®æ–¹ã ã‘èª­ã‚ã°ã‚ˆã•ãã†ã§ã™ :ok_hand: \n\n```parse.y\nãªã¾ãˆ : ãƒˆãƒ¼ã‚¯ãƒ³1 ãƒˆãƒ¼ã‚¯ãƒ³2\n         {\n           /*%%%*/\n             $$ = ã˜ã£ã“ã†ã•ã‚Œã‚‹ã‚„ã¤\n           /*%\n             $$ = Ripperã®ãŸã‚ã®ã‚‚ã‚ã‚‚ã‚\n           %*/\n        }\n    ;\n```\n\n### ãƒ¡ã‚½ãƒƒãƒ‰åã®è¡¨ã—æ–¹\n\nã¨ã‚Šã‚ãˆãšãƒ¡ã‚½ãƒƒãƒ‰åã®å®šç¾©ã®ã‚ãŸã‚Šã‚’æ¢ã—ã¾ã™ã€‚ãƒ¡ã‚½ãƒƒãƒ‰åã‚’å®šç¾©ã™ã‚‹ã¨ãã¯defã¨æ›¸ãã®ã§defã§grepã—ã¾ã™ã€‚\n\n```\n% git grep -n '\"def\"' parse.y\nparse.y:3129:                   token_info_push(\"def\");\nparse.y:11176:    {keyword_def, \"def\"},\n```\n\n\n`keyword_def`ãŒã§ã¦ãã¾ã—ãŸã€‚ãã‚Œã£ã½ã„ã®ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã§æ¤œç´¢ã™ã‚‹ã¨`k_def`ãŒå‡ºã¦ããŸã®ã§æ›´ã«`k_def`ã§æ¤œç´¢ã—ã¾ã™ã€‚\n\n```parse.y\nk_def\t\t: keyword_def\n\t\t    {\n\t\t\ttoken_info_push(\"def\");\n\t\t    /*%%%*/\n\t\t\t$\u003cnum\u003e$ = ruby_sourceline;\n\t\t    /*%\n\t\t    %*/\n\t\t    }\n\t\t;\n```\n\n`k_def`ã®æ¬¡ã«æ¥ã‚‹ã®ã¯`fname`ã®ã‚ˆã†ã§ã™ã€‚`fname`ã‚’ã—ã‚‰ã¹ã‚Œã°ã€ãƒ¡ã‚½ãƒƒãƒ‰åã‚’è¡¨ã™ä½•ã‹ãŒã‚ã‹ã‚Šãã†ã§ã™ã€‚\n\n```parse.y\nprimary\t\t: literal\n\n/* ä¸­ç•¥ */\n\n\t\t| k_def fname\n\t\t    {\n\t\t\tlocal_push(0);\n\t\t\t$\u003cid\u003e$ = current_arg;\n\t\t\tcurrent_arg = 0;\n\t\t    }\n\t\t    {\n\t\t\t$\u003cnum\u003e$ = in_def;\n\t\t\tin_def = 1;\n\t\t    }\n\t\t  f_arglist\n\t\t  bodystmt\n\t\t  k_end\n\t\t    {\n\t\t    /*%%%*/\n\t\t\tNODE *body = remove_begin($6);\n\t\t\treduce_nodes(\u0026body);\n\t\t\t$$ = NEW_DEFN($2, $5, body, METHOD_VISI_PRIVATE);\n\t\t\tnd_set_line($$, $\u003cnum\u003e1);\n\t\t    /*%\n\t\t\t$$ = dispatch3(def, $2, $5, $6);\n\t\t    %*/\n\t\t\tlocal_pop();\n\t\t\tin_def = $\u003cnum\u003e4 \u0026 1;\n\t\t\tcurrent_arg = $\u003cid\u003e3;\n\t\t    }\n```\n\nãŠã£ã€`fname`ãŒãƒ¡ã‚½ãƒƒãƒ‰åã‚’è¡¨ã—ã¦ã‚‹ã£ã½ã„ã€‚Rubyã®å ´åˆã€å†å®šç¾©ã§ãã‚‹æ¼”ç®—å­ãŒã‚ã‚‹ã®ã§ãƒ¡ã‚½ãƒƒãƒ‰åã£ã½ã„`tIDENTIFIER`ã®ä»–ã«`op`ã‚„äºˆç´„èªãªã©ã‚‚å¼•æ•°ã«å–ã‚Œã‚‹ã‚ˆã†ã§ã™ã­ã€‚\n\nmethodãƒ¡ã‚½ãƒƒãƒ‰ã§ã¯å¼•æ•°ã«`:+`ãªã©æ¼”ç®—å­ã®ãƒ¡ã‚½ãƒƒãƒ‰åã‚„å¤§æ–‡å­—ã®ãƒ¡ã‚½ãƒƒãƒ‰å`:Integer`ã‚‚å–ã‚Œã‚‹ã®ã§`tIDENTIFIER`ã‚„`op`ã‚„`tCONSTANT`ã¯ã¤ã‹ãˆãã†ã§ã™ãŒäºˆç´„èªã®`reswords`ã¯å¿…è¦ãªã•ãã†ã§ã™ã­ã€‚\n\n```parse.y\nfname\t\t: tIDENTIFIER\n\t\t| tCONSTANT\n\t\t| tFID\n\t\t| op\n\t\t    {\n\t\t\tSET_LEX_STATE(EXPR_ENDFN);\n\t\t\t$$ = $1;\n\t\t    }\n\t\t| reswords\n\t\t    {\n\t\t\tSET_LEX_STATE(EXPR_ENDFN);\n\t\t    /*%%%*/\n\t\t\t$$ = $\u003cid\u003e1;\n\t\t    /*%\n\t\t\t$$ = $1;\n\t\t    %*/\n\t\t    }\n\t\t;\n\n/* ä¸­ç•¥ */\n\nreswords\t: keyword__LINE__ | keyword__FILE__ | keyword__ENCODING__\n\t\t| keyword_BEGIN | keyword_END\n\t\t| keyword_alias | keyword_and | keyword_begin\n\t\t| keyword_break | keyword_case | keyword_class | keyword_def\n\t\t| keyword_defined | keyword_do | keyword_else | keyword_elsif\n\t\t| keyword_end | keyword_ensure | keyword_false\n\t\t| keyword_for | keyword_in | keyword_module | keyword_next\n\t\t| keyword_nil | keyword_not | keyword_or | keyword_redo\n\t\t| keyword_rescue | keyword_retry | keyword_return | keyword_self\n\t\t| keyword_super | keyword_then | keyword_true | keyword_undef\n\t\t| keyword_when | keyword_yield | keyword_if | keyword_unless\n\t\t| keyword_while | keyword_until\n\t\t;\n```\n\n`tIDENTIFIER`ã§æ¢ã™ã¨ä»Šå›ã®ç›®çš„ã«åˆã£ã¦ãã†ãªå®šç¾©ãŒã§ã¦ãã¾ã—ãŸã€‚\n\n```parse.y\noperation2\t: tIDENTIFIER\n\t\t| tCONSTANT\n\t\t| tFID\n\t\t| op\n\t\t;\n```\n\n\n----\n\næ•æ‰: æ›¸ã„ã¦ã‚‹æ™‚ç‚¹ã§ã¯`reswords`ã„ã‚‰ãªã„ã¨æ€ã£ã¦ãŸã‘ã©ã“ã†ã„ã†ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚‚æ›¸ã‘ã‚‹ã‹ã‚‰ã„ã‚‹ã£ã½ã„\n\n```rb\ndef nil\n  puts 'hi'\nend\n\nself.send(:nil)\n```\n\n### ãƒ¡ã‚½ãƒƒãƒ‰ã‚ˆã³ã ã—\n\nãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—æ™‚ã®ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã‚„`.`ã‚„ãƒ¡ã‚½ãƒƒãƒ‰åã®è¡¨ã—æ–¹ã‚’ç¢ºèªã™ã‚‹ãŸã‚å®šç¾©ã‚’æ¢ã—ã¾ã™ã€‚ãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—ã¯`.`ãŒé–“ã«ã‚ã‚‹ã®ã§`.`ã§æ¢ã—ã¦ã¿ã¾ã™ã€‚\n\n```sh\n# git grep -n '\".\"' parse.y`ã§ã¯ã†ã¾ãgrepã§ããªã‹ã£ãŸ\n% git grep -n \"'\\.'\" parse.y\nparse.y:4976:dot_or_colon       : '.'\nparse.y:4988:call_op    : '.'\nparse.y:4991:                   $$ = '.';\nparse.y:4993:                   $$ = ripper_id2sym('.');\nparse.y:6064:      case '$': case '*': case '+': case '.':\nparse.y:6275:   BIT(';', idx) | BIT(',', idx) | BIT('.', idx) | BIT('=', idx) | \\\nparse.y:6606:   if (c == '.') {\nparse.y:7363:   else if (c == '.' || c == 'e' || c == 'E') {\nparse.y:7381:     case '.':\nparse.y:7395:       tokadd('.');\nparse.y:7722:      case '.':            /* $.: last read line number */\nparse.y:8051:         case '.': {\nparse.y:8053:           if (peek('.') == (c == '\u0026')) {\nparse.y:8286:   else if (c == '.') {\nparse.y:8386:      case '.':\nparse.y:8388:   if ((c = nextc()) == '.') {\nparse.y:8389:       if ((c = nextc()) == '.') {\nparse.y:8400:   return '.';\n```\n\n`call_op`ãŒæ€ªã—ã„ã®ã§ãã‚Œã§æ¤œç´¢ã™ã‚‹ã¨ã€ãã‚Œã£ã½ã„ã®ãŒã§ã¾ã—ãŸã€‚ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã¯`primary_value`ã¨æ›¸ãã€ãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—ã®`.`ã¯`call_op`ã¨å‘¼ã°ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚\n\n```parse.y\nmethod_call\t: fcall paren_args\n\n/* ä¸­ç•¥ */\n\n\t\t| primary_value call_op operation2\n\t\t    {\n\t\t    /*%%%*/\n\t\t\t$\u003cnum\u003e$ = ruby_sourceline;\n\t\t    /*% %*/\n\t\t    }\n\t\t  opt_paren_args\n\t\t    {\n\t\t    /*%%%*/\n\t\t\t$$ = NEW_QCALL($2, $1, $3, $5);\n\t\t\tnd_set_line($$, $\u003cnum\u003e4);\n\t\t    /*%\n\t\t\t$$ = dispatch3(call, $1, $2, $3);\n\t\t\t$$ = method_optarg($$, $5);\n\t\t    %*/\n\t\t    }\n\n```\n\n\n### `{` ã¨ `}`ã®è¡¨ç¾\n\ngrepã—ãŸã‚‰ã™ãã¿ã¤ã‹ã£ãŸã€‚\n\n```\n% git grep -n \"'{'\" parse.y\nparse.y:1068:             '{' top_compstmt '}'\nparse.y:1168:             '{' top_compstmt '}'\nparse.y:1280:           | keyword_END '{' compstmt '}'\nparse.y:3720:brace_block        : '{'\nparse.y:5771:    if (peek('{')) {  /* handle \\u{...} form */\nparse.y:6144:       if (c2 == '$' || c2 == '@' || c2 == '{') {\nparse.y:6312:      case '{':\nparse.y:7582:   else if (term == '{') term = '}';\nparse.y:8541:      case '{':\nparse.y:8554:       c = '{';          /* block (primary) */\n```\n\næ™®é€šã«`'{'`ã¨`'}'`ã‚’æ›¸ã‘ã°ã‚ˆã•ãã†ã§ã™ã­!\n\n```parse.y\ntop_stmt\t: stmt\n\t\t| keyword_BEGIN\n\t\t    {\n\t\t    /*%%%*/\n\t\t\t/* local_push(0); */\n\t\t    /*%\n\t\t    %*/\n\t\t    }\n\t\t  '{' top_compstmt '}'\n\t\t    {\n\t\t    /*%%%*/\n\t\t\truby_eval_tree_begin = block_append(ruby_eval_tree_begin,\n\t\t\t\t\t\t\t    $4);\n\t\t\t/* NEW_PREEXE($4)); */\n\t\t\t/* local_pop(); */\n\t\t\t$$ = NEW_BEGIN(0);\n\t\t    /*%\n\t\t\t$$ = dispatch1(BEGIN, $4);\n\t\t    %*/\n\t\t    }\n\t\t;\n\n/* ä¸­ç•¥ */\n\nstmt_or_begin\t: stmt\n                    {\n\t\t\t$$ = $1;\n\t\t    }\n                | keyword_BEGIN\n\t\t    {\n\t\t\tyyerror(\"BEGIN is permitted only at toplevel\");\n\t\t    /*%%%*/\n\t\t\t/* local_push(0); */\n\t\t    /*%\n\t\t    %*/\n\t\t    }\n\t\t  '{' top_compstmt '}'\n\t\t    {\n\t\t    /*%%%*/\n\t\t\truby_eval_tree_begin = block_append(ruby_eval_tree_begin,\n\t\t\t\t\t\t\t    $4);\n\t\t\t/* NEW_PREEXE($4)); */\n\t\t\t/* local_pop(); */\n\t\t\t$$ = NEW_BEGIN(0);\n\t\t    /*%\n\t\t\t$$ = dispatch1(BEGIN, $4);\n\t\t    %*/\n\t\t    }\n\n/* ä¸­ç•¥ */\n\nbrace_block\t: '{'\n\t\t    {\n\t\t    /*%%%*/\n\t\t\t$\u003cnum\u003e$ = ruby_sourceline;\n\t\t    /*% %*/\n\t\t    }\n\t\t  brace_body '}'\n\t\t    {\n\t\t\t$$ = $3;\n\t\t    /*%%%*/\n\t\t\tnd_set_line($$, $\u003cnum\u003e2);\n\t\t    /*% %*/\n\t\t    }\n\t\t| keyword_do\n\t\t    {\n\t\t    /*%%%*/\n\t\t\t$\u003cnum\u003e$ = ruby_sourceline;\n\t\t    /*% %*/\n\t\t    }\n\t\t  do_body keyword_end\n\t\t    {\n\t\t\t$$ = $3;\n\t\t    /*%%%*/\n\t\t\tnd_set_line($$, $\u003cnum\u003e2);\n\t\t    /*% %*/\n\t\t    }\n\t\t;\n```\n\n:memo: parse.yã‚’æ›¸ã\n----\n\nparse.yã‚’ã¿ã‚‹ã¨`primary_value`ã¨`call_op`ã¨`'{'`ã¨`operation2`ã¨`'}'`ã‚’çµ„ã¿åˆã‚ã›ã‚Œã°ãã‚Œã£ã½ã„syntaxãŒå®šç¾©ã§ããã†ãªã®ã§æ›¸ã„ã¦ã¿ã¾ã—ã‚‡ã†ã€‚\n\n\n### æ›¸ãå ´æ‰€\nã©ã“ã«æ›¸ãã‹æ‚©ã‚€ã‚“ã§ã™ãŒãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—ã‚„Î»ã½ã„å®šç¾©ã‚ã£ãŸã‚“ã§ãã®ã‚ãŸã‚Šã«è¶³ã—ã¾ã™\n\n```parse.y\nprimary\t\t: literal\n\n/* ä¸­ç•¥ */\n\n\t\t| method_call\n\t\t| method_call brace_block\n\t\t    {\n\t\t    /*%%%*/\n\t\t\tblock_dup_check($1-\u003end_args, $2);\n\t\t\t$2-\u003end_iter = $1;\n\t\t\t$$ = $2;\n\t\t    /*%\n\t\t\t$$ = method_add_block($1, $2);\n\t\t    %*/\n\t\t    }\n\n/* ã“ã®ã¸ã‚“? */\n\n\t\t| tLAMBDA lambda\n\t\t    {\n\t\t\t$$ = $2;\n\t\t    }\n```\n\nä»–ã®éƒ¨åˆ†ã®çœŸä¼¼ã‚’ã—ã¦ä»˜ã‘è¶³ã—ã¾ã™ã€‚\n\n```parse.y\n\t\t| primary_value call_op '{' operation2 '}'\n\t\t\t{\n\t\t\t\tã“ã“ã«å®Ÿè£…ã‚’æ›¸ã\n\t\t\t}\n```\n\n### ãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—ã®å®Ÿè£…ã‚’èª­ã‚€\n\n`object.{method}`ã¨æ›¸ã„ãŸã¨ãã€Objectã«å¯¾ã—ã¦methodãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã—ãŸã„ã®ã§å‚è€ƒã®ãŸã‚ã«method_callã®å®Ÿè£…ã‚’èª­ã¿ã¾ã™ã€‚\n\n```parse.y\nmethod_call\t: fcall paren_args\n\t\t    {\n/* ç•¥ */\n\t\t    }\n\t\t| primary_value call_op operation2\n\t\t    {\n\t\t    /*%%%*/\n\t\t\t$\u003cnum\u003e$ = ruby_sourceline;\n\t\t    /*% %*/\n\t\t    }\n\t\t  opt_paren_args\n\t\t    {\n\t\t    /*%%%*/\n                        /* \n\t\t\t$$ = NEW_QCALL($2, $1, $3, $5);\n\t\t\tnd_set_line($$, $\u003cnum\u003e4);\n\t\t    /*%\n/* ã“ã“ã‹ã‚‰ã—ãŸã¯Ripperå‘ã‘å®šç¾©ã®ã‚ˆã† */\n\t\t\t$$ = dispatch3(call, $1, $2, $3);\n\t\t\t$$ = method_optarg($$, $5);\n\t\t    %*/\n\t\t    }\n```\n\nå®šç¾©ã—ã¦ã‚‹éƒ¨åˆ†ã®æœ€åˆã®ãƒˆãƒ¼ã‚¯ãƒ³ã‹ã‚‰é †ç•ªã‚ˆã`$æ•°å­—`ã¨å…¥ã£ã¦ã„ãã‚ˆã†ã§ã™ã€‚\nmethod_callã®å®šç¾©ã®å ´åˆã¯`primary_value`ãŒ`$1`ã«ã€`call_op`ãŒ`$2`ã«ã€`operation2`ãŒ`$3`ã«ã€`ruby_source_line`ãŒ`$4`ã«ã€`opt_paren_args`ãŒ`$5`ã§ã—ã‚‡ã†ã‹ã€‚\nå®Ÿè£…éƒ¨åˆ†ã§ã¯`NEW_QCALL(call_op, primary_value, operation2, opt_paren_args)`ã®çµæœã‚’`$$`ã«ä»£å…¥ã—ã¦ã„ã¾ã™ã­ã€‚\n\n`NEW_QCALL`ã®å®šç¾©ã‚’èª­ã‚€ã¨ã€`NEW_QCALL`ã§ã¯ã¼ã£ã¡æ¼”ç®—å­(`\u0026.`)ã§ãƒ¡ã‚½ãƒƒãƒ‰ãŒå‘¼ã°ã‚ŒãŸã¨ãã«å¯¾å¿œã™ã‚‹ãŸã‚ã®å‡¦ç†ãŒå…¥ã‚Šã€æœ€çµ‚çš„ã«`NODE_CALL`ãŒå‘¼ã°ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚\n\n```c:parse.y\n#define CALL_Q_P(q) ((q) == tANDDOT)\n#define NODE_CALL_Q(q) (CALL_Q_P(q) ? NODE_QCALL : NODE_CALL)\n#define NEW_QCALL(q,r,m,a) NEW_NODE(NODE_CALL_Q(q),r,m,a)\n```\n\n`NODE_CALL`ã®ä½¿ã„æ–¹ã‚’èª¿ã¹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ä»¥ä¸‹ã®ã‚ˆã†ãªé–¢æ•°ãŒã‚ã‚Šã¾ã—ãŸã€‚\n\n```c:parse.y\nstatic NODE *\ncall_bin_op_gen(struct parser_params *parser, NODE *recv, ID id, NODE *arg1)\n{\n    value_expr(recv);\n    value_expr(arg1);\n    return NEW_CALL(recv, id, NEW_LIST(arg1));\n}\n```\n\nmethodãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã¶å ´åˆã€`NODE_CALL`ã«ç¬¬ä¸€å¼•æ•°ã«ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã€ç¬¬äºŒå¼•æ•°ã®idã«methodãƒ¡ã‚½ãƒƒãƒ‰ã®IDã€ç¬¬ä¸‰å¼•æ•°ã«`NEW_LIST(methodãƒ¡ã‚½ãƒƒãƒ‰ã«æ¸¡ã™å¼•æ•°ã®NODE)`ã‚’æ¸¡ã™ã¨ã‚ˆã•ãã†ã§ã™ã€‚\n\nãã‚Œã§ã¯å®Ÿè£…ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚\n\n### æ›¸ã\n\nã¾ãšã¯NEW_QCALLã‚’å‘¼ã³å‡ºã—ã¾ã—ã‚‡ã†ã€‚ç¬¬1å¼•æ•°ã«ã¯call_opã‚’æ¸¡ã—ã€ç¬¬2å¼•æ•°ã«receiverã‚’æ¸¡ã—ã¾ã™ã€‚\n\n```parse.y\n\t\t| primary_value call_op '{' operation2 '}'\n\t\t\t{\n\t\t\t\t$$ = NEW_QCALL($2, $1, methodãƒ¡ã‚½ãƒƒãƒ‰ã®ID, NEW_LIST(methodãƒ¡ã‚½ãƒƒãƒ‰ã®å¼•æ•°ã®NODE);\n\t\t\t}\n```\n\nmethodãƒ¡ã‚½ãƒƒãƒ‰ã‚’ã®IDã‚’å–ã‚‹æ–¹æ³•ã‚’èª¿ã¹ã¾ã™ã€‚ã€ŒIDã‚’è¿”ã™ã€ã§æ¤œç´¢ã™ã‚‹ã¨ä»¥ä¸‹ã®æ–‡æ›¸ãŒå¼•ã£ã‹ã‹ã‚Šã¾ã—ãŸã€‚`rb_intern`ã‚’ä½¿ã†ã¨ã‚ˆã•ãã†ã§ã™ :smiley: \n\n```doc/extension.ja.rdoc\nID rb_intern(const char *name) ::\n\n  æ–‡å­—åˆ—ã«å¯¾å¿œã™ã‚‹IDã‚’è¿”ã™ï¼\n```\n\n```parse.y\n\t\t| primary_value call_op '{' operation2 '}'\n\t\t\t{\n\t\t\t\t$$ = NEW_QCALL($2, $1, rb_intern(\"method\"), NEW_LIST(methodãƒ¡ã‚½ãƒƒãƒ‰ã®å¼•æ•°ã®NODE);\n\t\t\t}\n```\n\næ¬¡ã¯operation2ã‹ã‚‰methodãƒ¡ã‚½ãƒƒãƒ‰ã®å¼•æ•°ã®NODEã‚’ä½œã‚Šã¾ã™ã€‚methodãƒ¡ã‚½ãƒƒãƒ‰ã®å¼•æ•°ã¯ã‚·ãƒ³ãƒœãƒ«ãªã®ã§ã‚·ãƒ³ãƒœãƒ«ã®å®šç¾©ã‚’èª­ã‚€ã¨`NEW_LIT(ID2SYM(ã€œ))`ã§ã‚·ãƒ³ãƒœãƒ«ãŒå‡ºæ¥ã‚‹ã‚ˆã†ã§ã™ã€‚\n\n```parse.y\nliteral\t\t: numeric\n\t\t| symbol\n\t\t    {\n\t\t    /*%%%*/\n\t\t\t$$ = NEW_LIT(ID2SYM($1));\n\t\t    /*%\n\t\t\t$$ = dispatch1(symbol_literal, $1);\n\t\t    %*/\n\t\t    }\n\t\t| dsym\n\t\t;\n```\n\nå¿µã®ãŸã‚`NEW_LIT`ãŒNODEã‚’è¿”ã™ã‹å®šç¾©ã‚’ç¢ºèª\n\n```c:node.h\n#define NEW_LIT(l) NEW_NODE(NODE_LIT,l,0,0)\n```\n\nã‚ã¨ã¯`.{}`æ¼”ç®—å­ã®å®šç¾©ã®operation2ã€`$4`ã‚’å¼•æ•°ã‚ãŸã—ã¦ã‚·ãƒ³ãƒœãƒ«åŒ–ã™ã‚‹ã¨ã‚ˆã•ãã†ã§ã™ã­!\n\n```parse.y\n\t\t| primary_value call_op '{' operation2 '}'\n\t\t\t{\n\t\t\t\t$$ = NEW_QCALL($2, $1, rb_intern(\"method\"), NEW_LIST(NEW_LIT(ID2SYM($4))));\n\t\t\t}\n```\n\nã•ã£ããmakeã—ã¦ã¿ã¾ã™ã€‚parse.yã‹ã‚‰parse.cãŒç”Ÿæˆã•ã‚Œã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã•ã‚Œã¾ã™ã€‚\nRipperã®å®šç¾©ã‚’çœã„ãŸã®ã§ripperã®ãƒ“ãƒ«ãƒ‰ã¯ã‚³ã‚±ã¾ã—ãŸãŒã€parse.yã¯ã†ã¾ãã‚³ãƒ³ãƒ‘ã‚¤ãƒ«å‡ºæ¥ãŸã‚ˆã†ã§ã™!\n\n```\n% make\n(ç•¥)\ngenerating parse.c\ncompiling parse.c\nlinking miniruby\n(ç•¥)\ncompiling ripper.c\nripper.y: In function 'ripper_yyparse':\nripper.y:2798:17: warning: assignment makes integer from pointer without a cast [-Wint-conversion]\n     $$ = NEW_QCALL($2, $1, rb_intern(\"method\"), NEW_LIST(NEW_LIT(ID2SYM($4))));\n                 ^\nlinking shared-object ripper.bundle\nchecking ../.././parse.y and ../.././ext/ripper/eventids2.c\n*** Following extensions failed to configure:\n../.././ext/openssl/extconf.rb:0: Failed to configure openssl. It will not be installed.\n*** Fix the problems, then remove these directories and try again if you want.\n(ç•¥)\n```\n\næ—©é€Ÿç¢ºèªç”¨ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å‹•ã‹ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚\n\n```\n% cat method_method_syntax.rb\nãŒ°å¤ªéƒ = \"\"\nuh = ãŒ°å¤ªéƒ.{concat}\n\nğŸ = \"apple\"\nâœ’ï¸ = \"pen\"\n\n[ğŸ, âœ’ï¸].each(\u0026uh)\n\nputs ãŒ°å¤ªéƒ.to_s\n\n% ./ruby --disable=gems method_method_syntax.rb\nmethod_method_syntax.rb:2: syntax error, unexpected {, expecting '('\nuh = ãŒ°å¤ªéƒ.{concat}\n                ^\n```\n\nã‚ã‚Œã€ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¾ã—ãŸã€‚`unexpected {`ã¨è¨€ã‚ã‚Œã¦é–‰ã¾ã£ã¦ã„ã¾ã™ã€‚`{`ãŒã†ã¾ãèªè­˜ã•ã‚Œã¦ãªã•ãã†ã§ã™ã€‚\nä»–ã®`{`ã‚’ä½¿ã†syntaxã‚’ç¢ºèªã™ã‚‹ã¨Hashã®è¨˜æ³•ã®å®šç¾©ã§ã¯`tLBRACE`ã‚’ä½¿ã£ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚\n\n```parse.y\n\t\t| tLBRACE assoc_list '}'\n\t\t    {\n\t\t    /*%%%*/\n\t\t\t$$ = new_hash($2);\n\t\t    /*%\n\t\t\t$$ = dispatch1(hash, escape_Qundef($2));\n\t\t    %*/\n\t\t    }\n```\n\nHashã¨åŒã˜ã‚ˆã†ã«tLBRACEã§ç½®ãæ›ãˆã¦ã¿ã¾ã™ã€‚\n\n```parse.y\n\t\t| primary_value call_op tLBRACE operation2 '}'\n\t\t\t{\n\t\t\t\t$$ = NEW_QCALL($2, $1, rb_intern(\"method\"), NEW_LIST(NEW_LIT(ID2SYM($4))));\n\t\t\t}\n```\n\nã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã¦å†å®Ÿè¡Œ\n\n```\n% make\n% % ./ruby --disable=gems method_method_syntax.rb\napplepen\n```\n\nå‹•ãã¾ã—ãŸ :green_apple: :pen_fountain: \n\nhttps://github.com/hanachin/ruby/tree/method_method_syntax\n\n:sparkles::gem::sparkles: ã¾ã¨ã‚\n----\n\nparse.yã‚’èª­ã¿æ›¸ãã—ã¦`.{}`æ¼”ç®—å­ã‚’è¿½åŠ ã—ã¦ã¿ã¾ã—ãŸ:sparkles:\nparse.yã„ã˜ã‚‹ã¨æ™®æ®µå¤‰æ›´ã§ããªã„syntaxã‚’å¤‰æ›´å‡ºæ¥ã‚‹ã®ã§æ¥½ã—ã„ã§ã™ã­ :leopard: \n\n:hibiscus: Okinawa.rbã«ã¤ã„ã¦ :pig2: \n----\n\n[Okinawa.rbã®Advent Calendar 2016](http://qiita.com/advent-calendar/2016/okinawarb) ã¯è¨˜äº‹ã‚’èª­ã‚€äººãƒ»æ›¸ãäººã‚’å‹Ÿé›†ã—ã¦ã„ã¾ã™ã€‚\n\nOkinawa.rbã¯å‚åŠ è€…ã‚‚å‹Ÿé›†ã—ã¦ã„ã¾ã™ :airplane::pineapple: \né–‹å‚¬æƒ…å ±ã¯Doorkeeperã«è¼‰ã£ã¦ã„ã¾ã™ã€‚æ¯æœˆã©ã“ã‹ã®é€±ã®æ°´æ›œæ—¥ã®å¤œã«é–‹å‚¬ã—ã¦ã„ã¾ã™ :watermelon:  :calendar_spiral:\nhttps://okinawarb.doorkeeper.jp\n\næµã‚Œçš„ã«ã¯é›‘è«‡ã€åˆå¯¾é¢ã®äººãŒã„ã‚‹ã¨ãã¯è‡ªå·±ç´¹ä»‹ã€ã‚‚ãã‚‚ãã€è§£æ•£ã§ã™ã€‚(åƒ•ã¯ã‚‚ãã‚‚ãã¨Rubyã®ã‚½ãƒ¼ã‚¹ã‚’èª­ã‚“ã ã‚Šã—ã¦ã„ã¾ã™)\n\næ¬¡å›ã¯2016-12-14ï¼ˆæ°´ï¼‰19:00 - 22:00ã§ã™ã€‚\n\nå‚è€ƒ\n----\n\n- [Rubyã®ã—ãã¿ã€€Ruby Under a Microscope](http://amzn.to/2huecOL)\n- - [ã€Rubyã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰å®Œå…¨è§£èª¬ã€ã‚µãƒãƒ¼ãƒˆãƒšãƒ¼ã‚¸](http://i.loveruby.net/ja/rhg/)\n- [Rubyist Magazine - parse.y ã®æ­©ãæ–¹ - ãƒ¯ã‚·ã® Ruby ã¯ 4 å¼ã¾ã§ã‚ã‚‹ã -](http://magazine.rubyist.net/?0031-parsey)\n","coediting":false,"comments_count":0,"created_at":"2016-12-10T16:14:32+09:00","group":null,"id":"78c1594362a88269e73d","likes_count":4,"private":false,"reactions_count":0,"tags":[{"name":"Ruby","versions":[]}],"title":"Rubyã«é›‘ã«æ¼”ç®—å­ã‚’è¶³ã™","updated_at":"2016-12-10T16:29:04+09:00","url":"https://qiita.com/hanachin_/items/78c1594362a88269e73d","user":{"description":"æ—¢å©šãƒã‚¤","facebook_id":"seiei.higa","followees_count":166,"followers_count":120,"github_login_name":"hanachin","id":"hanachin_","items_count":55,"linkedin_id":"","location":"Naha, Okinawa, Japan","name":"Seiei Miyagi","organization":"YassLab","permanent_id":2074,"profile_image_url":"https://qiita-image-store.s3.amazonaws.com/0/2074/profile-images/1511092027","twitter_screen_name":"hanachin_","website_url":""},"page_views_count":null}]