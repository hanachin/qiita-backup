[{"rendered_body":"\u003cp\u003eOkinawa.rb Advent Calendar 2017 1日目です。\u003cbr\u003e\n\u003ca href=\"https://qiita.com/advent-calendar/2017/okinawarb\" class=\"autolink\"\u003ehttps://qiita.com/advent-calendar/2017/okinawarb\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e沖縄県の各市町村の国民健康保険料の金額をRubyで計算します。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"国民健康保険税\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%9B%BD%E6%B0%91%E5%81%A5%E5%BA%B7%E4%BF%9D%E9%99%BA%E7%A8%8E\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e国民健康保険税\u003c/h2\u003e\n\n\u003cp\u003e日本は国民皆保険制度なので国民全員がいずれかの公的医療保険制度に加入しています。\u003csup id=\"fnref1\"\u003e\u003ca href=\"#fn1\" rel=\"footnote\" title=\"http://www.mhlw.go.jp/houdou_kouhou/kouhou_shuppan/pdf/2015-jimu_13.pdf\"\u003e1\u003c/a\u003e\u003c/sup\u003e\u003c/p\u003e\n\n\u003cp\u003e市町村国保とは、他の医療保険に加入していない住民を被保険者とする国民皆保険制度の基礎です。\u003csup id=\"fnref2\"\u003e\u003ca href=\"#fn2\" rel=\"footnote\" title=\"http://www.mhlw.go.jp/stf/seisakunitsuite/bunya/kenkou_iryou/iryouhoken/iryouhoken01/index.html\"\u003e2\u003c/a\u003e\u003c/sup\u003e\u003c/p\u003e\n\n\u003cp\u003e国民健康保険料は国民健康保険税という税金として納める事が多いです。詳しくはWikipediaの国民健康保険税の記事\u003csup id=\"fnref3\"\u003e\u003ca href=\"#fn3\" rel=\"footnote\" title=\"https://ja.wikipedia.org/wiki/%E5%9B%BD%E6%B0%91%E5%81%A5%E5%BA%B7%E4%BF%9D%E9%99%BA%E7%A8%8E\"\u003e3\u003c/a\u003e\u003c/sup\u003eや、freeeさんの国民健康保険料の計算方法をわかりやすく解説|知っておきたい税の基本\u003csup id=\"fnref4\"\u003e\u003ca href=\"#fn4\" rel=\"footnote\" title=\"https://keiei.freee.co.jp/2015/06/26/kokuho-keisan/\"\u003e4\u003c/a\u003e\u003c/sup\u003eを読んで下さい。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"沖縄県の国民健康保険料\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%B2%96%E7%B8%84%E7%9C%8C%E3%81%AE%E5%9B%BD%E6%B0%91%E5%81%A5%E5%BA%B7%E4%BF%9D%E9%99%BA%E6%96%99\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e沖縄県の国民健康保険料\u003c/h2\u003e\n\n\u003cp\u003e市町村が運営しているので自治体によって金額が違います。赤字なので保険料が高いです \u003cimg alt=\":up:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f199.png\" title=\":up:\" width=\"20\"\u003e \u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e国保、沖縄県内10市町村で保険料上昇予測　県は徴収料統一検討\u003cbr\u003e\n\u003ca href=\"http://www.okinawatimes.co.jp/articles/-/133399\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://www.okinawatimes.co.jp/articles/-/133399\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e沖縄戦の影響で全国と比べ前期高齢者（６５～７４歳）の割合が低く、前期高齢者の割合を基に算出される交付金が低いことが、国保財政の悪化につながっている。\u003cbr\u003e\n\u003ca href=\"https://ryukyushimpo.jp/news/entry-435651.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://ryukyushimpo.jp/news/entry-435651.html\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"計算方法\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A8%88%E7%AE%97%E6%96%B9%E6%B3%95\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e計算方法\u003c/h2\u003e\n\n\u003cp\u003e那覇市を例にします。以下の3つの区分の合算です。\u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e保険税の年税額は、医療分と支援分と介護分（40歳～64歳の方）の合算額です。医療分と支援分と介護分はそれぞれ別々に計算されます。\u003cbr\u003e\n\u003ca href=\"http://www.city.naha.okinawa.jp/kakuka/kokuhotyoujyu/hokenzeinoufu.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://www.city.naha.okinawa.jp/kakuka/kokuhotyoujyu/hokenzeinoufu.html\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e65歳からは介護分は掛かりませんが、介護保険料が別途掛かります(また、75歳からは国保ではなく後期高齢者医療制度に加入することになります)。\u003c/p\u003e\n\n\u003cp\u003e那覇市の場合はそれぞれの分について以下の3つを計算していきます。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e所得割: 所得×税率\u003c/li\u003e\n\u003cli\u003e均等割: 加入者数×◯円\u003c/li\u003e\n\u003cli\u003e平等割: 世帯あたり◯円\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e自治体によっては所得割、均等割、平等割の他に資産割があったりします。その場合固定資産税×税率を計算します。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"実装\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A3%85\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実装\u003c/h2\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"計算機の初期化\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A8%88%E7%AE%97%E6%A9%9F%E3%81%AE%E5%88%9D%E6%9C%9F%E5%8C%96\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e計算機の初期化\u003c/h3\u003e\n\n\u003cp\u003e国保は世帯ごとに請求されるので計算機の引数で国保に加入する世帯の構成員を取ります。詳しくは擬制世帯でググってください。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"rb\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eJapaneseNationalHealthInsuranceCalculator\u003c/span\u003e\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003einitialize\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ehousehold\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"vi\"\u003e@household\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ehousehold\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e初期化する際に引数で渡す世帯の構成員を定義してみましょう。\u003cbr\u003e\n国保税を計算するためには以下の情報が取れる必要があります。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e介護分の計算: 年齢\u003c/li\u003e\n\u003cli\u003e所得割の計算: 所得\u003c/li\u003e\n\u003cli\u003e資産割の計算: 固定資産税額\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eそれに加え、介護分が必要な年齢か調べるメソッドも追加しましょう\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"rb\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eHouseholdMember\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"no\"\u003eStruct\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ss\"\u003e:age\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:income\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:fixed_assets_tax\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003elong_term_care_insurance_premium?\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e40\u003c/span\u003e\u003cspan class=\"o\"\u003e...\u003c/span\u003e\u003cspan class=\"mi\"\u003e65\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003ecover?\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eage\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこれで以下のように世帯を渡して国民健康保険料の計算機を初期化できるようになりました。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"rb\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"n\"\u003ehousehold\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\n  \u003cspan class=\"no\"\u003eHouseholdMember\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e27\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e2472120\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n  \u003cspan class=\"no\"\u003eHouseholdMember\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e29\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n  \u003cspan class=\"no\"\u003eHouseholdMember\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003cspan class=\"n\"\u003ecalculator\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"no\"\u003eJapaneseNationalHealthInsuranceCalculator\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ehousehold\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"国民健康保険料の計算\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%9B%BD%E6%B0%91%E5%81%A5%E5%BA%B7%E4%BF%9D%E9%99%BA%E6%96%99%E3%81%AE%E8%A8%88%E7%AE%97\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e国民健康保険料の計算\u003c/h3\u003e\n\n\u003cp\u003e国民健康保険料の計算について、以下3つの金額の合計なので定義は簡単です。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e医療分\u003c/li\u003e\n\u003cli\u003e支援分\u003c/li\u003e\n\u003cli\u003e介護分\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"rb\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eJapaneseNationalHealthInsuranceCalculator\u003c/span\u003e\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003ecalculate\u003c/span\u003e\n    \u003cspan class=\"n\"\u003emedical_insurance_premium\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003emedical_care_assistance\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003elong_term_care_insurance_premium\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e問題は自治体によって、所得割・資産割の税率や均等割・平等割の金額が変わること、資産割がある/ないが変わることです。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e所得割: 所得×税率\u003c/li\u003e\n\u003cli\u003e均等割: 加入者数×◯円\u003c/li\u003e\n\u003cli\u003e平等割: 世帯あたり◯円\u003c/li\u003e\n\u003cli\u003e資産割: 固定資産税×税率\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"部分ごとの計算機をつくる\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%83%A8%E5%88%86%E3%81%94%E3%81%A8%E3%81%AE%E8%A8%88%E7%AE%97%E6%A9%9F%E3%82%92%E3%81%A4%E3%81%8F%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e部分ごとの計算機をつくる\u003c/h3\u003e\n\n\u003cp\u003e以下の4種類の計算機を作りましょう。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e所得割\u003c/li\u003e\n\u003cli\u003e均等割\u003c/li\u003e\n\u003cli\u003e平等割\u003c/li\u003e\n\u003cli\u003e資産割\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eそれぞれの計算機に以下の3つを計算するAPIを実装します。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e医療分\u003c/li\u003e\n\u003cli\u003e支援分\u003c/li\u003e\n\u003cli\u003e介護分\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e例えば所得割の場合、以下のように所得割の税率を引数で受け取るようにすると、自治体ごとに個別の計算機を作る必要がなくなるので便利でしょう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"rb\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eIncomeLevyCalculator\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"no\"\u003eStruct\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ss\"\u003e:household_member\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:medical_insurance_premium_ratio\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:medical_care_assistance_ratio\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:long_term_care_insurance_premium_ratio\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003emedical_insurance_premium\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eincome\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003emedical_insurance_premium_ratio\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003emedical_care_assistance\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eincome\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003emedical_care_assistance_ratio\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003elong_term_care_insurance_premium\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003ehousehold_member\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003elong_term_care_insurance_premium?\u003c/span\u003e\n      \u003cspan class=\"n\"\u003eincome\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003elong_term_care_insurance_ratio\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n      \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"kp\"\u003eprivate\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eincome\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ehousehold_member\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eincome\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003ebasic_deduction\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"nf\"\u003emax\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003ebasic_deduction\u003c/span\u003e\n    \u003cspan class=\"mi\"\u003e330_000\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e同じような感じで他の計算機も作ります。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"rb\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"c1\"\u003e# 均等割\u003c/span\u003e\n\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003ePerCapitaBasisLevyCalculator\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"no\"\u003eStruct\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ss\"\u003e:medical_insurance_premium\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:medical_care_assistance\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:long_term_care_insurance_premium\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e# 平等割\u003c/span\u003e\n\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eFlatLevyCalculator\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"no\"\u003eStruct\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ss\"\u003e:medical_insurance_premium\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:medical_care_assistance\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:long_term_care_insurance_premium\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e# 資産割\u003c/span\u003e\n\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003ePropertyLevyCalculator\u003c/span\u003e\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003einitialize\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003efixed_assets_tax\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003emedical_insurance_premium_ratio\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003emedical_care_assistance_ratio\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003elong_term_care_insurance_premium_ratio\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"vi\"\u003e@fixed_assets_tax\u003c/span\u003e                       \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003efixed_assets_tax\u003c/span\u003e\n    \u003cspan class=\"vi\"\u003e@medical_insurance_premium_ratio\u003c/span\u003e        \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emedical_insurance_premium_ratio\u003c/span\u003e\n    \u003cspan class=\"vi\"\u003e@medical_care_assistance_ratio\u003c/span\u003e          \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emedical_care_assistance_ratio\u003c/span\u003e\n    \u003cspan class=\"vi\"\u003e@long_term_care_insurance_premium_ratio\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003elong_term_care_insurance_premium_ratio\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003emedical_insurance_premium\u003c/span\u003e\n    \u003cspan class=\"vi\"\u003e@medical_insurance_premium_ratio\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"vi\"\u003e@fixed_assets_tax\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003emedical_care_assistance\u003c/span\u003e\n    \u003cspan class=\"vi\"\u003e@medical_care_assistance_ratio\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"vi\"\u003e@fixed_assets_tax\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003elong_term_care_insurance_premium\u003c/span\u003e\n    \u003cspan class=\"vi\"\u003e@long_term_care_insurance_ratio\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"vi\"\u003e@fixed_assets_tax\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"計算機を組み合わせる\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A8%88%E7%AE%97%E6%A9%9F%E3%82%92%E7%B5%84%E3%81%BF%E5%90%88%E3%82%8F%E3%81%9B%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e計算機を組み合わせる\u003c/h3\u003e\n\n\u003cp\u003eそれぞれの市町村に必要な計算機を作ります。\u003c/p\u003e\n\n\u003cp\u003e例えば那覇市の場合\u003c/p\u003e\n\n\u003cp\u003e所得割\u003c/p\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e医療分\u003c/th\u003e\n\u003cth\u003e支援分\u003c/th\u003e\n\u003cth\u003e介護分\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e9.70%\u003c/td\u003e\n\u003ctd\u003e1.59%\u003c/td\u003e\n\u003ctd\u003e1.56%\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cp\u003e均等割\u003c/p\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e医療分\u003c/th\u003e\n\u003cth\u003e支援分\u003c/th\u003e\n\u003cth\u003e介護分\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e18,200\u003c/td\u003e\n\u003ctd\u003e3,300\u003c/td\u003e\n\u003ctd\u003e7,700\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cp\u003e平等割\u003c/p\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e医療分\u003c/th\u003e\n\u003cth\u003e支援分\u003c/th\u003e\n\u003cth\u003e介護分\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e25,400\u003c/td\u003e\n\u003ctd\u003e5,300\u003c/td\u003e\n\u003ctd\u003e4,600\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cp\u003eなので以下のような組み合わせです。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"rb\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"n\"\u003ecalculators\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\n  \u003cspan class=\"n\"\u003ehousehold\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003emap\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"o\"\u003e|\u003c/span\u003e\u003cspan class=\"n\"\u003ehousehold_member\u003c/span\u003e\u003cspan class=\"o\"\u003e|\u003c/span\u003e \u003cspan class=\"no\"\u003eIncomeLevyCalculator\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ehousehold_member\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e970\u003c/span\u003e\u003cspan class=\"o\"\u003e/\u003c/span\u003e\u003cspan class=\"mi\"\u003e10000\u003c/span\u003e\u003cspan class=\"n\"\u003er\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e159\u003c/span\u003e\u003cspan class=\"o\"\u003e/\u003c/span\u003e\u003cspan class=\"mi\"\u003e10000\u003c/span\u003e\u003cspan class=\"n\"\u003er\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e156\u003c/span\u003e\u003cspan class=\"o\"\u003e/\u003c/span\u003e\u003cspan class=\"mi\"\u003e10000\u003c/span\u003e\u003cspan class=\"n\"\u003er\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n  \u003cspan class=\"no\"\u003ePerCapitaBasisLevyCalculator\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ehousehold\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e18_200\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e3_300\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e7_700\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n  \u003cspan class=\"no\"\u003eFlatLevyCalculator\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ehousehold\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e25_400\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e5_300\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e4_600\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"nf\"\u003eflatten\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e国保計算機にこれらの子計算機を入れられるようにします。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"rb\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eJapaneseNationalHealthInsuranceCalculator\u003c/span\u003e\n  \u003cspan class=\"nb\"\u003eattr_accessor\u003c/span\u003e \u003cspan class=\"ss\"\u003e:calculators\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003ecalculator\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ecalculators\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ecalculators\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e子計算機を使って計算するようメソッドを定義します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"rb\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eJapaneseNationalHealthInsuranceCalculator\u003c/span\u003e\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003emedical_insurance_premium\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ecalculators\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003esum\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"ss\"\u003e:medical_insurance_premium\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003emedical_care_assistance\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ecalculators\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003esum\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"ss\"\u003e:medical_care_assistance\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003elong_term_care_insurance_premium\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ecalculators\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003esum\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"ss\"\u003e:long_term_care_insurance_premium\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e結果\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"rb\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"nb\"\u003eputs\u003c/span\u003e \u003cspan class=\"n\"\u003ecalculator\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ecalculate\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eto_i\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e# 337045\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e無事国民健康保険料が計算できました!\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"沖縄県の各市町村で計算してみる\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%B2%96%E7%B8%84%E7%9C%8C%E3%81%AE%E5%90%84%E5%B8%82%E7%94%BA%E6%9D%91%E3%81%A7%E8%A8%88%E7%AE%97%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e沖縄県の各市町村で計算してみる\u003c/h2\u003e\n\n\u003cp\u003e資産のことを気にしなければさっきの要領で子計算機を作る処理を使いまわせます。\u003c/p\u003e\n\n\u003cp\u003eググったりして以下のようなTSVのデータを用意します。自治体によってはウェブに保険料が載っていないのでとりあえず市だけ調べました。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"rb\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"n\"\u003etsv\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e\u003cspan class=\"no\"\u003eTSV\u003c/span\u003e\u003cspan class=\"sh\"\u003e\n那覇市   9.70%   1.59%   1.56%   18200   3300    7700    25400   5300    4600                http://www.city.naha.okinawa.jp/kakuka/kokuhotyoujyu/hokenzeinoufu.html\n浦添市   8.20%   2.40%   2.40%   19000   7500    9500    17000   6000    6000                http://www.city.urasoe.lg.jp/docs/2014110102709/\n南城市   6.70%   2.60%   1.90%   16700   7000    5900    18200   7000    4300                http://www.city.nanjo.okinawa.jp/life/insurance/kokuho.html\n沖縄市   9.12%   2.27%   1.86%   19712   5312    5686    20919   5637    3927                https://www.city.okinawa.okinawa.jp/kurashi/365/2286\n豊見城市    8.44%   2.61%   2.10%   17200   6200    6600    23200   5400    3700                http://www.city.tomigusuku.okinawa.jp/userfiles/files/health/2016bookall.pdf\n宜野湾市    6.63%   2.75%   1.62%   14300   5200    3900    19500   7100    5100                http://www.city.ginowan.okinawa.jp/life/health/02/37447.html\n糸満市   9.00%   1.50%   2.20%   16000   3700    6900    20000   5000    4700    30.00%  6.50%   5.10%   http://www.city.itoman.lg.jp/docs/2013020102935/\nうるま市    7.70%   2.50%   2.10%   14000   6500    7200    22000   6000    6000                http://www.city.uruma.lg.jp/kurashi/122/3149/492\n宮古島市    8.35%   2.10%   2%  17500   4300    5000    15500   4000    3000    30% 7%  5.8 http://www.city.miyakojima.lg.jp/kurashi/kokumin/kenkouhoken/2017-0616-1306-81.html\n石垣市   8.35%   2.20%   2.20%   18300   4300    6500    16600   5500    4000    19% 5%  4.20%   http://www.city.ishigaki.okinawa.jp/home/shiminhokenbu/kenkouhoken/index.htm#p2\n名護市   6.30%   2.70%   1.20%   14500   5900    4300    12500   5100    3600    20.00%  9.00%   4.00%   http://www.city.nago.okinawa.jp/4/3835.html\n\u003c/span\u003e\u003cspan class=\"no\"\u003eTSV\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eおもむろにこねくり回す\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"rb\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"nb\"\u003eputs\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"自治体 | 国保料\"\u003c/span\u003e\n\u003cspan class=\"nb\"\u003eputs\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"--- | ---\"\u003c/span\u003e\n\u003cspan class=\"n\"\u003etsv\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003elines\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003emap\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"o\"\u003e|\u003c/span\u003e\u003cspan class=\"n\"\u003el\u003c/span\u003e\u003cspan class=\"o\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003el\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003echomp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003esplit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"\u003c/span\u003e\u003cspan class=\"se\"\u003e\\t\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e}.\u003c/span\u003e\u003cspan class=\"nf\"\u003eeach\u003c/span\u003e \u003cspan class=\"k\"\u003edo\u003c/span\u003e \u003cspan class=\"o\"\u003e|\u003c/span\u003e\u003cspan class=\"n\"\u003erow\u003c/span\u003e\u003cspan class=\"o\"\u003e|\u003c/span\u003e\n  \u003cspan class=\"n\"\u003elocal_gov\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003erow\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eincome_lavy_ratios\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003erow\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e..\u003c/span\u003e\u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"nf\"\u003emap\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"o\"\u003e|\u003c/span\u003e\u003cspan class=\"n\"\u003epercentage\u003c/span\u003e\u003cspan class=\"o\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003epercentage\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003edelete\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'.%'\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003eto_i\u003c/span\u003e \u003cspan class=\"o\"\u003e/\u003c/span\u003e \u003cspan class=\"mi\"\u003e10000\u003c/span\u003e\u003cspan class=\"n\"\u003er\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eper_capita_basis\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003erow\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e4\u003c/span\u003e\u003cspan class=\"o\"\u003e..\u003c/span\u003e\u003cspan class=\"mi\"\u003e6\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"nf\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"ss\"\u003e:to_i\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eflat\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003erow\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e7\u003c/span\u003e\u003cspan class=\"o\"\u003e..\u003c/span\u003e\u003cspan class=\"mi\"\u003e9\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"nf\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"ss\"\u003e:to_i\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n  \u003cspan class=\"n\"\u003ecalculator\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ecalculators\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ehousehold\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003emap\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"o\"\u003e|\u003c/span\u003e\u003cspan class=\"n\"\u003ehousehold_member\u003c/span\u003e\u003cspan class=\"o\"\u003e|\u003c/span\u003e \u003cspan class=\"no\"\u003eIncomeLevyCalculator\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ehousehold_member\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003eincome_lavy_ratios\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n    \u003cspan class=\"no\"\u003ePerCapitaBasisLevyCalculator\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ehousehold\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003eper_capita_basis\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n    \u003cspan class=\"no\"\u003eFlatLevyCalculator\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ehousehold\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003eflat\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"nf\"\u003eflatten\u003c/span\u003e\n  \u003cspan class=\"n\"\u003etax\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ecalculator\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ecalculate\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eto_i\u003c/span\u003e\n  \u003cspan class=\"nb\"\u003eputs\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"[\u003c/span\u003e\u003cspan class=\"si\"\u003e#{\u003c/span\u003e\u003cspan class=\"n\"\u003elocal_gov\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\u003cspan class=\"s2\"\u003e](\u003c/span\u003e\u003cspan class=\"si\"\u003e#{\u003c/span\u003e\u003cspan class=\"n\"\u003erow\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e13\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\u003cspan class=\"s2\"\u003e) | \u003c/span\u003e\u003cspan class=\"si\"\u003e#{\u003c/span\u003e\u003cspan class=\"n\"\u003etax\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eはい\u003c/p\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e自治体\u003c/th\u003e\n\u003cth\u003e国保料\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ca href=\"http://www.city.naha.okinawa.jp/kakuka/kokuhotyoujyu/hokenzeinoufu.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003e那覇市\u003c/a\u003e\u003c/td\u003e\n\u003ctd\u003e337045\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ca href=\"http://www.city.urasoe.lg.jp/docs/2014110102709/\" rel=\"nofollow noopener\" target=\"_blank\"\u003e浦添市\u003c/a\u003e\u003c/td\u003e\n\u003ctd\u003e329564\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ca href=\"http://www.city.nanjo.okinawa.jp/life/insurance/kokuho.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003e南城市\u003c/a\u003e\u003c/td\u003e\n\u003ctd\u003e295517\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ca href=\"https://www.city.okinawa.okinawa.jp/kurashi/365/2286\" rel=\"nofollow noopener\" target=\"_blank\"\u003e沖縄市\u003c/a\u003e\u003c/td\u003e\n\u003ctd\u003e345615\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ca href=\"http://www.city.tomigusuku.okinawa.jp/userfiles/files/health/2016bookall.pdf\" rel=\"nofollow noopener\" target=\"_blank\"\u003e豊見城市\u003c/a\u003e\u003c/td\u003e\n\u003ctd\u003e335504\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ca href=\"http://www.city.ginowan.okinawa.jp/life/health/02/37447.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003e宜野湾市\u003c/a\u003e\u003c/td\u003e\n\u003ctd\u003e286030\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ca href=\"http://www.city.itoman.lg.jp/docs/2013020102935/\" rel=\"nofollow noopener\" target=\"_blank\"\u003e糸満市\u003c/a\u003e\u003c/td\u003e\n\u003ctd\u003e309022\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ca href=\"http://www.city.uruma.lg.jp/kurashi/122/3149/492\" rel=\"nofollow noopener\" target=\"_blank\"\u003eうるま市\u003c/a\u003e\u003c/td\u003e\n\u003ctd\u003e307996\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ca href=\"http://www.city.miyakojima.lg.jp/kurashi/kokumin/kenkouhoken/2017-0616-1306-81.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003e宮古島市\u003c/a\u003e\u003c/td\u003e\n\u003ctd\u003e308751\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ca href=\"http://www.city.ishigaki.okinawa.jp/home/shiminhokenbu/kenkouhoken/index.htm#p2\" rel=\"nofollow noopener\" target=\"_blank\"\u003e石垣市\u003c/a\u003e\u003c/td\u003e\n\u003ctd\u003e315893\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ca href=\"http://www.city.nago.okinawa.jp/4/3835.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003e名護市\u003c/a\u003e\u003c/td\u003e\n\u003ctd\u003e271590\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"まとめ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eまとめ\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003eRubyを使うと国保税が計算できてべんり\u003c/li\u003e\n\u003cli\u003e沖縄の国保税意外と高い\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e明日の記事は\u003ca href=\"https://atton.github.io/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eあっとんさん\u003c/a\u003eです。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"コード\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B3%E3%83%BC%E3%83%89\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eコード\u003c/h2\u003e\n\n\u003cp\u003etsvだけ変えれば別の自治体でも使えます。\u003csup id=\"fnref5\"\u003e\u003ca href=\"#fn5\" rel=\"footnote\" title=\"固定資産がある人はcalculators設定まわり直して下さい\"\u003e5\u003c/a\u003e\u003c/sup\u003e \u003csup id=\"fnref6\"\u003e\u003ca href=\"#fn6\" rel=\"footnote\" title=\"実際は10期に支払いが分かれていたり年度中に年齢が変わる場合やx円未満切り捨てなどでもっと計算が難しい\"\u003e6\u003c/a\u003e\u003c/sup\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"rb\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eJapaneseNationalHealthInsuranceCalculator\u003c/span\u003e\n  \u003cspan class=\"nb\"\u003eattr_accessor\u003c/span\u003e \u003cspan class=\"ss\"\u003e:calculators\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003einitialize\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ehousehold\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"vi\"\u003e@household\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ehousehold\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003ecalculate\u003c/span\u003e\n    \u003cspan class=\"n\"\u003emedical_insurance_premium\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003emedical_care_assistance\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003elong_term_care_insurance_premium\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003emedical_insurance_premium\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ecalculators\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003esum\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"ss\"\u003e:medical_insurance_premium\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003emedical_care_assistance\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ecalculators\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003esum\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"ss\"\u003e:medical_care_assistance\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003elong_term_care_insurance_premium\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ecalculators\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003esum\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"ss\"\u003e:long_term_care_insurance_premium\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eHouseholdMember\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"no\"\u003eStruct\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ss\"\u003e:age\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:income\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:fixed_assets_tax\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003elong_term_care_insurance_premium?\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e40\u003c/span\u003e\u003cspan class=\"o\"\u003e...\u003c/span\u003e\u003cspan class=\"mi\"\u003e65\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003ecover?\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eage\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eIncomeLevyCalculator\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"no\"\u003eStruct\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ss\"\u003e:household_member\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:medical_insurance_premium_ratio\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:medical_care_assistance_ratio\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:long_term_care_insurance_premium_ratio\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003emedical_insurance_premium\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eincome\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003emedical_insurance_premium_ratio\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003emedical_care_assistance\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eincome\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003emedical_care_assistance_ratio\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003elong_term_care_insurance_premium\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003ehousehold_member\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003elong_term_care_insurance_premium?\u003c/span\u003e\n      \u003cspan class=\"n\"\u003eincome\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003elong_term_care_insurance_ratio\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n      \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"kp\"\u003eprivate\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eincome\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ehousehold_member\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eincome\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003ebasic_deduction\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"nf\"\u003emax\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003ebasic_deduction\u003c/span\u003e\n    \u003cspan class=\"mi\"\u003e330_000\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e# 均等割\u003c/span\u003e\n\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003ePerCapitaBasisLevyCalculator\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"no\"\u003eStruct\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ss\"\u003e:household_members\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:medical_insurance_premium\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:medical_care_assistance\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:long_term_care_insurance_premium\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003emedical_insurance_premium\u003c/span\u003e\n    \u003cspan class=\"k\"\u003esuper\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003ehousehold_member_num\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003emedical_care_assistance\u003c/span\u003e\n    \u003cspan class=\"k\"\u003esuper\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003ehousehold_member_num\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003elong_term_care_insurance_premium\u003c/span\u003e\n    \u003cspan class=\"k\"\u003esuper\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003elong_term_care_insurance_premium_member_num\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"kp\"\u003eprivate\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003ehousehold_member_num\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ehousehold_members\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003esize\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003elong_term_care_insurance_premium_member_num\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ehousehold_members\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eselect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"ss\"\u003e:long_term_care_insurance_premium?\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003esize\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e# 平等割\u003c/span\u003e\n\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eFlatLevyCalculator\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"no\"\u003eStruct\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ss\"\u003e:household_members\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:medical_insurance_premium\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:medical_care_assistance\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:long_term_care_insurance_premium\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003elong_term_care_insurance_premium\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003ehousehold_members\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eany?\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"ss\"\u003e:long_term_care_insurance_premium?\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"k\"\u003esuper\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n      \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e# 資産割\u003c/span\u003e\n\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003ePropertyLevyCalculator\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"no\"\u003eStruct\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ss\"\u003e:household_members\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:fixed_assets_tax\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:medical_insurance_premium_ratio\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:medical_care_assistance_ratio\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:long_term_care_insurance_premium_ratio\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003emedical_insurance_premium\u003c/span\u003e\n    \u003cspan class=\"vi\"\u003e@medical_insurance_premium_ratio\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"vi\"\u003e@fixed_assets_tax\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003emedical_care_assistance\u003c/span\u003e\n    \u003cspan class=\"vi\"\u003e@medical_care_assistance_ratio\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"vi\"\u003e@fixed_assets_tax\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003elong_term_care_insurance_premium\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003ehousehold_members\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eany?\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"ss\"\u003e:long_term_care_insurance_premium?\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"vi\"\u003e@long_term_care_insurance_ratio\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"vi\"\u003e@fixed_assets_tax\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n      \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003ehousehold\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\n  \u003cspan class=\"no\"\u003eHouseholdMember\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e27\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e2472120\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n  \u003cspan class=\"no\"\u003eHouseholdMember\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e29\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n  \u003cspan class=\"no\"\u003eHouseholdMember\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003cspan class=\"n\"\u003ecalculator\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"no\"\u003eJapaneseNationalHealthInsuranceCalculator\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ehousehold\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003etsv\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e\u003cspan class=\"no\"\u003eTSV\u003c/span\u003e\u003cspan class=\"sh\"\u003e\n那覇市   9.70%   1.59%   1.56%   18200   3300    7700    25400   5300    4600                http://www.city.naha.okinawa.jp/kakuka/kokuhotyoujyu/hokenzeinoufu.html\n浦添市   8.20%   2.40%   2.40%   19000   7500    9500    17000   6000    6000                http://www.city.urasoe.lg.jp/docs/2014110102709/\n南城市   6.70%   2.60%   1.90%   16700   7000    5900    18200   7000    4300                http://www.city.nanjo.okinawa.jp/life/insurance/kokuho.html\n沖縄市   9.12%   2.27%   1.86%   19712   5312    5686    20919   5637    3927                https://www.city.okinawa.okinawa.jp/kurashi/365/2286\n豊見城市    8.44%   2.61%   2.10%   17200   6200    6600    23200   5400    3700                http://www.city.tomigusuku.okinawa.jp/userfiles/files/health/2016bookall.pdf\n宜野湾市    6.63%   2.75%   1.62%   14300   5200    3900    19500   7100    5100                http://www.city.ginowan.okinawa.jp/life/health/02/37447.html\n糸満市   9.00%   1.50%   2.20%   16000   3700    6900    20000   5000    4700    30.00%  6.50%   5.10%   http://www.city.itoman.lg.jp/docs/2013020102935/\nうるま市    7.70%   2.50%   2.10%   14000   6500    7200    22000   6000    6000                http://www.city.uruma.lg.jp/kurashi/122/3149/492\n宮古島市    8.35%   2.10%   2%  17500   4300    5000    15500   4000    3000    30% 7%  5.8 http://www.city.miyakojima.lg.jp/kurashi/kokumin/kenkouhoken/2017-0616-1306-81.html\n石垣市   8.35%   2.20%   2.20%   18300   4300    6500    16600   5500    4000    19% 5%  4.20%   http://www.city.ishigaki.okinawa.jp/home/shiminhokenbu/kenkouhoken/index.htm#p2\n名護市   6.30%   2.70%   1.20%   14500   5900    4300    12500   5100    3600    20.00%  9.00%   4.00%   http://www.city.nago.okinawa.jp/4/3835.html\n\u003c/span\u003e\u003cspan class=\"no\"\u003eTSV\u003c/span\u003e\n\n\u003cspan class=\"nb\"\u003eputs\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"自治体 | 国保料\"\u003c/span\u003e\n\u003cspan class=\"nb\"\u003eputs\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"--- | ---\"\u003c/span\u003e\n\u003cspan class=\"n\"\u003etsv\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003elines\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003emap\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"o\"\u003e|\u003c/span\u003e\u003cspan class=\"n\"\u003el\u003c/span\u003e\u003cspan class=\"o\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003el\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003echomp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003esplit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"\u003c/span\u003e\u003cspan class=\"se\"\u003e\\t\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e}.\u003c/span\u003e\u003cspan class=\"nf\"\u003eeach\u003c/span\u003e \u003cspan class=\"k\"\u003edo\u003c/span\u003e \u003cspan class=\"o\"\u003e|\u003c/span\u003e\u003cspan class=\"n\"\u003erow\u003c/span\u003e\u003cspan class=\"o\"\u003e|\u003c/span\u003e\n  \u003cspan class=\"n\"\u003elocal_gov\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003erow\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eincome_lavy_ratios\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003erow\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e..\u003c/span\u003e\u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"nf\"\u003emap\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"o\"\u003e|\u003c/span\u003e\u003cspan class=\"n\"\u003epercentage\u003c/span\u003e\u003cspan class=\"o\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003epercentage\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003edelete\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'.%'\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003eto_i\u003c/span\u003e \u003cspan class=\"o\"\u003e/\u003c/span\u003e \u003cspan class=\"mi\"\u003e10000\u003c/span\u003e\u003cspan class=\"n\"\u003er\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eper_capita_basis\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003erow\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e4\u003c/span\u003e\u003cspan class=\"o\"\u003e..\u003c/span\u003e\u003cspan class=\"mi\"\u003e6\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"nf\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"ss\"\u003e:to_i\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eflat\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003erow\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e7\u003c/span\u003e\u003cspan class=\"o\"\u003e..\u003c/span\u003e\u003cspan class=\"mi\"\u003e9\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"nf\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"ss\"\u003e:to_i\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n  \u003cspan class=\"n\"\u003ecalculator\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ecalculators\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ehousehold\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003emap\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"o\"\u003e|\u003c/span\u003e\u003cspan class=\"n\"\u003ehousehold_member\u003c/span\u003e\u003cspan class=\"o\"\u003e|\u003c/span\u003e \u003cspan class=\"no\"\u003eIncomeLevyCalculator\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ehousehold_member\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003eincome_lavy_ratios\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n    \u003cspan class=\"no\"\u003ePerCapitaBasisLevyCalculator\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ehousehold\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003eper_capita_basis\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n    \u003cspan class=\"no\"\u003eFlatLevyCalculator\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ehousehold\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003eflat\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"nf\"\u003eflatten\u003c/span\u003e\n  \u003cspan class=\"n\"\u003etax\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ecalculator\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ecalculate\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eto_i\u003c/span\u003e\n  \u003cspan class=\"nb\"\u003eputs\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"[\u003c/span\u003e\u003cspan class=\"si\"\u003e#{\u003c/span\u003e\u003cspan class=\"n\"\u003elocal_gov\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\u003cspan class=\"s2\"\u003e](\u003c/span\u003e\u003cspan class=\"si\"\u003e#{\u003c/span\u003e\u003cspan class=\"n\"\u003erow\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e13\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\u003cspan class=\"s2\"\u003e) | \u003c/span\u003e\u003cspan class=\"si\"\u003e#{\u003c/span\u003e\u003cspan class=\"n\"\u003etax\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"脚注\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%84%9A%E6%B3%A8\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e脚注\u003c/h2\u003e\n\n\u003cdiv class=\"footnotes\"\u003e\n\u003chr\u003e\n\u003col\u003e\n\n\u003cli id=\"fn1\"\u003e\n\u003cp\u003e\u003ca href=\"http://www.mhlw.go.jp/houdou_kouhou/kouhou_shuppan/pdf/2015-jimu_13.pdf\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://www.mhlw.go.jp/houdou_kouhou/kouhou_shuppan/pdf/2015-jimu_13.pdf\u003c/a\u003e \u003ca href=\"#fnref1\"\u003e↩\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\n\u003cli id=\"fn2\"\u003e\n\u003cp\u003e\u003ca href=\"http://www.mhlw.go.jp/stf/seisakunitsuite/bunya/kenkou_iryou/iryouhoken/iryouhoken01/index.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://www.mhlw.go.jp/stf/seisakunitsuite/bunya/kenkou_iryou/iryouhoken/iryouhoken01/index.html\u003c/a\u003e \u003ca href=\"#fnref2\"\u003e↩\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\n\u003cli id=\"fn3\"\u003e\n\u003cp\u003e\u003ca href=\"https://ja.wikipedia.org/wiki/%E5%9B%BD%E6%B0%91%E5%81%A5%E5%BA%B7%E4%BF%9D%E9%99%BA%E7%A8%8E\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://ja.wikipedia.org/wiki/%E5%9B%BD%E6%B0%91%E5%81%A5%E5%BA%B7%E4%BF%9D%E9%99%BA%E7%A8%8E\u003c/a\u003e \u003ca href=\"#fnref3\"\u003e↩\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\n\u003cli id=\"fn4\"\u003e\n\u003cp\u003e\u003ca href=\"https://keiei.freee.co.jp/2015/06/26/kokuho-keisan/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://keiei.freee.co.jp/2015/06/26/kokuho-keisan/\u003c/a\u003e \u003ca href=\"#fnref4\"\u003e↩\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\n\u003cli id=\"fn5\"\u003e\n\u003cp\u003e固定資産がある人はcalculators設定まわり直して下さい \u003ca href=\"#fnref5\"\u003e↩\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\n\u003cli id=\"fn6\"\u003e\n\u003cp\u003e実際は10期に支払いが分かれていたり年度中に年齢が変わる場合やx円未満切り捨てなどでもっと計算が難しい \u003ca href=\"#fnref6\"\u003e↩\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\n\u003c/ol\u003e\n\u003c/div\u003e\n","body":"Okinawa.rb Advent Calendar 2017 1日目です。\nhttps://qiita.com/advent-calendar/2017/okinawarb\n\n沖縄県の各市町村の国民健康保険料の金額をRubyで計算します。\n\n## 国民健康保険税\n\n日本は国民皆保険制度なので国民全員がいずれかの公的医療保険制度に加入しています。[^1]\n\n市町村国保とは、他の医療保険に加入していない住民を被保険者とする国民皆保険制度の基礎です。[^2]\n\n国民健康保険料は国民健康保険税という税金として納める事が多いです。詳しくはWikipediaの国民健康保険税の記事[^3]や、freeeさんの国民健康保険料の計算方法をわかりやすく解説|知っておきたい税の基本[^4]を読んで下さい。\n\n## 沖縄県の国民健康保険料\n\n市町村が運営しているので自治体によって金額が違います。赤字なので保険料が高いです :up: \n\n\u003e 国保、沖縄県内10市町村で保険料上昇予測　県は徴収料統一検討\nhttp://www.okinawatimes.co.jp/articles/-/133399\n\n\u003e 沖縄戦の影響で全国と比べ前期高齢者（６５～７４歳）の割合が低く、前期高齢者の割合を基に算出される交付金が低いことが、国保財政の悪化につながっている。\nhttps://ryukyushimpo.jp/news/entry-435651.html\n\n## 計算方法\n\n那覇市を例にします。以下の3つの区分の合算です。\n\n\u003e 保険税の年税額は、医療分と支援分と介護分（40歳～64歳の方）の合算額です。医療分と支援分と介護分はそれぞれ別々に計算されます。\nhttp://www.city.naha.okinawa.jp/kakuka/kokuhotyoujyu/hokenzeinoufu.html\n\n65歳からは介護分は掛かりませんが、介護保険料が別途掛かります(また、75歳からは国保ではなく後期高齢者医療制度に加入することになります)。\n\n那覇市の場合はそれぞれの分について以下の3つを計算していきます。\n\n- 所得割: 所得×税率\n- 均等割: 加入者数×◯円\n- 平等割: 世帯あたり◯円\n\n自治体によっては所得割、均等割、平等割の他に資産割があったりします。その場合固定資産税×税率を計算します。\n\n## 実装\n\n### 計算機の初期化\n\n国保は世帯ごとに請求されるので計算機の引数で国保に加入する世帯の構成員を取ります。詳しくは擬制世帯でググってください。\n\n```rb\nclass JapaneseNationalHealthInsuranceCalculator\n  def initialize(household)\n    @household = household\n  end\nend\n```\n\n初期化する際に引数で渡す世帯の構成員を定義してみましょう。\n国保税を計算するためには以下の情報が取れる必要があります。\n\n- 介護分の計算: 年齢\n- 所得割の計算: 所得\n- 資産割の計算: 固定資産税額\n\nそれに加え、介護分が必要な年齢か調べるメソッドも追加しましょう\n\n```rb\nclass HouseholdMember \u003c Struct.new(:age, :income, :fixed_assets_tax)\n  def long_term_care_insurance_premium?\n    (40...65).cover?(age)\n  end\nend\n```\n\nこれで以下のように世帯を渡して国民健康保険料の計算機を初期化できるようになりました。\n\n```rb\nhousehold = [\n  HouseholdMember.new(27, 2472120, 0),\n  HouseholdMember.new(29, 0, 0),\n  HouseholdMember.new(0, 0, 0)\n]\ncalculator = JapaneseNationalHealthInsuranceCalculator.new(household)\n```\n\n### 国民健康保険料の計算\n\n国民健康保険料の計算について、以下3つの金額の合計なので定義は簡単です。\n\n- 医療分\n- 支援分\n- 介護分\n\n```rb\nclass JapaneseNationalHealthInsuranceCalculator\n  def calculate\n    medical_insurance_premium + medical_care_assistance + long_term_care_insurance_premium\n  end\nend\n```\n\n問題は自治体によって、所得割・資産割の税率や均等割・平等割の金額が変わること、資産割がある/ないが変わることです。\n\n- 所得割: 所得×税率\n- 均等割: 加入者数×◯円\n- 平等割: 世帯あたり◯円\n- 資産割: 固定資産税×税率\n\n### 部分ごとの計算機をつくる\n\n以下の4種類の計算機を作りましょう。\n\n- 所得割\n- 均等割\n- 平等割\n- 資産割\n\nそれぞれの計算機に以下の3つを計算するAPIを実装します。\n\n- 医療分\n- 支援分\n- 介護分\n\n例えば所得割の場合、以下のように所得割の税率を引数で受け取るようにすると、自治体ごとに個別の計算機を作る必要がなくなるので便利でしょう。\n\n```rb\nclass IncomeLevyCalculator \u003c Struct.new(:household_member, :medical_insurance_premium_ratio, :medical_care_assistance_ratio, :long_term_care_insurance_premium_ratio)\n  def medical_insurance_premium\n    income * medical_insurance_premium_ratio\n  end\n\n  def medical_care_assistance\n    income * medical_care_assistance_ratio\n  end\n\n  def long_term_care_insurance_premium\n    if household_member.long_term_care_insurance_premium?\n      income * long_term_care_insurance_ratio\n    else\n      0\n    end\n  end\n\n  private\n\n  def income\n    [household_member.income - basic_deduction, 0].max\n  end\n\n  def basic_deduction\n    330_000\n  end\nend\n```\n\n同じような感じで他の計算機も作ります。\n\n```rb\n# 均等割\nclass PerCapitaBasisLevyCalculator \u003c Struct.new(:medical_insurance_premium, :medical_care_assistance, :long_term_care_insurance_premium)\nend\n\n# 平等割\nclass FlatLevyCalculator \u003c Struct.new(:medical_insurance_premium, :medical_care_assistance, :long_term_care_insurance_premium)\nend\n\n# 資産割\nclass PropertyLevyCalculator\n  def initialize(fixed_assets_tax, medical_insurance_premium_ratio, medical_care_assistance_ratio, long_term_care_insurance_premium_ratio)\n    @fixed_assets_tax                       = fixed_assets_tax\n    @medical_insurance_premium_ratio        = medical_insurance_premium_ratio\n    @medical_care_assistance_ratio          = medical_care_assistance_ratio\n    @long_term_care_insurance_premium_ratio = long_term_care_insurance_premium_ratio\n  end\n\n  def medical_insurance_premium\n    @medical_insurance_premium_ratio * @fixed_assets_tax\n  end\n\n  def medical_care_assistance\n    @medical_care_assistance_ratio * @fixed_assets_tax\n  end\n\n  def long_term_care_insurance_premium\n    @long_term_care_insurance_ratio * @fixed_assets_tax\n  end\nend\n```\n\n### 計算機を組み合わせる\n\nそれぞれの市町村に必要な計算機を作ります。\n\n例えば那覇市の場合\n\n所得割\n\n医療分 | 支援分 | 介護分\n--- | --- | ---\n9.70% | 1.59% | 1.56%\n\n均等割\n\n医療分 | 支援分 | 介護分\n--- | --- | ---\n18,200 | 3,300 | 7,700\n\n平等割\n\n 医療分 | 支援分 | 介護分\n --- | --- | ---\n25,400 | 5,300 | 4,600\n\nなので以下のような組み合わせです。\n\n```rb\ncalculators = [\n  household.map { |household_member| IncomeLevyCalculator.new(household_member, 970/10000r, 159/10000r, 156/10000r) },\n  PerCapitaBasisLevyCalculator.new(household, 18_200, 3_300, 7_700),\n  FlatLevyCalculator.new(household, 25_400, 5_300, 4_600)\n].flatten\n```\n\n国保計算機にこれらの子計算機を入れられるようにします。\n\n```rb\nclass JapaneseNationalHealthInsuranceCalculator\n  attr_accessor :calculators\nend\n\ncalculator.calculators = calculators\n```\n\n子計算機を使って計算するようメソッドを定義します。\n\n```rb\nclass JapaneseNationalHealthInsuranceCalculator\n  def medical_insurance_premium\n    calculators.sum(\u0026:medical_insurance_premium)\n  end\n\n  def medical_care_assistance\n    calculators.sum(\u0026:medical_care_assistance)\n  end\n\n  def long_term_care_insurance_premium\n    calculators.sum(\u0026:long_term_care_insurance_premium)\n  end\nend\n```\n\n結果\n\n```rb\nputs calculator.calculate.to_i\n# 337045\n```\n\n無事国民健康保険料が計算できました!\n\n## 沖縄県の各市町村で計算してみる\n\n資産のことを気にしなければさっきの要領で子計算機を作る処理を使いまわせます。\n\nググったりして以下のようなTSVのデータを用意します。自治体によってはウェブに保険料が載っていないのでとりあえず市だけ調べました。\n\n```rb\ntsv = \u003c\u003cTSV\n那覇市\t9.70%\t1.59%\t1.56%\t18200\t3300\t7700\t25400\t5300\t4600\t\t\t\thttp://www.city.naha.okinawa.jp/kakuka/kokuhotyoujyu/hokenzeinoufu.html\n浦添市\t8.20%\t2.40%\t2.40%\t19000\t7500\t9500\t17000\t6000\t6000\t\t\t\thttp://www.city.urasoe.lg.jp/docs/2014110102709/\n南城市\t6.70%\t2.60%\t1.90%\t16700\t7000\t5900\t18200\t7000\t4300\t\t\t\thttp://www.city.nanjo.okinawa.jp/life/insurance/kokuho.html\n沖縄市\t9.12%\t2.27%\t1.86%\t19712\t5312\t5686\t20919\t5637\t3927\t\t\t\thttps://www.city.okinawa.okinawa.jp/kurashi/365/2286\n豊見城市\t8.44%\t2.61%\t2.10%\t17200\t6200\t6600\t23200\t5400\t3700\t\t\t\thttp://www.city.tomigusuku.okinawa.jp/userfiles/files/health/2016bookall.pdf\n宜野湾市\t6.63%\t2.75%\t1.62%\t14300\t5200\t3900\t19500\t7100\t5100\t\t\t\thttp://www.city.ginowan.okinawa.jp/life/health/02/37447.html\n糸満市\t9.00%\t1.50%\t2.20%\t16000\t3700\t6900\t20000\t5000\t4700\t30.00%\t6.50%\t5.10%\thttp://www.city.itoman.lg.jp/docs/2013020102935/\nうるま市\t7.70%\t2.50%\t2.10%\t14000\t6500\t7200\t22000\t6000\t6000\t\t\t\thttp://www.city.uruma.lg.jp/kurashi/122/3149/492\n宮古島市\t8.35%\t2.10%\t2%\t17500\t4300\t5000\t15500\t4000\t3000\t30%\t7%\t5.8\thttp://www.city.miyakojima.lg.jp/kurashi/kokumin/kenkouhoken/2017-0616-1306-81.html\n石垣市\t8.35%\t2.20%\t2.20%\t18300\t4300\t6500\t16600\t5500\t4000\t19%\t5%\t4.20%\thttp://www.city.ishigaki.okinawa.jp/home/shiminhokenbu/kenkouhoken/index.htm#p2\n名護市\t6.30%\t2.70%\t1.20%\t14500\t5900\t4300\t12500\t5100\t3600\t20.00%\t9.00%\t4.00%\thttp://www.city.nago.okinawa.jp/4/3835.html\nTSV\n```\n\nおもむろにこねくり回す\n\n```rb\nputs \"自治体 | 国保料\"\nputs \"--- | ---\"\ntsv.lines.map { |l| l.chomp.split(\"\\t\") }.each do |row|\n  local_gov = row[0]\n  income_lavy_ratios = row[1..3].map {|percentage| percentage.delete('.%').to_i / 10000r }\n  per_capita_basis = row[4..6].map(\u0026:to_i)\n  flat = row[7..9].map(\u0026:to_i)\n\n  calculator.calculators = [\n    household.map { |household_member| IncomeLevyCalculator.new(household_member, *income_lavy_ratios) },\n    PerCapitaBasisLevyCalculator.new(household, *per_capita_basis),\n    FlatLevyCalculator.new(household, *flat)\n  ].flatten\n  tax = calculator.calculate.to_i\n  puts \"[#{local_gov}](#{row[13]}) | #{tax}\"\nend\n\n```\n\nはい\n\n自治体 | 国保料\n--- | ---\n[那覇市](http://www.city.naha.okinawa.jp/kakuka/kokuhotyoujyu/hokenzeinoufu.html) | 337045\n[浦添市](http://www.city.urasoe.lg.jp/docs/2014110102709/) | 329564\n[南城市](http://www.city.nanjo.okinawa.jp/life/insurance/kokuho.html) | 295517\n[沖縄市](https://www.city.okinawa.okinawa.jp/kurashi/365/2286) | 345615\n[豊見城市](http://www.city.tomigusuku.okinawa.jp/userfiles/files/health/2016bookall.pdf) | 335504\n[宜野湾市](http://www.city.ginowan.okinawa.jp/life/health/02/37447.html) | 286030\n[糸満市](http://www.city.itoman.lg.jp/docs/2013020102935/) | 309022\n[うるま市](http://www.city.uruma.lg.jp/kurashi/122/3149/492) | 307996\n[宮古島市](http://www.city.miyakojima.lg.jp/kurashi/kokumin/kenkouhoken/2017-0616-1306-81.html) | 308751\n[石垣市](http://www.city.ishigaki.okinawa.jp/home/shiminhokenbu/kenkouhoken/index.htm#p2) | 315893\n[名護市](http://www.city.nago.okinawa.jp/4/3835.html) | 271590\n\n## まとめ\n\n- Rubyを使うと国保税が計算できてべんり\n- 沖縄の国保税意外と高い\n\n明日の記事は[あっとんさん](https://atton.github.io/)です。\n\n\n## コード\n\ntsvだけ変えれば別の自治体でも使えます。[^5] [^6]\n\n[^5]: 固定資産がある人はcalculators設定まわり直して下さい\n[^6]: 実際は10期に支払いが分かれていたり年度中に年齢が変わる場合やx円未満切り捨てなどでもっと計算が難しい\n\n```rb\nclass JapaneseNationalHealthInsuranceCalculator\n  attr_accessor :calculators\n\n  def initialize(household)\n    @household = household\n  end\n\n  def calculate\n    medical_insurance_premium + medical_care_assistance + long_term_care_insurance_premium\n  end\n\n  def medical_insurance_premium\n    calculators.sum(\u0026:medical_insurance_premium)\n  end\n\n  def medical_care_assistance\n    calculators.sum(\u0026:medical_care_assistance)\n  end\n\n  def long_term_care_insurance_premium\n    calculators.sum(\u0026:long_term_care_insurance_premium)\n  end\nend\n\nclass HouseholdMember \u003c Struct.new(:age, :income, :fixed_assets_tax)\n  def long_term_care_insurance_premium?\n    (40...65).cover?(age)\n  end\nend\n\nclass IncomeLevyCalculator \u003c Struct.new(:household_member, :medical_insurance_premium_ratio, :medical_care_assistance_ratio, :long_term_care_insurance_premium_ratio)\n  def medical_insurance_premium\n    income * medical_insurance_premium_ratio\n  end\n\n  def medical_care_assistance\n    income * medical_care_assistance_ratio\n  end\n\n  def long_term_care_insurance_premium\n    if household_member.long_term_care_insurance_premium?\n      income * long_term_care_insurance_ratio\n    else\n      0\n    end\n  end\n\n  private\n\n  def income\n    [household_member.income - basic_deduction, 0].max\n  end\n\n  def basic_deduction\n    330_000\n  end\nend\n\n# 均等割\nclass PerCapitaBasisLevyCalculator \u003c Struct.new(:household_members, :medical_insurance_premium, :medical_care_assistance, :long_term_care_insurance_premium)\n  def medical_insurance_premium\n    super * household_member_num\n  end\n\n  def medical_care_assistance\n    super * household_member_num\n  end\n\n  def long_term_care_insurance_premium\n    super * long_term_care_insurance_premium_member_num\n  end\n\n  private\n\n  def household_member_num\n    household_members.size\n  end\n\n  def long_term_care_insurance_premium_member_num\n    household_members.select(\u0026:long_term_care_insurance_premium?).size\n  end\nend\n\n# 平等割\nclass FlatLevyCalculator \u003c Struct.new(:household_members, :medical_insurance_premium, :medical_care_assistance, :long_term_care_insurance_premium)\n  def long_term_care_insurance_premium\n    if household_members.any?(\u0026:long_term_care_insurance_premium?)\n      super\n    else\n      0\n    end\n  end\nend\n\n# 資産割\nclass PropertyLevyCalculator \u003c Struct.new(:household_members, :fixed_assets_tax, :medical_insurance_premium_ratio, :medical_care_assistance_ratio, :long_term_care_insurance_premium_ratio)\n  def medical_insurance_premium\n    @medical_insurance_premium_ratio * @fixed_assets_tax\n  end\n\n  def medical_care_assistance\n    @medical_care_assistance_ratio * @fixed_assets_tax\n  end\n\n  def long_term_care_insurance_premium\n    if household_members.any?(\u0026:long_term_care_insurance_premium?)\n      @long_term_care_insurance_ratio * @fixed_assets_tax\n    else\n      0\n    end\n  end\nend\n\nhousehold = [\n  HouseholdMember.new(27, 2472120, 0),\n  HouseholdMember.new(29, 0, 0),\n  HouseholdMember.new(0, 0, 0)\n]\ncalculator = JapaneseNationalHealthInsuranceCalculator.new(household)\n\ntsv = \u003c\u003cTSV\n那覇市\t9.70%\t1.59%\t1.56%\t18200\t3300\t7700\t25400\t5300\t4600\t\t\t\thttp://www.city.naha.okinawa.jp/kakuka/kokuhotyoujyu/hokenzeinoufu.html\n浦添市\t8.20%\t2.40%\t2.40%\t19000\t7500\t9500\t17000\t6000\t6000\t\t\t\thttp://www.city.urasoe.lg.jp/docs/2014110102709/\n南城市\t6.70%\t2.60%\t1.90%\t16700\t7000\t5900\t18200\t7000\t4300\t\t\t\thttp://www.city.nanjo.okinawa.jp/life/insurance/kokuho.html\n沖縄市\t9.12%\t2.27%\t1.86%\t19712\t5312\t5686\t20919\t5637\t3927\t\t\t\thttps://www.city.okinawa.okinawa.jp/kurashi/365/2286\n豊見城市\t8.44%\t2.61%\t2.10%\t17200\t6200\t6600\t23200\t5400\t3700\t\t\t\thttp://www.city.tomigusuku.okinawa.jp/userfiles/files/health/2016bookall.pdf\n宜野湾市\t6.63%\t2.75%\t1.62%\t14300\t5200\t3900\t19500\t7100\t5100\t\t\t\thttp://www.city.ginowan.okinawa.jp/life/health/02/37447.html\n糸満市\t9.00%\t1.50%\t2.20%\t16000\t3700\t6900\t20000\t5000\t4700\t30.00%\t6.50%\t5.10%\thttp://www.city.itoman.lg.jp/docs/2013020102935/\nうるま市\t7.70%\t2.50%\t2.10%\t14000\t6500\t7200\t22000\t6000\t6000\t\t\t\thttp://www.city.uruma.lg.jp/kurashi/122/3149/492\n宮古島市\t8.35%\t2.10%\t2%\t17500\t4300\t5000\t15500\t4000\t3000\t30%\t7%\t5.8\thttp://www.city.miyakojima.lg.jp/kurashi/kokumin/kenkouhoken/2017-0616-1306-81.html\n石垣市\t8.35%\t2.20%\t2.20%\t18300\t4300\t6500\t16600\t5500\t4000\t19%\t5%\t4.20%\thttp://www.city.ishigaki.okinawa.jp/home/shiminhokenbu/kenkouhoken/index.htm#p2\n名護市\t6.30%\t2.70%\t1.20%\t14500\t5900\t4300\t12500\t5100\t3600\t20.00%\t9.00%\t4.00%\thttp://www.city.nago.okinawa.jp/4/3835.html\nTSV\n\nputs \"自治体 | 国保料\"\nputs \"--- | ---\"\ntsv.lines.map { |l| l.chomp.split(\"\\t\") }.each do |row|\n  local_gov = row[0]\n  income_lavy_ratios = row[1..3].map {|percentage| percentage.delete('.%').to_i / 10000r }\n  per_capita_basis = row[4..6].map(\u0026:to_i)\n  flat = row[7..9].map(\u0026:to_i)\n\n  calculator.calculators = [\n    household.map { |household_member| IncomeLevyCalculator.new(household_member, *income_lavy_ratios) },\n    PerCapitaBasisLevyCalculator.new(household, *per_capita_basis),\n    FlatLevyCalculator.new(household, *flat)\n  ].flatten\n  tax = calculator.calculate.to_i\n  puts \"[#{local_gov}](#{row[13]}) | #{tax}\"\nend\n```\n\n## 脚注\n\n[^1]: http://www.mhlw.go.jp/houdou_kouhou/kouhou_shuppan/pdf/2015-jimu_13.pdf\n[^2]: http://www.mhlw.go.jp/stf/seisakunitsuite/bunya/kenkou_iryou/iryouhoken/iryouhoken01/index.html\n[^3]: https://ja.wikipedia.org/wiki/%E5%9B%BD%E6%B0%91%E5%81%A5%E5%BA%B7%E4%BF%9D%E9%99%BA%E7%A8%8E\n\n[^4]: https://keiei.freee.co.jp/2015/06/26/kokuho-keisan/\n","coediting":false,"comments_count":0,"created_at":"2017-12-01T20:05:58+09:00","group":null,"id":"315031c1b9d3f1a80315","likes_count":8,"private":false,"reactions_count":0,"tags":[{"name":"Ruby","versions":[]}],"title":"Rubyで国民健康保険料を計算する","updated_at":"2017-12-02T00:22:29+09:00","url":"https://qiita.com/hanachin_/items/315031c1b9d3f1a80315","user":{"description":"既婚バイ","facebook_id":"seiei.higa","followees_count":166,"followers_count":120,"github_login_name":"hanachin","id":"hanachin_","items_count":55,"linkedin_id":"","location":"Naha, Okinawa, Japan","name":"Seiei Miyagi","organization":"YassLab","permanent_id":2074,"profile_image_url":"https://qiita-image-store.s3.amazonaws.com/0/2074/profile-images/1511092027","twitter_screen_name":"hanachin_","website_url":""},"page_views_count":null}]