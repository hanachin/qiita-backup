[{"rendered_body":"\n\u003ch2\u003e\n\u003cspan id=\"railsã‚ã‚‹ã‚ã‚‹\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#rails%E3%81%82%E3%82%8B%E3%81%82%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eRailsã‚ã‚‹ã‚ã‚‹\u003c/h2\u003e\n\n\u003cp\u003eä½•æ°—ãªã„ãƒ¢ãƒ‡ãƒ«ã®å¤‰æ›´ãŒã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã‚’å‚·ã¤ã‘ãŸ\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"tldr\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#tldr\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eTL;DR\u003c/h2\u003e\n\n\u003cblockquote class=\"twitter-tweet\"\u003e\n\u003cp\u003eæœ€è¿‘ã®è¶£å‘³ã‚¢ãƒ—ãƒªã§ã¯ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã”ã¨ã«ãƒ¢ãƒ‡ãƒ«ç”Ÿã‚„ã—ã¦ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã®ãƒ¢ãƒ‡ãƒ«ä½¿ã‚ãªã„è¨­è¨ˆã§æ›¸ã„ã¦ã„ã¦ã€ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚„ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¹ã‚³ãƒ¼ãƒ—æ›¸ãæ•£ã‚‰ã‹ã—ã¦ã‚‚å½±éŸ¿ç¯„å›²ãŒã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼å†…ã ã‘ã§æ¸ˆã‚€ã®ã§ä¾¿åˆ©ã ã—Formã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæ›¸ã„ã¦ã‚°ãƒ«ãƒ¼ã—ã¾ãã‚‹å¿…è¦ã‚‚ãªãå¿«é©\u003c/p\u003eâ€” Miyagi (@hanachin_) \u003ca href=\"https://twitter.com/hanachin_/status/958285661601087488?ref_src=twsrc%5Etfw\" rel=\"nofollow noopener\" target=\"_blank\"\u003e2018å¹´1æœˆ30æ—¥\u003c/a\u003e\n\u003c/blockquote\u003e\n\n\u003cscript async src=\"https://platform.twitter.com/widgets.js\"\u003e\u003c/script\u003e\n\n\u003cblockquote class=\"twitter-tweet\" data-conversation=\"none\"\u003e\n\u003cp\u003eã‚¢ãƒ—ãƒªå…¨ä½“ã§1ãƒ¢ãƒ‡ãƒ«ã ã¨ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã¨ä¸€ç·’ã€ãƒ¢ãƒ‡ãƒ«å…¨ä½“ã«å½±éŸ¿ã§ã‚‹æ©Ÿèƒ½ãŒã‚¢ãƒ—ãƒªå…¨ä½“ã«å½±éŸ¿ã§ã¦ã¤ã‚‰ã„ã€‚æ©Ÿèƒ½ã”ã¨ã«ã‚¹ã‚­ãƒƒãƒ—ã—ãŸã‚Šä½¿ã„åˆ†ã‘ã¯ã§ãã‚‹ã‘ã©ãƒ¢ãƒ‡ãƒ«ã”ã¨å…¨éƒ¨åˆ†ã‘ãŸã»ã†ãŒæ¥½ã€ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã”ã¨ã«åˆ†ã‘ã‚‹ã¨è²¬å‹™ãŒæ˜ç¢ºã«ãªã‚Šã‚„ã™ã„ã€‚ã¿ãŸã„ãªæ„Ÿã˜ã§ã™! è©³ã—ã„è¨˜äº‹ã¯ã‚„ã‚‹æ°—ã§ãŸã‚‰æ›¸ã...\u003c/p\u003eâ€” Miyagi (@hanachin_) \u003ca href=\"https://twitter.com/hanachin_/status/961784296347332608?ref_src=twsrc%5Etfw\" rel=\"nofollow noopener\" target=\"_blank\"\u003e2018å¹´2æœˆ9æ—¥\u003c/a\u003e\n\u003c/blockquote\u003e\n\n\u003cscript async src=\"https://platform.twitter.com/widgets.js\"\u003e\u003c/script\u003e\n\n\u003cblockquote class=\"twitter-tweet\"\u003e\n\u003cp\u003eè‡ªåˆ†è‡ªèº«ãƒãƒ¼ãƒ ã‚¹ãƒšãƒ¼ã‚¹ã©ã†åˆ‡ã‚‹ã‹ã¨ã‹ã¯èˆˆå‘³ãªãã¦default_scopeãŒã¤ã‚‰ã„ã®ã§ã¯ãªãã„ã‚ã‚“ãªè²¬å‹™ãŒã‚ã‚‹ã®ã«ActiveRecordã®ãƒ¢ãƒ‡ãƒ«ãŒ1ã¤ãªã®ãŒã¤ã‚‰ã¿ã®æ ¹æœ¬çš„ãªåŸå› ã€Formã«ã—ã¦ã‚‚ãã‚Œã¯æ®‹ã‚‹ã—ã„ã£ãActiveRecordã”ã¨åˆ†ã‘ã‚‹æ–¹ãŒä¾¿åˆ©ã§ã¯æ—¢ã«migration/micro serviceã§ã‚„ã£ã¦ã‚‹ã—ã¿ãŸã„ãªæ„Ÿã˜ãªã®ã§ã—ãŸ\u003c/p\u003eâ€” Miyagi (@hanachin_) \u003ca href=\"https://twitter.com/hanachin_/status/963215822251376640?ref_src=twsrc%5Etfw\" rel=\"nofollow noopener\" target=\"_blank\"\u003e2018å¹´2æœˆ13æ—¥\u003c/a\u003e\n\u003c/blockquote\u003e\n\n\u003cscript async src=\"https://platform.twitter.com/widgets.js\"\u003e\u003c/script\u003e\n\n\u003cp\u003eã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã”ã¨ã«åˆ†ã‘ã‚ã¨ã„ã„ãŸã„ã‚ã‘ã§ã¯ãªãã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã§1ãƒ†ãƒ¼ãƒ–ãƒ«1 ActiveRecordãƒ¢ãƒ‡ãƒ«ã‚’ã‚„ã‚ã¦\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"çµŒç·¯\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%B5%8C%E7%B7%AF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eçµŒç·¯\u003c/h2\u003e\n\n\u003cp\u003eå­ã©ã‚‚ã®ãŠä¸–è©±ã‚’è¨˜éŒ²ã™ã‚‹ã‚¦ã‚§ãƒƒãƒ–ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ­£æœˆä¼‘ã¿ã‚ãŸã‚Šã‹ã‚‰æ›¸ã„ã¦ã„ã¾ã™ã€‚\u003csup id=\"fnref1\"\u003e\u003ca href=\"#fn1\" rel=\"footnote\" title=\"docker-composeã§ç’°å¢ƒã‚’æ•´ãˆãŸã‚Šã€SQLã§i18nã—ãŸæ–‡å­—åˆ—ã‚’jsonã¨ã—ã¦renderã—ã¦ARã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹çµŒç”±ã›ãšã«è¿”ã—ãŸã‚Šã€ä»Šå›è¨˜äº‹ã«ã—ãŸARã®ãƒ¢ãƒ‡ãƒ«ã‚’åˆ†ã‘ã‚‹è¨­è¨ˆãªã©æ™®æ®µä»•äº‹ã§ã‚„ã‚‰ãªã„å®Ÿé¨“çš„ãªã“ã¨ã‚’è¶£å‘³ã§ã‚„ã£ã¦ã„ã¾ã™\"\u003e1\u003c/a\u003e\u003c/sup\u003e\u003cbr\u003e\n\u003ca href=\"https://github.com/hanachin/bblog\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://github.com/hanachin/bblog\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eãã®ä¸­ã§ã“ã†ã„ã†æ°—æŒã¡ãŒç”Ÿã¾ã‚Œã¾ã—ãŸ(Refinementséæ¿€æ´¾)ã€‚\u003c/p\u003e\n\n\u003cblockquote class=\"twitter-tweet\"\u003e\n\u003cp\u003eç‰¹å®šã®controllerã§ã—ã‹ã¤ã‹ã‚ãªã„ãƒ¡ã‚½ãƒƒãƒ‰ã€modelã«ç”Ÿã‚„ã•ãšcontrollerã§ç„¡åãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ä½œã£ã¦refineã§ã‚ˆã„ã®ã§ã¯ (éæ¿€æ´¾\u003c/p\u003eâ€” Miyagi (@hanachin_) \u003ca href=\"https://twitter.com/hanachin_/status/944015787500609537?ref_src=twsrc%5Etfw\" rel=\"nofollow noopener\" target=\"_blank\"\u003e2017å¹´12æœˆ22æ—¥\u003c/a\u003e\n\u003c/blockquote\u003e\n\n\u003cscript async src=\"https://platform.twitter.com/widgets.js\"\u003e\u003c/script\u003e\n\n\u003cp\u003eãƒªãƒ—ãƒ©ã‚¤ã§ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ„ã‚¤ãƒ¼ãƒˆã‚’å—ã‘å–ã‚Šã¾ã—ãŸã€‚\u003c/p\u003e\n\n\u003cblockquote class=\"twitter-tweet\" data-conversation=\"none\"\u003e\n\u003cp\u003eå†…éƒ¨ã‚¯ãƒ©ã‚¹ã¨ã—ã¦ HogeController::User ã‚’ä½œã‚‹ã®ã¯ã©ã†ã‹ã€ã£ã¦è©±ã‚’ã“ã®ã‚ã„ã ã—ã¦ã¾ã—ãŸã€‚\u003c/p\u003eâ€” Takafumi ONAKA (@onk) \u003ca href=\"https://twitter.com/onk/status/944079047713157120?ref_src=twsrc%5Etfw\" rel=\"nofollow noopener\" target=\"_blank\"\u003e2017å¹´12æœˆ22æ—¥\u003c/a\u003e\n\u003c/blockquote\u003e\n\n\u003cscript async src=\"https://platform.twitter.com/widgets.js\"\u003e\u003c/script\u003e\n\n\u003cblockquote class=\"twitter-tweet\"\u003e\n\u003cp\u003eãƒ¢ãƒ‡ãƒ«æ¶ˆãˆã‚‹ã®ãƒ¤ãƒã‚¤ï½— / HogeController å†…ã§ã¯ ::User ã¨ User ã¨ã§è‡ªç„¶ã«ä½¿ã„åˆ†ã‘ã‚‰ã‚Œã‚‹ã®ãŒè‰¯ã•ãã†ãªæ„Ÿã˜ã§ã€å†…éƒ¨ã‚¯ãƒ©ã‚¹ã®æ–¹ã¯ find_by_xxx ã¨ã‹ã®ã‚¯ãƒ©ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç½®ãã¨è‰¯ã„ã®ã‹ãªã¨ã€‚(ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å´ã«ä½•ã‹ãŒæ¬²ã—ã„ãªã‚‰ decorator ã¨ã„ã†ä»•çµ„ã¿ãŒæ—¢ã«ã‚ã‚‹\u003c/p\u003eâ€” Takafumi ONAKA (@onk) \u003ca href=\"https://twitter.com/onk/status/944081650849165312?ref_src=twsrc%5Etfw\" rel=\"nofollow noopener\" target=\"_blank\"\u003e2017å¹´12æœˆ22æ—¥\u003c/a\u003e\n\u003c/blockquote\u003e\n\n\u003cscript async src=\"https://platform.twitter.com/widgets.js\"\u003e\u003c/script\u003e\n\n\u003cblockquote class=\"twitter-tweet\"\u003e\n\u003cp\u003eè‰¯ã•ãã†ãªã‚“ã§ã™ãŒé–¢é€£ãƒ†ãƒ¼ãƒ–ãƒ«ã¿ãŸã‚Šã‚¹ã‚³ãƒ¼ãƒ—ç”Ÿã‚„ã—ãŸã‚Šã‚¯ãƒ©ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã‚„ã™ã¨ãªã‚‹ã¨ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ä¸‹ã«ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ç”¨ã®ãƒ¢ãƒ‡ãƒ«ã‚ã‚‹ã¨ä¾¿åˆ©ãã†ã§ã™ã­ï¼(ãƒ‘ã‚¹ãŒapp/models/hoges_controller/user.rbã¿ãŸã„ã«ãªã‚Šãã†ãªã®ã«è‹¥å¹²æŠµæŠ—ã‚ã‚Š)\u003c/p\u003eâ€” Miyagi (@hanachin_) \u003ca href=\"https://twitter.com/hanachin_/status/944084933286412289?ref_src=twsrc%5Etfw\" rel=\"nofollow noopener\" target=\"_blank\"\u003e2017å¹´12æœˆ22æ—¥\u003c/a\u003e\n\u003c/blockquote\u003e\n\n\u003cscript async src=\"https://platform.twitter.com/widgets.js\"\u003e\u003c/script\u003e\n\n\u003cp\u003e1æœˆã®Okinawa.rbã§æœ€è¿‘è©¦ã—ã¦ã‚‹è©±ã‚’ã—ãŸã¨ãƒ„ã‚¤ãƒ¼ãƒˆã—ãŸã‚‰åéŸ¿ã‚’ã„ãŸã ã\u003csup id=\"fnref2\"\u003e\u003ca href=\"#fn2\" rel=\"footnote\" title=\"https://twitter.com/kimihito_/status/960332669954359297\"\u003e2\u003c/a\u003e\u003c/sup\u003e\u003csup id=\"fnref3\"\u003e\u003ca href=\"#fn3\" rel=\"footnote\" title=\"https://twitter.com/kazumalab/status/961824048052281345\"\u003e3\u003c/a\u003e\u003c/sup\u003eè¨˜äº‹ã«ã—ãŸæ¬¡ç¬¬ã§ã™ã€‚\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"ä½•æ°—ãªã„ãƒ¢ãƒ‡ãƒ«ã®å¤‰æ›´ãŒã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã‚’å‚·ã¤ã‘ã‚‹åŸå› \" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BD%95%E6%B0%97%E3%81%AA%E3%81%84%E3%83%A2%E3%83%87%E3%83%AB%E3%81%AE%E5%A4%89%E6%9B%B4%E3%81%8C%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E5%85%A8%E4%BD%93%E3%82%92%E5%82%B7%E3%81%A4%E3%81%91%E3%82%8B%E5%8E%9F%E5%9B%A0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eä½•æ°—ãªã„ãƒ¢ãƒ‡ãƒ«ã®å¤‰æ›´ãŒã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã‚’å‚·ã¤ã‘ã‚‹åŸå› \u003c/h2\u003e\n\n\u003cp\u003eã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è¦æ¨¡ãŒã©ã‚“ãªã«å¤§ããæˆé•·ã—ã¦ã‚‚1ã¤ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã«å¯¾å¿œã™ã‚‹ActiveRecordã®ãƒ¢ãƒ‡ãƒ«ã¯å¸¸ã«1ã¤ã€‚ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ãŒ1ã¤ã®ãƒ¢ãƒ‡ãƒ«ã«ä¾å­˜!\u003cbr\u003e\nãªã®ã§ãƒ¢ãƒ‡ãƒ«ã®æŒ¯ã‚‹èˆã„ã«å½±éŸ¿ãŒå‡ºã‚‹æ©Ÿèƒ½ã‚’ä½¿ã†ã¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã«å½±éŸ¿ãŒã§ã‚‹ã€‚\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"å…·ä½“çš„ã«ã©ã†ã„ã†æ©Ÿèƒ½ã§å•é¡ŒãŒå‡ºã‚„ã™ã„ã‹\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%85%B7%E4%BD%93%E7%9A%84%E3%81%AB%E3%81%A9%E3%81%86%E3%81%84%E3%81%86%E6%A9%9F%E8%83%BD%E3%81%A7%E5%95%8F%E9%A1%8C%E3%81%8C%E5%87%BA%E3%82%84%E3%81%99%E3%81%84%E3%81%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eå…·ä½“çš„ã«ã©ã†ã„ã†æ©Ÿèƒ½ã§å•é¡ŒãŒå‡ºã‚„ã™ã„ã‹\u003c/h2\u003e\n\n\u003cp\u003eRailsã‚ã‚‹ã‚ã‚‹\u003csup id=\"fnref4\"\u003e\u003ca href=\"#fn4\" rel=\"footnote\" title=\"https://www.slideshare.net/tricknotes/rails-possiblestory\"\u003e4\u003c/a\u003e\u003c/sup\u003eã‚’å‚è€ƒã«ã„ãã¤ã‹æŒ™ã’ã¦ã¿ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003edefault_scope\u003c/li\u003e\n\u003cli\u003evalidation\u003c/li\u003e\n\u003cli\u003ecallbacks\u003c/li\u003e\n\u003cli\u003eas_json\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eã©ã‚Œã‚‚ãƒ¢ãƒ‡ãƒ«ã®æŒ¯ã‚‹èˆã„ã«å½±éŸ¿ãŒå‡ºã‚‹ã‚‚ã®ã°ã‹ã‚Šã§ã™ã­ã€‚\u003c/p\u003e\n\n\u003cp\u003eç‰¹ã«default_scopeã«é–¢ã—ã¦ã¯åœ°é›·ãƒ¡ã‚½ãƒƒãƒ‰\u003csup id=\"fnref5\"\u003e\u003ca href=\"#fn5\" rel=\"footnote\" title=\"https://qiita.com/sinsoku/items/9cbdc5304aa3ede4a178\"\u003e5\u003c/a\u003e\u003c/sup\u003eã¨ã‹æ’’ã„ã¦ã¯ã„ã‘ãªã„ç¨®\u003csup id=\"fnref6\"\u003e\u003ca href=\"#fn6\" rel=\"footnote\" title=\"https://qiita.com/juntetsu_tei/items/a1b641f7f3b10d3ae6e1\"\u003e6\u003c/a\u003e\u003c/sup\u003eã¨ã‹evil\u003csup id=\"fnref7\"\u003e\u003ca href=\"#fn7\" rel=\"footnote\" title=\"https://rails-bestpractices.com/posts/2013/06/15/default_scope-is-evil/\"\u003e7\u003c/a\u003e\u003c/sup\u003eãªã©éæ¿€ãªå‘¼ã°ã‚Œæ–¹ã‚’ã•ã‚Œã¦ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"é€ƒã‚Œæ–¹\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%80%83%E3%82%8C%E6%96%B9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eé€ƒã‚Œæ–¹\u003c/h2\u003e\n\n\u003cp\u003eä¸€å¿œãã‚Œãã‚Œè‰²ã€…ãªæ–¹æ³•ã§å¤–ã—ãŸã‚Šã‚¹ã‚­ãƒƒãƒ—å‡ºæ¥ã¾ã™ã€‚\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"default_scope\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#default_scope\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003edefault_scope\u003c/h3\u003e\n\n\u003cul\u003e\n\u003cli\u003eunscopedã§ã‚¹ã‚³ãƒ¼ãƒ—ã‚’å¤–ã™\u003c/li\u003e\n\u003cli\u003ereorder, rewhereãªã©ã§æ¡ä»¶ã‚’å¤‰æ›´ã™ã‚‹\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"validation\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#validation\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003evalidation\u003c/h3\u003e\n\n\u003cul\u003e\n\u003cli\u003evalidationãŒã‹ã‹ã‚‰ãªã„APIã‚„\u003ccode\u003esave(validate: false)\u003c/code\u003eã‚’ä½¿ã†\u003csup id=\"fnref8\"\u003e\u003ca href=\"#fn8\" rel=\"footnote\" title=\"http://guides.rubyonrails.org/active_record_validations.html#skipping-validations\"\u003e8\u003c/a\u003e\u003c/sup\u003e\n\u003c/li\u003e\n\u003cli\u003econtextã‚’è¨­å®šã—ã¦ç‰¹å®šã®å ´åˆã ã‘å®Ÿè¡Œã•ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹\u003ccode\u003esave(context: :account_setup)\u003c/code\u003e\u003csup id=\"fnref9\"\u003e\u003ca href=\"#fn9\" rel=\"footnote\" title=\"http://guides.rubyonrails.org/active_record_validations.html#on\"\u003e9\u003c/a\u003e\u003c/sup\u003e\n\u003c/li\u003e\n\u003cli\u003eç‰¹å®šã®æ¡ä»¶ã«åˆè‡´ã™ã‚‹å ´åˆã—ã‹ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã—ãªã„\u003csup id=\"fnref10\"\u003e\u003ca href=\"#fn10\" rel=\"footnote\" title=\"http://guides.rubyonrails.org/active_record_validations.html#conditional-validation\"\u003e10\u003c/a\u003e\u003c/sup\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"callbacks\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#callbacks\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003ecallbacks\u003c/h3\u003e\n\n\u003cul\u003e\n\u003cli\u003ecallbackãŒå®Ÿè¡Œã•ã‚Œãªã„APIã‚’ä½¿ã†\u003csup id=\"fnref11\"\u003e\u003ca href=\"#fn11\" rel=\"footnote\" title=\"http://guides.rubyonrails.org/active_record_callbacks.html#skipping-callbacks\"\u003e11\u003c/a\u003e\u003c/sup\u003e\n\u003c/li\u003e\n\u003cli\u003eç‰¹å®šã®æ¡ä»¶ã«åˆè‡´ã™ã‚‹å ´åˆã—ã‹ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã—ãªã„\u003csup id=\"fnref12\"\u003e\u003ca href=\"#fn12\" rel=\"footnote\" title=\"http://guides.rubyonrails.org/active_record_callbacks.html#conditional-callbacks\"\u003e12\u003c/a\u003e\u003c/sup\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"as_json\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#as_json\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eas_json\u003c/h3\u003e\n\n\u003cp\u003eActiveRecordã®\u003ccode\u003e:only\u003c/code\u003e, \u003ccode\u003e:except\u003c/code\u003e, \u003ccode\u003e:methods\u003c/code\u003e, \u003ccode\u003e:include\u003c/code\u003eã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã™ã‚‹ã¨ã‚ã‚‹ç¨‹åº¦ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã‚‹\u003csup id=\"fnref13\"\u003e\u003ca href=\"#fn13\" rel=\"footnote\" title=\"http://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html#method-i-as_json\"\u003e13\u003c/a\u003e\u003c/sup\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"é€ƒã‚Œã‚‹ã®ç„¡ç†èª¬\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%80%83%E3%82%8C%E3%82%8B%E3%81%AE%E7%84%A1%E7%90%86%E8%AA%AC\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eé€ƒã‚Œã‚‹ã®ç„¡ç†èª¬\u003c/h2\u003e\n\n\u003cp\u003eã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã§ãƒ¢ãƒ‡ãƒ«1ã¤ã ã¨ãƒ¢ãƒ‡ãƒ«ãŒå¤§ãããªã‚‹ã«ã¤ã‚Œè¤‡é›‘ã«çµ„ã¿åˆã‚ã•ã‚‹ã€‚ãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ã†å ´æ‰€å…¨éƒ¨ã§ã“ã‚Œã‚‰ã®æ©Ÿèƒ½ã‚’æ„è­˜ã—ãªãŒã‚‰æ›¸ãã®ç„¡ç†ã§ã¯...ã€‚\u003cbr\u003e\nã¨ã„ã†ã“ã¨ã§æœ€åˆã‹ã‚‰ä½¿ã‚ãªã„ã»ã†ãŒã‚ˆã„ã®ã§ã¯ã€ã¿ãŸã„ãªçµè«–ã«ãªã‚ŠãŒã¡ã§ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eå˜ç´”ã«Concernã«åˆ‡ã‚Šå‡ºã—ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†ã‘ã¦ã‚‚ãƒ¢ãƒ‡ãƒ«ãŒ1ã¤ã®ã¾ã¾ã§ã¯ãƒ¢ãƒ‡ãƒ«ã®å¤‰æ›´ãŒã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã«å½±éŸ¿ã—ã¾ã™ã€‚\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"ãƒ¢ãƒ‡ãƒ«å…¨ä½“ã«å½±éŸ¿ã™ã‚‹æ©Ÿèƒ½ã‚’ä½¿ã‚ãªã„å ´åˆä»£ã‚ã‚Šã«ä½•ã‚’ä½¿ã†ã®\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%A2%E3%83%87%E3%83%AB%E5%85%A8%E4%BD%93%E3%81%AB%E5%BD%B1%E9%9F%BF%E3%81%99%E3%82%8B%E6%A9%9F%E8%83%BD%E3%82%92%E4%BD%BF%E3%82%8F%E3%81%AA%E3%81%84%E5%A0%B4%E5%90%88%E4%BB%A3%E3%82%8F%E3%82%8A%E3%81%AB%E4%BD%95%E3%82%92%E4%BD%BF%E3%81%86%E3%81%AE\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eãƒ¢ãƒ‡ãƒ«å…¨ä½“ã«å½±éŸ¿ã™ã‚‹æ©Ÿèƒ½ã‚’ä½¿ã‚ãªã„å ´åˆã€ä»£ã‚ã‚Šã«ä½•ã‚’ä½¿ã†ã®?\u003c/h2\u003e\n\n\u003cp\u003eãƒ¬ãƒ¼ãƒ«ã®ä¼¸ã°ã—æ–¹\u003csup id=\"fnref14\"\u003e\u003ca href=\"#fn14\" rel=\"footnote\" title=\"https://speakerdeck.com/willnet/rerufalseshen-basifang\"\u003e14\u003c/a\u003e\u003c/sup\u003eã§ã¯ãƒ¢ãƒ‡ãƒ«ã®è²¬å‹™ã‚’PORO\u003csup id=\"fnref15\"\u003e\u003ca href=\"#fn15\" rel=\"footnote\" title=\"Plain Old Ruby Objectã€ç¶™æ‰¿å…ƒãªã—ã®Objectã‚’ç¶™æ‰¿ã—ã¦ã‚‹ãŸã ã®Rubyã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€class PORO; endã“ã†ã„ã†ã‚„ã¤ã€‚\"\u003e15\u003c/a\u003e\u003c/sup\u003e, FormObject, ServiceObjectã«åˆ†ã‘ã‚‹æ–¹æ³•ãŒç´¹ä»‹ã•ã‚Œã¦ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"activerecordä»¥å¤–ã®å±¤ã¤ãã‚‹ã¨æ„å¤–ã¨é¢å€’\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#activerecord%E4%BB%A5%E5%A4%96%E3%81%AE%E5%B1%A4%E3%81%A4%E3%81%8F%E3%82%8B%E3%81%A8%E6%84%8F%E5%A4%96%E3%81%A8%E9%9D%A2%E5%80%92\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eActiveRecordä»¥å¤–ã®å±¤ã¤ãã‚‹ã¨æ„å¤–ã¨é¢å€’\u003c/h3\u003e\n\n\u003cp\u003eActiveRecordã‚’ä½¿ã†ã¨paramsã§å—ã‘å–ã£ãŸæ–‡å­—åˆ—ã‚’æ¸¡ã™ã ã‘ã§ã„ã„æ„Ÿã˜ã«å‹å¤‰æ›ã—ã¦ãã‚Œã¦ã¹ã‚“ã‚Šã§ã™ã€‚\u003cbr\u003e\nForm Objectãªã©ã‚’åˆ†ã‘ãŸå ´åˆã€ã“ã®ã‚ãŸã‚Šã®å‹å¤‰æ›ã®ã‚³ãƒ¼ãƒ‰ã§ã‹ãªã‚Šè¨˜è¿°é‡ãŒå¢—ãˆãŸã‚Šã—ã¾ã™ã€‚\u003csup id=\"fnref16\"\u003e\u003ca href=\"#fn16\" rel=\"footnote\" title=\"ActiveModel::AttributesãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚Œã°POROã§ã‚‚åŒã˜ã‚ˆã†ã«å‹å¤‰æ›ã§ãã‚‹ã®ã§å•é¡Œãªããªã‚‹ã‹ã‚‚ https://qiita.com/alpaca_taichou/items/bebace92f06af3f32898\"\u003e16\u003c/a\u003e\u003c/sup\u003e\u003cbr\u003e\nãªã®ã§Form Objectã‚’ä½œã‚Šã‚„ã™ãã™ã‚‹ãŸã‚ã®ã¾ãŸåˆ¥ã®gemã‚’å°å…¥ã™ã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã€‚\u003csup id=\"fnref17\"\u003e\u003ca href=\"#fn17\" rel=\"footnote\" title=\"å­¦ç¿’ã‚³ã‚¹ãƒˆğŸ’ª\"\u003e17\u003c/a\u003e\u003c/sup\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"ä¾‹ãˆã°ãƒ¢ãƒ‡ãƒ«ã®ã‚¯ãƒ©ã‚¹ã‚’åˆ†ã‘ã‚‹\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BE%8B%E3%81%88%E3%81%B0%E3%83%A2%E3%83%87%E3%83%AB%E3%81%AE%E3%82%AF%E3%83%A9%E3%82%B9%E3%82%92%E5%88%86%E3%81%91%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eä¾‹ãˆã°ãƒ¢ãƒ‡ãƒ«ã®ã‚¯ãƒ©ã‚¹ã‚’åˆ†ã‘ã‚‹\u003c/h2\u003e\n\n\u003cp\u003eãƒ¢ãƒ‡ãƒ«ã®æŒ¯ã‚‹èˆã„ã®å½±éŸ¿ç¯„å›²ãŒã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã«åŠã‚“ã§ã—ã¾ã†ã®ãŒã¤ã‚‰ã¿ã®åŸå› ãªã‚‰ã€è²¬å‹™ã”ã¨ã«ãƒ¢ãƒ‡ãƒ«ã”ã¨åˆ¥ã€…ã«åˆ†ã‘ã‚‹ã¨ç–ã«ãªã£ã¦ä¾¿åˆ©ã§ã¯?\u003cbr\u003e\nä»¥ä¸‹ã§æ™®æ®µã®é–‹ç™ºã®ä¸­ã§ActiveRecordã®ã‚¯ãƒ©ã‚¹ã‚’åˆ†ã‘ã‚‹ä¾‹ã‚’æŒ™ã’ã¾ã™ã€‚\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"ä¾‹-ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œæ™‚ã«ä½¿ã†ãƒ¢ãƒ‡ãƒ«\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BE%8B-%E3%83%9E%E3%82%A4%E3%82%B0%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E5%AE%9F%E8%A1%8C%E6%99%82%E3%81%AB%E4%BD%BF%E3%81%86%E3%83%A2%E3%83%87%E3%83%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eä¾‹: ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œæ™‚ã«ä½¿ã†ãƒ¢ãƒ‡ãƒ«\u003c/h2\u003e\n\n\u003cp\u003eãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆæ™‚ã®ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ\u003csup id=\"fnref18\"\u003e\u003ca href=\"#fn18\" rel=\"footnote\" title=\"https://qiita.com/nay3/items/ef773006cd7f815a07cd\"\u003e18\u003c/a\u003e\u003c/sup\u003eã‹ã‚‰å¼•ç”¨ã—ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003eapp/models ä¸‹ã®ãƒ¢ãƒ‡ãƒ«ã‚¯ãƒ©ã‚¹ãªã©ã€ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã®å¤–éƒ¨ã«å®šç¾©ã—ã¦ã„ã‚‹ã€å°†æ¥å®Ÿè£…ã‚’å¤‰æ›´ã™ã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹ã‚¯ãƒ©ã‚¹ã‚’ç›´æ¥åˆ©ç”¨ã™ã‚‹ã“ã¨ã¯ç¦ã˜æ‰‹ã¨è€ƒãˆãŸæ–¹ãŒã„ã„ã§ã—ã‚‡ã†ã€‚\u003cbr\u003e\nãªãœã‹ã¨ã„ã†ã¨ã€ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã„ã†ã®ã¯ã€æœªæ¥ã«ã‚ãŸã£ã¦æœ«æ°¸ãã€æ›¸ã„ãŸã¨ãã®æ„å›³ã©ãŠã‚Šã«å‹•ã å¿…è¦ãŒã‚ã‚‹ã‹ã‚‰ã§ã™ã€‚è¨€ã„æ›ãˆã‚Œã°ã€ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚³ãƒ¼ãƒ‰ã¯ã€ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«å†…ã§é–‰ã˜ã¦ã„ã¦ã€å‡çµã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒæœ›ã¾ã—ã„ ã®ã§ã™ã€‚\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"å•é¡Œ-1ã¤ã®ã‚¯ãƒ©ã‚¹ã«2ã¤ã®è²¬å‹™\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%95%8F%E9%A1%8C-1%E3%81%A4%E3%81%AE%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AB2%E3%81%A4%E3%81%AE%E8%B2%AC%E5%8B%99\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eå•é¡Œ: 1ã¤ã®ã‚¯ãƒ©ã‚¹ã«2ã¤ã®è²¬å‹™\u003c/h3\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"rb\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"c1\"\u003e# app/models/user.rb\u003c/span\u003e\n\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eUser\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"no\"\u003eApplicationRecord\u003c/span\u003e\n  \u003cspan class=\"no\"\u003eUNKNOWN_BIRTHDAY\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"no\"\u003eDate\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e9999\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"rb\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"nb\"\u003erequire\u003c/span\u003e \u003cspan class=\"s1\"\u003e'date'\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eAddBirthdayDateToUsers\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"no\"\u003eActiveRecord\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"no\"\u003eMigration\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mf\"\u003e5.1\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eup\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eadd_column\u003c/span\u003e \u003cspan class=\"ss\"\u003e:users\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:birthday_date\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:date\u003c/span\u003e\n    \u003cspan class=\"no\"\u003eUser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ereset_column_information\u003c/span\u003e\n    \u003cspan class=\"no\"\u003eUser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003efind_each\u003c/span\u003e \u003cspan class=\"k\"\u003edo\u003c/span\u003e \u003cspan class=\"o\"\u003e|\u003c/span\u003e\u003cspan class=\"n\"\u003eu\u003c/span\u003e\u003cspan class=\"o\"\u003e|\u003c/span\u003e\n      \u003cspan class=\"n\"\u003ebirthday_date\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"no\"\u003eDate\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eu\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eyear\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eu\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003emonth\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eu\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eday\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003erescue\u003c/span\u003e \u003cspan class=\"kp\"\u003enil\u003c/span\u003e\n      \u003cspan class=\"n\"\u003eu\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eupdate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ss\"\u003ebirthday_date: \u003c/span\u003e\u003cspan class=\"n\"\u003ebirthday_date\u003c/span\u003e \u003cspan class=\"o\"\u003e||\u003c/span\u003e \u003cspan class=\"no\"\u003eUser\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"no\"\u003eUNKNOWN_BIRTHDAY\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n    \u003cspan class=\"n\"\u003echange_column_null\u003c/span\u003e \u003cspan class=\"ss\"\u003e:users\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:birthday_date\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kp\"\u003efalse\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eä¸Šè¨˜ã®ã‚ˆã†ã«ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œæ™‚ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§å®šç¾©ã—ãŸActiveRecordã®ã‚¯ãƒ©ã‚¹ã‚’å‚ç…§ã™ã‚‹ã¨ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã«ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚³ãƒ¼ãƒ‰ãŒä¾å­˜ã—ã€1ã¤ã®ã‚¯ãƒ©ã‚¹ã«2ã¤ã®è²¬å‹™ãŒç”Ÿã¾ã‚Œã¾ã™ğŸ’ª\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã®è²¬å‹™\u003c/li\u003e\n\u003cli\u003eãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã®è²¬å‹™\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eã“ã®å ´åˆã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã®ä¿®æ­£ãŒãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œã«å½±éŸ¿ã‚’åŠã¼ã™å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚\u003cbr\u003e\nå…·ä½“çš„ãªä¾‹ã‚’Rails ã§ä¿¡é ¼æ€§ã®é«˜ã„ Migration ã‚’æ›¸ãã«ã¯\u003csup id=\"fnref19\"\u003e\u003ca href=\"#fn19\" rel=\"footnote\" title=\"https://qiita.com/shuhei/items/c0a6c3e29c87de6dff63#migration-%E6%AF%8E%E3%81%AB%E5%B0%82%E7%94%A8%E3%81%AE-model-%E3%82%92%E7%94%A8%E6%84%8F%E3%81%99%E3%82%8B\"\u003e19\u003c/a\u003e\u003c/sup\u003eã‹ã‚‰å¼•ç”¨ã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªæ„Ÿã˜ã§ã™ã€‚\u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003eç‰¹ã« Model ã‚’ä½¿ã£ã¦ãƒ‡ãƒ¼ã‚¿ã®ç§»è¡Œã‚’è¡Œã†å ´åˆã¯æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚create, update, where ãªã©ä¸€éƒ¨ã®ãƒ¡ã‚½ãƒƒãƒ‰ã—ã‹ä½¿ã‚ãªã„ã¤ã‚‚ã‚Šã§ã¤ã„ã¤ã„ãã®ã¾ã¾ä½¿ã£ã¦ã—ã¾ã„ãŒã¡ã§ã™ãŒã€hook ã‚„ default_scopeã€validation ãªã©ã®å¤‰åŒ–ã«ã‚ˆã£ã¦çŸ¥ã‚‰ã¬ã†ã¡ã«æŒ™å‹•ãŒå¤‰ã‚ã£ã¦ã—ã¾ã„ã¾ã™ã€‚Migration æ¯ã«å°‚ç”¨ã® Model ã‚’ä½œã‚Šã¾ã—ã‚‡ã†ã€‚\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"è§£æ±ºç­–-ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã®ãƒ¢ãƒ‡ãƒ«ã‚’ã¤ãã‚‹\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A7%A3%E6%B1%BA%E7%AD%96-%E3%83%9E%E3%82%A4%E3%82%B0%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E7%94%A8%E3%81%AE%E3%83%A2%E3%83%87%E3%83%AB%E3%82%92%E3%81%A4%E3%81%8F%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eè§£æ±ºç­–: ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã®ãƒ¢ãƒ‡ãƒ«ã‚’ã¤ãã‚‹\u003c/h3\u003e\n\n\u003cp\u003eãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ä¸­ã§ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè¡Œã«å¿…è¦ãªè²¬å‹™ã ã‘ã‚’æŒã£ãŸActiveRecordã®ã‚¯ãƒ©ã‚¹ã‚’å®£è¨€ã—ã¾ã™ã€‚ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã®å¤‰æ›´ãŒãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã«å½±éŸ¿ã™ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚\u003csup id=\"fnref20\"\u003e\u003ca href=\"#fn20\" rel=\"footnote\" title=\"ActiveRecordã§ã¯ãƒ†ãƒ¼ãƒ–ãƒ«ã”ã¨ã«ã‚¹ã‚­ãƒ¼ãƒã®æƒ…å ±ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ã¦ãŠã‚Šã‚¯ãƒ©ã‚¹ãŒåˆ†ã‹ã‚Œã¦ã„ã¦ã‚‚å½±éŸ¿ãŒå‡ºã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚reset_column_informationã‚’å‘¼ã‚“ã§ã„ã‚‹ã®ã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢ã™ã‚‹ãŸã‚ã§ã™ã€‚è©³ã—ãã¯onkã•ã‚“ã®è¨˜äº‹ã‚’èª­ã¿ã¾ã—ã‚‡ã†ã€‚ https://blog.onk.ninja/2017/10/18/use_reset_column_information\"\u003e20\u003c/a\u003e\u003c/sup\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"rb\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"nb\"\u003erequire\u003c/span\u003e \u003cspan class=\"s1\"\u003e'date'\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eAddBirthdayDateToUsers\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"no\"\u003eActiveRecord\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"no\"\u003eMigration\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mf\"\u003e5.1\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eUser\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"no\"\u003eActiveRecord\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"no\"\u003eBase\u003c/span\u003e\n    \u003cspan class=\"no\"\u003eUNKNOWN_BIRTHDAY\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"no\"\u003eDate\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e9999\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eup\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eadd_column\u003c/span\u003e \u003cspan class=\"ss\"\u003e:users\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:birthday_date\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:date\u003c/span\u003e\n    \u003cspan class=\"no\"\u003eUser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003efind_each\u003c/span\u003e \u003cspan class=\"k\"\u003edo\u003c/span\u003e \u003cspan class=\"o\"\u003e|\u003c/span\u003e\u003cspan class=\"n\"\u003eu\u003c/span\u003e\u003cspan class=\"o\"\u003e|\u003c/span\u003e\n      \u003cspan class=\"n\"\u003ebirthday_date\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"no\"\u003eDate\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eu\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eyear\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eu\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003emonth\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eu\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eday\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003erescue\u003c/span\u003e \u003cspan class=\"kp\"\u003enil\u003c/span\u003e\n      \u003cspan class=\"n\"\u003eu\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eupdate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ss\"\u003ebirthday_date: \u003c/span\u003e\u003cspan class=\"n\"\u003ebirthday_date\u003c/span\u003e \u003cspan class=\"o\"\u003e||\u003c/span\u003e \u003cspan class=\"no\"\u003eUser\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"no\"\u003eUNKNOWN_BIRTHDAY\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n    \u003cspan class=\"n\"\u003echange_column_null\u003c/span\u003e \u003cspan class=\"ss\"\u003e:users\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:birthday_date\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kp\"\u003efalse\u003c/span\u003e\n    \u003cspan class=\"no\"\u003eUser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ereset_column_information\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003edown\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eremove_column\u003c/span\u003e \u003cspan class=\"ss\"\u003e:users\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:birthday_date\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"è²¬å‹™ã«å¿œã˜ã¦ãƒ¢ãƒ‡ãƒ«ã‚’åˆ†ã‘ã‚‹ã¨ã‚ˆã„ã®ã§ã¯\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%B2%AC%E5%8B%99%E3%81%AB%E5%BF%9C%E3%81%98%E3%81%A6%E3%83%A2%E3%83%87%E3%83%AB%E3%82%92%E5%88%86%E3%81%91%E3%82%8B%E3%81%A8%E3%82%88%E3%81%84%E3%81%AE%E3%81%A7%E3%81%AF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eè²¬å‹™ã«å¿œã˜ã¦ãƒ¢ãƒ‡ãƒ«ã‚’åˆ†ã‘ã‚‹ã¨ã‚ˆã„ã®ã§ã¯\u003c/h2\u003e\n\n\u003cp\u003eä¸Šè¨˜ã®ä¾‹ã§ã¯ActiveRecordã®ãƒ¢ãƒ‡ãƒ«ã‚’ã‚ã‘ãŸä¾‹ã‚’ç´¹ä»‹ã—ã¾ã—ãŸã€‚\u003cbr\u003e\nãƒ¢ãƒ‡ãƒ«ã‚’åˆ†ã‘ãŸçµæœã€ãƒ¢ãƒ‡ãƒ«ãŒå˜ä¸€è²¬ä»»ã«ãªã‚Šã€ãƒ¢ãƒ‡ãƒ«ã¸ã®å¤‰æ›´ãŒåˆ¥ã®ãƒ¢ãƒ‡ãƒ«ã‚„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã«å½±éŸ¿ã—ãªããªã‚Šã¾ã—ãŸã€‚\u003cbr\u003e\nãµã¤ã†ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚³ãƒ¼ãƒ‰ã‚‚ç„¡ç†ã—ã¦1ã¤ã®ãƒ¢ãƒ‡ãƒ«ã«å…¨éƒ¨è©°ã‚è¾¼ã¾ãšã€ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚ˆã†ã«ActiveRecordã®ãƒ¢ãƒ‡ãƒ«ã‚’åˆ†ã‘ã‚‹ã¨ã‚ˆã„ã®ã§ã¯?\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"å½±éŸ¿ç¯„å›²ãŒç‹­ããªã‚‹\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%BD%B1%E9%9F%BF%E7%AF%84%E5%9B%B2%E3%81%8C%E7%8B%AD%E3%81%8F%E3%81%AA%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eå½±éŸ¿ç¯„å›²ãŒç‹­ããªã‚‹\u003c/h3\u003e\n\n\u003cp\u003eç›®çš„ã”ã¨ã«ãƒ¢ãƒ‡ãƒ«ã‚’å®šç¾©ã™ã‚‹ã¨å½±éŸ¿ç¯„å›²ãŒã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã‹ã‚‰ç‹­ã¾ã‚Šã¾ã™ã€‚\u003cbr\u003e\n\u003ccode\u003edefault_scope\u003c/code\u003eã‚„\u003ccode\u003evalidation\u003c/code\u003eã‚„\u003ccode\u003ecallbacks\u003c/code\u003eã‚„\u003ccode\u003eas_json\u003c/code\u003eã‚’æ›¸ãæ•£ã‚‰ã‹ã—ã¦ã‚‚ã€ä»–ã®ãƒ¢ãƒ‡ãƒ«ã«å½±éŸ¿ã—ãªã„ã®ã§ä¾¿åˆ©ãã†ã§ã™ã€‚\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"railsã®æ©Ÿèƒ½ãŒãã®ã¾ã¾ä½¿ãˆã¦ä¾¿åˆ©\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#rails%E3%81%AE%E6%A9%9F%E8%83%BD%E3%81%8C%E3%81%9D%E3%81%AE%E3%81%BE%E3%81%BE%E4%BD%BF%E3%81%88%E3%81%A6%E4%BE%BF%E5%88%A9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eRailsã®æ©Ÿèƒ½ãŒãã®ã¾ã¾ä½¿ãˆã¦ä¾¿åˆ©\u003c/h3\u003e\n\n\u003cp\u003eãµã¤ã†ã®ActiveRecordã®ã‚¯ãƒ©ã‚¹ãªã®ã§å‹å¤‰æ›ã‚„æ…£ã‚Œè¦ªã—ã‚“ã APIã‚’ãã®ã¾ã¾ä½¿ãˆã¾ã™ã€‚\u003cbr\u003e\nä»–ã®gemã®ä½¿ã„æ–¹ã‚’è¦šãˆã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"ã‚„ã‚Šã‹ãŸ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%84%E3%82%8A%E3%81%8B%E3%81%9F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eã‚„ã‚Šã‹ãŸ\u003c/h2\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"ä¾‹-ç™»éŒ²ãŒå®Œäº†ã—ãŸã¨ããƒ¡ãƒ¼ãƒ«ã‚’é€ã‚ŠãŸã„\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BE%8B-%E7%99%BB%E9%8C%B2%E3%81%8C%E5%AE%8C%E4%BA%86%E3%81%97%E3%81%9F%E3%81%A8%E3%81%8D%E3%83%A1%E3%83%BC%E3%83%AB%E3%82%92%E9%80%81%E3%82%8A%E3%81%9F%E3%81%84\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eä¾‹: ç™»éŒ²ãŒå®Œäº†ã—ãŸã¨ããƒ¡ãƒ¼ãƒ«ã‚’é€ã‚ŠãŸã„\u003c/h3\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eapp/models/signup_user.rb\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eSignupUser\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"no\"\u003eUser\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eafter_save\u003c/span\u003e \u003cspan class=\"ss\"\u003e:send_signup_email\u003c/span\u003e\n\n  \u003cspan class=\"kp\"\u003eprivate\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003esend_signup_email\u003c/span\u003e\n    \u003cspan class=\"no\"\u003eUserMailer\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003esignup\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nb\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003edeliver_later\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eapp/controllers/signup_controller.rb\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eSignupController\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"no\"\u003eApplicationController\u003c/span\u003e\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003ecreate\u003c/span\u003e\n    \u003cspan class=\"n\"\u003euser\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"no\"\u003eSignupUser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eparams\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003euser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003esave\u003c/span\u003e\n      \u003cspan class=\"n\"\u003eredirect_to\u003c/span\u003e \u003cspan class=\"n\"\u003eroot_path\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n      \u003cspan class=\"n\"\u003erender\u003c/span\u003e \u003cspan class=\"s1\"\u003e'new'\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"ä¾‹-å…¬é–‹ã•ã‚Œã¦ã„ã‚‹è¨˜äº‹ã ã‘ã‚’è¡¨ç¤ºã—ãŸã„\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BE%8B-%E5%85%AC%E9%96%8B%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E8%A8%98%E4%BA%8B%E3%81%A0%E3%81%91%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%97%E3%81%9F%E3%81%84\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eä¾‹: å…¬é–‹ã•ã‚Œã¦ã„ã‚‹è¨˜äº‹ã ã‘ã‚’è¡¨ç¤ºã—ãŸã„\u003c/h3\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eapp/models/article.rb\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eArticle\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"no\"\u003eApplicationRecord\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eapp/models/published_article.rb\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003ePublishedArticle\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"no\"\u003eApplicationRecord\u003c/span\u003e\n  \u003cspan class=\"nb\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003etable_name\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"articles\"\u003c/span\u003e\n  \u003cspan class=\"n\"\u003edefault_scope\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003ewhere\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ss\"\u003epublished: \u003c/span\u003e\u003cspan class=\"kp\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eapp/controllers/articles_controller.rb\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eArticlesController\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"no\"\u003eApplicationController\u003c/span\u003e\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eindex\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e# ä¸€è¦§ç”¨\u003c/span\u003e\n    \u003cspan class=\"vi\"\u003e@articles\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"no\"\u003ePublishedArticle\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eorder\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ss\"\u003epublished_at: :desc\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e# æ–°è¦ä½œæˆç”¨\u003c/span\u003e\n    \u003cspan class=\"vi\"\u003e@new_article\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"no\"\u003eArticle\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"ä¾‹-ä½œã‚‹ã¨ãã ã‘é–¢é€£ãƒ¬ã‚³ãƒ¼ãƒ‰ã®presenceã‚’ç¢ºèªã—ãŸã„\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BE%8B-%E4%BD%9C%E3%82%8B%E3%81%A8%E3%81%8D%E3%81%A0%E3%81%91%E9%96%A2%E9%80%A3%E3%83%AC%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AEpresence%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%97%E3%81%9F%E3%81%84\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eä¾‹: ä½œã‚‹ã¨ãã ã‘é–¢é€£ãƒ¬ã‚³ãƒ¼ãƒ‰ã®presenceã‚’ç¢ºèªã—ãŸã„\u003c/h3\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eapp/models/article.rb\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eArticle\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"no\"\u003eApplicationRecord\u003c/span\u003e\n  \u003cspan class=\"n\"\u003ebelongs_to\u003c/span\u003e \u003cspan class=\"ss\"\u003e:author\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003eoptional: \u003c/span\u003e\u003cspan class=\"kp\"\u003etrue\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eapp/models/new_article.rb\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eNewArticle\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"no\"\u003eArticle\u003c/span\u003e\n  \u003cspan class=\"nb\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003etable_name\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"articles\"\u003c/span\u003e\n  \u003cspan class=\"n\"\u003evalidates\u003c/span\u003e \u003cspan class=\"ss\"\u003e:author\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003epresence: \u003c/span\u003e\u003cspan class=\"kp\"\u003etrue\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eapp/controllers/articles_controller.rb\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eArticlesController\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"no\"\u003eApplicationController\u003c/span\u003e\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003ecreate\u003c/span\u003e\n    \u003cspan class=\"vi\"\u003e@new_article\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"no\"\u003eNewArticle\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eparams\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"vi\"\u003e@new_article\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003esave\u003c/span\u003e\n      \u003cspan class=\"n\"\u003eredirect_to\u003c/span\u003e \u003cspan class=\"vi\"\u003e@new_article\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n      \u003cspan class=\"n\"\u003erender\u003c/span\u003e \u003cspan class=\"s1\"\u003e'new'\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"ã¾ã¨ã‚\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eã¾ã¨ã‚\u003c/h2\u003e\n\n\u003cp\u003eã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã§1ã¤ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã«å¯¾å¿œã™ã‚‹ActiveRecordã®ãƒ¢ãƒ‡ãƒ«ãŒ1ã¤ã ã¨ãƒ¢ãƒ‡ãƒ«å…¨ä½“ã«å½±éŸ¿ã§ã‚‹æ©Ÿèƒ½ãŒã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã«å½±éŸ¿ã§ã¦ã¤ã‚‰ã„ã€‚\u003cbr\u003e\n\u003ccode\u003edefault_scope\u003c/code\u003eã‚„\u003ccode\u003evalidation\u003c/code\u003eã‚„\u003ccode\u003ecallbacks\u003c/code\u003eã‚„\u003ccode\u003eas_json\u003c/code\u003eãªã©ãƒ¢ãƒ‡ãƒ«å…¨ä½“ã«å½±éŸ¿ãŒå‡ºã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã§ã¤ã‚‰ã¿ãŒç”Ÿã¾ã‚Œã‚‹ã®ã¯ã€ãã‚Œã‚‰ã®æ©Ÿèƒ½è‡ªä½“ãŒæ‚ªã„ã‚ã‘ã§ã¯ãªãã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã§1ãƒ¢ãƒ‡ãƒ«ã‚’å…±æœ‰ã—ã¦ã„ã‚‹ã®ãŒåŸå› ã§ã¯ãªã„ã‹?\u003cbr\u003e\nã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æ§˜ã€…ãªå ´é¢ã§ã®è²¬å‹™ã‚’1ã¤ã®ActiveRecordã®ãƒ¢ãƒ‡ãƒ«ã«è©°ã‚è¾¼ã‚€ã¨ã¤ã‚‰ã„ã®ã§ã€è²¬å‹™ã«å¿œã˜ã¦åŒã˜ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å‚ç…§ã™ã‚‹ActiveRecordã®ãƒ¢ãƒ‡ãƒ«ã‚’åˆ†ã‘ã‚‹ã¨ã‚ˆã„ã®ã§ã¯ã€å½±éŸ¿ç¯„å›²ãŒç‹­ã¾ã‚‹ã—ActiveRecordã®æ©Ÿèƒ½ãŒãã®ã¾ã¾ä½¿ãˆã¦ä¾¿åˆ©!ã¨ã„ã†ã”ææ¡ˆã§ã—ãŸã€‚\u003c/p\u003e\n\n\u003cp\u003e1ã¤ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã«å¯¾å¿œã™ã‚‹ActiveRecordã®ãƒ¢ãƒ‡ãƒ«ã‚’åˆ†ã‘ã‚‹ã®ã¯ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚„ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ãªã©ã§æ—¢ã«ã‚„ã£ã¦ã„ã‚‹äººã‚‚å¤šã„ã¨æ€ã„ã¾ã™ãŒã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã§ã‚‚åˆ†ã‘ã¦ã“ğŸ’ª\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"æ‡¸å¿µ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%87%B8%E5%BF%B5\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eæ‡¸å¿µ\u003c/h2\u003e\n\n\u003cp\u003eæœ€è¿‘ã®è¶£å‘³ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¡ã‚‡ã£ã¨è©¦ã—ãŸæ„Ÿã˜ã‚ˆã•ãã†ã§ã—ãŸãŒå¤§ãã„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ãªã‚‹ã¨ã¾ãŸåˆ¥ã®ã¤ã‚‰ã¿ãŒç™ºç”Ÿã—ãã†ã€‚\u003csup id=\"fnref21\"\u003e\u003ca href=\"#fn21\" rel=\"footnote\" title=\"è¤‡é›‘ãªå®Ÿæ¥­å‹™ã§ã‚„ã‚‹ã¨å½±éŸ¿ç¯„å›²ãŒã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã‹ã‚‰ç‰¹å®šã®ãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ã†æ©Ÿèƒ½ã«å¤‰ã‚ã‚‹ã ã‘ã§çµå±€ãƒ¢ãƒ‡ãƒ«ã‚¯ãƒ©ã‚¹ãŒå¢—ãˆãŸåˆ†ãƒ¡ãƒ³ãƒ†ã‚³ã‚¹ãƒˆå¢—ãˆãŸã‚Šã€åŒã˜ãƒ†ãƒ¼ãƒ–ãƒ«ã«å¯¾ã™ã‚‹æ“ä½œãŒè¤‡æ•°ã®ãƒ¢ãƒ‡ãƒ«ã«æ•£ã‚‰ã°ã£ã¦ã—ã¾ã„ãã†(concernã§ã¾ã¨ã‚ã¦ã‚ã’ã‚Œã°å†åˆ©ç”¨ã§ããã†ã§ã™ãŒ)ã€ã“ã‚Œã¯Formã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«åˆ†ã‘ã¦ã‚‚åŒã˜ã‹ãªã€‚\"\u003e21\u003c/a\u003e\u003c/sup\u003e\u003c/p\u003e\n\n\u003cdiv class=\"footnotes\"\u003e\n\u003chr\u003e\n\u003col\u003e\n\n\u003cli id=\"fn1\"\u003e\n\u003cp\u003edocker-composeã§ç’°å¢ƒã‚’æ•´ãˆãŸã‚Šã€SQLã§i18nã—ãŸæ–‡å­—åˆ—ã‚’jsonã¨ã—ã¦renderã—ã¦ARã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹çµŒç”±ã›ãšã«è¿”ã—ãŸã‚Šã€ä»Šå›è¨˜äº‹ã«ã—ãŸARã®ãƒ¢ãƒ‡ãƒ«ã‚’åˆ†ã‘ã‚‹è¨­è¨ˆãªã©æ™®æ®µä»•äº‹ã§ã‚„ã‚‰ãªã„å®Ÿé¨“çš„ãªã“ã¨ã‚’è¶£å‘³ã§ã‚„ã£ã¦ã„ã¾ã™Â \u003ca href=\"#fnref1\"\u003eâ†©\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\n\u003cli id=\"fn2\"\u003e\n\u003cp\u003e\u003ca href=\"https://twitter.com/kimihito_/status/960332669954359297\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://twitter.com/kimihito_/status/960332669954359297\u003c/a\u003eÂ \u003ca href=\"#fnref2\"\u003eâ†©\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\n\u003cli id=\"fn3\"\u003e\n\u003cp\u003e\u003ca href=\"https://twitter.com/kazumalab/status/961824048052281345\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://twitter.com/kazumalab/status/961824048052281345\u003c/a\u003eÂ \u003ca href=\"#fnref3\"\u003eâ†©\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\n\u003cli id=\"fn4\"\u003e\n\u003cp\u003e\u003ca href=\"https://www.slideshare.net/tricknotes/rails-possiblestory\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://www.slideshare.net/tricknotes/rails-possiblestory\u003c/a\u003eÂ \u003ca href=\"#fnref4\"\u003eâ†©\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\n\u003cli id=\"fn5\"\u003e\n\u003cp\u003e\u003ca href=\"https://qiita.com/sinsoku/items/9cbdc5304aa3ede4a178\" class=\"autolink\" id=\"reference-15e7594580cb05dc6319\"\u003ehttps://qiita.com/sinsoku/items/9cbdc5304aa3ede4a178\u003c/a\u003eÂ \u003ca href=\"#fnref5\"\u003eâ†©\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\n\u003cli id=\"fn6\"\u003e\n\u003cp\u003e\u003ca href=\"https://qiita.com/juntetsu_tei/items/a1b641f7f3b10d3ae6e1\" class=\"autolink\" id=\"reference-41fd174e82ce0539f3ba\"\u003ehttps://qiita.com/juntetsu_tei/items/a1b641f7f3b10d3ae6e1\u003c/a\u003eÂ \u003ca href=\"#fnref6\"\u003eâ†©\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\n\u003cli id=\"fn7\"\u003e\n\u003cp\u003e\u003ca href=\"https://rails-bestpractices.com/posts/2013/06/15/default_scope-is-evil/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://rails-bestpractices.com/posts/2013/06/15/default_scope-is-evil/\u003c/a\u003eÂ \u003ca href=\"#fnref7\"\u003eâ†©\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\n\u003cli id=\"fn8\"\u003e\n\u003cp\u003e\u003ca href=\"http://guides.rubyonrails.org/active_record_validations.html#skipping-validations\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://guides.rubyonrails.org/active_record_validations.html#skipping-validations\u003c/a\u003eÂ \u003ca href=\"#fnref8\"\u003eâ†©\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\n\u003cli id=\"fn9\"\u003e\n\u003cp\u003e\u003ca href=\"http://guides.rubyonrails.org/active_record_validations.html#on\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://guides.rubyonrails.org/active_record_validations.html#on\u003c/a\u003eÂ \u003ca href=\"#fnref9\"\u003eâ†©\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\n\u003cli id=\"fn10\"\u003e\n\u003cp\u003e\u003ca href=\"http://guides.rubyonrails.org/active_record_validations.html#conditional-validation\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://guides.rubyonrails.org/active_record_validations.html#conditional-validation\u003c/a\u003eÂ \u003ca href=\"#fnref10\"\u003eâ†©\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\n\u003cli id=\"fn11\"\u003e\n\u003cp\u003e\u003ca href=\"http://guides.rubyonrails.org/active_record_callbacks.html#skipping-callbacks\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://guides.rubyonrails.org/active_record_callbacks.html#skipping-callbacks\u003c/a\u003eÂ \u003ca href=\"#fnref11\"\u003eâ†©\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\n\u003cli id=\"fn12\"\u003e\n\u003cp\u003e\u003ca href=\"http://guides.rubyonrails.org/active_record_callbacks.html#conditional-callbacks\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://guides.rubyonrails.org/active_record_callbacks.html#conditional-callbacks\u003c/a\u003eÂ \u003ca href=\"#fnref12\"\u003eâ†©\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\n\u003cli id=\"fn13\"\u003e\n\u003cp\u003e\u003ca href=\"http://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html#method-i-as_json\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html#method-i-as_json\u003c/a\u003eÂ \u003ca href=\"#fnref13\"\u003eâ†©\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\n\u003cli id=\"fn14\"\u003e\n\u003cp\u003e\u003ca href=\"https://speakerdeck.com/willnet/rerufalseshen-basifang\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://speakerdeck.com/willnet/rerufalseshen-basifang\u003c/a\u003eÂ \u003ca href=\"#fnref14\"\u003eâ†©\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\n\u003cli id=\"fn15\"\u003e\n\u003cp\u003ePlain Old Ruby Objectã€ç¶™æ‰¿å…ƒãªã—ã®Objectã‚’ç¶™æ‰¿ã—ã¦ã‚‹ãŸã ã®Rubyã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€\u003ccode\u003eclass PORO; end\u003c/code\u003eã“ã†ã„ã†ã‚„ã¤ã€‚Â \u003ca href=\"#fnref15\"\u003eâ†©\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\n\u003cli id=\"fn16\"\u003e\n\u003cp\u003e\u003ccode\u003eActiveModel::Attributes\u003c/code\u003eãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚Œã°POROã§ã‚‚åŒã˜ã‚ˆã†ã«å‹å¤‰æ›ã§ãã‚‹ã®ã§å•é¡Œãªããªã‚‹ã‹ã‚‚ \u003ca href=\"https://qiita.com/alpaca_taichou/items/bebace92f06af3f32898\" class=\"autolink\" id=\"reference-3a344685bc9f5b77b84a\"\u003ehttps://qiita.com/alpaca_taichou/items/bebace92f06af3f32898\u003c/a\u003eÂ \u003ca href=\"#fnref16\"\u003eâ†©\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\n\u003cli id=\"fn17\"\u003e\n\u003cp\u003eå­¦ç¿’ã‚³ã‚¹ãƒˆğŸ’ªÂ \u003ca href=\"#fnref17\"\u003eâ†©\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\n\u003cli id=\"fn18\"\u003e\n\u003cp\u003e\u003ca href=\"https://qiita.com/nay3/items/ef773006cd7f815a07cd\" class=\"autolink\" id=\"reference-d7d001c4ffba0f327bf4\"\u003ehttps://qiita.com/nay3/items/ef773006cd7f815a07cd\u003c/a\u003eÂ \u003ca href=\"#fnref18\"\u003eâ†©\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\n\u003cli id=\"fn19\"\u003e\n\u003cp\u003e\u003ca href=\"https://qiita.com/shuhei/items/c0a6c3e29c87de6dff63#migration-%E6%AF%8E%E3%81%AB%E5%B0%82%E7%94%A8%E3%81%AE-model-%E3%82%92%E7%94%A8%E6%84%8F%E3%81%99%E3%82%8B\" class=\"autolink\" id=\"reference-99bb854008cbaab90c71\"\u003ehttps://qiita.com/shuhei/items/c0a6c3e29c87de6dff63#migration-%E6%AF%8E%E3%81%AB%E5%B0%82%E7%94%A8%E3%81%AE-model-%E3%82%92%E7%94%A8%E6%84%8F%E3%81%99%E3%82%8B\u003c/a\u003eÂ \u003ca href=\"#fnref19\"\u003eâ†©\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\n\u003cli id=\"fn20\"\u003e\n\u003cp\u003eActiveRecordã§ã¯ãƒ†ãƒ¼ãƒ–ãƒ«ã”ã¨ã«ã‚¹ã‚­ãƒ¼ãƒã®æƒ…å ±ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ã¦ãŠã‚Šã‚¯ãƒ©ã‚¹ãŒåˆ†ã‹ã‚Œã¦ã„ã¦ã‚‚å½±éŸ¿ãŒå‡ºã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚\u003ccode\u003ereset_column_information\u003c/code\u003eã‚’å‘¼ã‚“ã§ã„ã‚‹ã®ã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢ã™ã‚‹ãŸã‚ã§ã™ã€‚è©³ã—ãã¯onkã•ã‚“ã®è¨˜äº‹ã‚’èª­ã¿ã¾ã—ã‚‡ã†ã€‚ \u003ca href=\"https://blog.onk.ninja/2017/10/18/use_reset_column_information\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://blog.onk.ninja/2017/10/18/use_reset_column_information\u003c/a\u003eÂ \u003ca href=\"#fnref20\"\u003eâ†©\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\n\u003cli id=\"fn21\"\u003e\n\u003cp\u003eè¤‡é›‘ãªå®Ÿæ¥­å‹™ã§ã‚„ã‚‹ã¨å½±éŸ¿ç¯„å›²ãŒã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã‹ã‚‰ç‰¹å®šã®ãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ã†æ©Ÿèƒ½ã«å¤‰ã‚ã‚‹ã ã‘ã§çµå±€ãƒ¢ãƒ‡ãƒ«ã‚¯ãƒ©ã‚¹ãŒå¢—ãˆãŸåˆ†ãƒ¡ãƒ³ãƒ†ã‚³ã‚¹ãƒˆå¢—ãˆãŸã‚Šã€åŒã˜ãƒ†ãƒ¼ãƒ–ãƒ«ã«å¯¾ã™ã‚‹æ“ä½œãŒè¤‡æ•°ã®ãƒ¢ãƒ‡ãƒ«ã«æ•£ã‚‰ã°ã£ã¦ã—ã¾ã„ãã†(concernã§ã¾ã¨ã‚ã¦ã‚ã’ã‚Œã°å†åˆ©ç”¨ã§ããã†ã§ã™ãŒ)ã€ã“ã‚Œã¯Formã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«åˆ†ã‘ã¦ã‚‚åŒã˜ã‹ãªã€‚Â \u003ca href=\"#fnref21\"\u003eâ†©\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\n\u003c/ol\u003e\n\u003c/div\u003e\n","body":"## Railsã‚ã‚‹ã‚ã‚‹\n\nä½•æ°—ãªã„ãƒ¢ãƒ‡ãƒ«ã®å¤‰æ›´ãŒã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã‚’å‚·ã¤ã‘ãŸ\n\n## TL;DR\n\n\u003cblockquote class=\"twitter-tweet\" data-lang=\"ja\"\u003e\u003cp lang=\"ja\" dir=\"ltr\"\u003eæœ€è¿‘ã®è¶£å‘³ã‚¢ãƒ—ãƒªã§ã¯ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã”ã¨ã«ãƒ¢ãƒ‡ãƒ«ç”Ÿã‚„ã—ã¦ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã®ãƒ¢ãƒ‡ãƒ«ä½¿ã‚ãªã„è¨­è¨ˆã§æ›¸ã„ã¦ã„ã¦ã€ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚„ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¹ã‚³ãƒ¼ãƒ—æ›¸ãæ•£ã‚‰ã‹ã—ã¦ã‚‚å½±éŸ¿ç¯„å›²ãŒã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼å†…ã ã‘ã§æ¸ˆã‚€ã®ã§ä¾¿åˆ©ã ã—Formã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæ›¸ã„ã¦ã‚°ãƒ«ãƒ¼ã—ã¾ãã‚‹å¿…è¦ã‚‚ãªãå¿«é©\u003c/p\u003e\u0026mdash; Miyagi (@hanachin_) \u003ca href=\"https://twitter.com/hanachin_/status/958285661601087488?ref_src=twsrc%5Etfw\"\u003e2018å¹´1æœˆ30æ—¥\u003c/a\u003e\u003c/blockquote\u003e\n\u003cscript async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"\u003e\u003c/script\u003e\n\n\u003cblockquote class=\"twitter-tweet\" data-conversation=\"none\" data-lang=\"ja\"\u003e\u003cp lang=\"ja\" dir=\"ltr\"\u003eã‚¢ãƒ—ãƒªå…¨ä½“ã§1ãƒ¢ãƒ‡ãƒ«ã ã¨ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã¨ä¸€ç·’ã€ãƒ¢ãƒ‡ãƒ«å…¨ä½“ã«å½±éŸ¿ã§ã‚‹æ©Ÿèƒ½ãŒã‚¢ãƒ—ãƒªå…¨ä½“ã«å½±éŸ¿ã§ã¦ã¤ã‚‰ã„ã€‚æ©Ÿèƒ½ã”ã¨ã«ã‚¹ã‚­ãƒƒãƒ—ã—ãŸã‚Šä½¿ã„åˆ†ã‘ã¯ã§ãã‚‹ã‘ã©ãƒ¢ãƒ‡ãƒ«ã”ã¨å…¨éƒ¨åˆ†ã‘ãŸã»ã†ãŒæ¥½ã€ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã”ã¨ã«åˆ†ã‘ã‚‹ã¨è²¬å‹™ãŒæ˜ç¢ºã«ãªã‚Šã‚„ã™ã„ã€‚ã¿ãŸã„ãªæ„Ÿã˜ã§ã™! è©³ã—ã„è¨˜äº‹ã¯ã‚„ã‚‹æ°—ã§ãŸã‚‰æ›¸ã...\u003c/p\u003e\u0026mdash; Miyagi (@hanachin_) \u003ca href=\"https://twitter.com/hanachin_/status/961784296347332608?ref_src=twsrc%5Etfw\"\u003e2018å¹´2æœˆ9æ—¥\u003c/a\u003e\u003c/blockquote\u003e\n\u003cscript async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"\u003e\u003c/script\u003e\n\n\u003cblockquote class=\"twitter-tweet\" data-lang=\"ja\"\u003e\u003cp lang=\"ja\" dir=\"ltr\"\u003eè‡ªåˆ†è‡ªèº«ãƒãƒ¼ãƒ ã‚¹ãƒšãƒ¼ã‚¹ã©ã†åˆ‡ã‚‹ã‹ã¨ã‹ã¯èˆˆå‘³ãªãã¦default_scopeãŒã¤ã‚‰ã„ã®ã§ã¯ãªãã„ã‚ã‚“ãªè²¬å‹™ãŒã‚ã‚‹ã®ã«ActiveRecordã®ãƒ¢ãƒ‡ãƒ«ãŒ1ã¤ãªã®ãŒã¤ã‚‰ã¿ã®æ ¹æœ¬çš„ãªåŸå› ã€Formã«ã—ã¦ã‚‚ãã‚Œã¯æ®‹ã‚‹ã—ã„ã£ãActiveRecordã”ã¨åˆ†ã‘ã‚‹æ–¹ãŒä¾¿åˆ©ã§ã¯æ—¢ã«migration/micro serviceã§ã‚„ã£ã¦ã‚‹ã—ã¿ãŸã„ãªæ„Ÿã˜ãªã®ã§ã—ãŸ\u003c/p\u003e\u0026mdash; Miyagi (@hanachin_) \u003ca href=\"https://twitter.com/hanachin_/status/963215822251376640?ref_src=twsrc%5Etfw\"\u003e2018å¹´2æœˆ13æ—¥\u003c/a\u003e\u003c/blockquote\u003e\n\u003cscript async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"\u003e\u003c/script\u003e\n\nã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã”ã¨ã«åˆ†ã‘ã‚ã¨ã„ã„ãŸã„ã‚ã‘ã§ã¯ãªãã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã§1ãƒ†ãƒ¼ãƒ–ãƒ«1 ActiveRecordãƒ¢ãƒ‡ãƒ«ã‚’ã‚„ã‚ã¦\n\n## çµŒç·¯\n\nå­ã©ã‚‚ã®ãŠä¸–è©±ã‚’è¨˜éŒ²ã™ã‚‹ã‚¦ã‚§ãƒƒãƒ–ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ­£æœˆä¼‘ã¿ã‚ãŸã‚Šã‹ã‚‰æ›¸ã„ã¦ã„ã¾ã™ã€‚[^bblog]\nhttps://github.com/hanachin/bblog\n\n[^bblog]: docker-composeã§ç’°å¢ƒã‚’æ•´ãˆãŸã‚Šã€SQLã§i18nã—ãŸæ–‡å­—åˆ—ã‚’jsonã¨ã—ã¦renderã—ã¦ARã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹çµŒç”±ã›ãšã«è¿”ã—ãŸã‚Šã€ä»Šå›è¨˜äº‹ã«ã—ãŸARã®ãƒ¢ãƒ‡ãƒ«ã‚’åˆ†ã‘ã‚‹è¨­è¨ˆãªã©æ™®æ®µä»•äº‹ã§ã‚„ã‚‰ãªã„å®Ÿé¨“çš„ãªã“ã¨ã‚’è¶£å‘³ã§ã‚„ã£ã¦ã„ã¾ã™\n\nãã®ä¸­ã§ã“ã†ã„ã†æ°—æŒã¡ãŒç”Ÿã¾ã‚Œã¾ã—ãŸ(Refinementséæ¿€æ´¾)ã€‚\n\n\u003cblockquote class=\"twitter-tweet\" data-lang=\"ja\"\u003e\u003cp lang=\"ja\" dir=\"ltr\"\u003eç‰¹å®šã®controllerã§ã—ã‹ã¤ã‹ã‚ãªã„ãƒ¡ã‚½ãƒƒãƒ‰ã€modelã«ç”Ÿã‚„ã•ãšcontrollerã§ç„¡åãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ä½œã£ã¦refineã§ã‚ˆã„ã®ã§ã¯ (éæ¿€æ´¾\u003c/p\u003e\u0026mdash; Miyagi (@hanachin_) \u003ca href=\"https://twitter.com/hanachin_/status/944015787500609537?ref_src=twsrc%5Etfw\"\u003e2017å¹´12æœˆ22æ—¥\u003c/a\u003e\u003c/blockquote\u003e\n\u003cscript async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"\u003e\u003c/script\u003e\n\nãƒªãƒ—ãƒ©ã‚¤ã§ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ„ã‚¤ãƒ¼ãƒˆã‚’å—ã‘å–ã‚Šã¾ã—ãŸã€‚\n\n\u003cblockquote class=\"twitter-tweet\" data-conversation=\"none\" data-lang=\"ja\"\u003e\u003cp lang=\"ja\" dir=\"ltr\"\u003eå†…éƒ¨ã‚¯ãƒ©ã‚¹ã¨ã—ã¦ HogeController::User ã‚’ä½œã‚‹ã®ã¯ã©ã†ã‹ã€ã£ã¦è©±ã‚’ã“ã®ã‚ã„ã ã—ã¦ã¾ã—ãŸã€‚\u003c/p\u003e\u0026mdash; Takafumi ONAKA (@onk) \u003ca href=\"https://twitter.com/onk/status/944079047713157120?ref_src=twsrc%5Etfw\"\u003e2017å¹´12æœˆ22æ—¥\u003c/a\u003e\u003c/blockquote\u003e\n\u003cscript async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"\u003e\u003c/script\u003e\n\n\u003cblockquote class=\"twitter-tweet\" data-lang=\"ja\"\u003e\u003cp lang=\"ja\" dir=\"ltr\"\u003eãƒ¢ãƒ‡ãƒ«æ¶ˆãˆã‚‹ã®ãƒ¤ãƒã‚¤ï½— / HogeController å†…ã§ã¯ ::User ã¨ User ã¨ã§è‡ªç„¶ã«ä½¿ã„åˆ†ã‘ã‚‰ã‚Œã‚‹ã®ãŒè‰¯ã•ãã†ãªæ„Ÿã˜ã§ã€å†…éƒ¨ã‚¯ãƒ©ã‚¹ã®æ–¹ã¯ find_by_xxx ã¨ã‹ã®ã‚¯ãƒ©ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç½®ãã¨è‰¯ã„ã®ã‹ãªã¨ã€‚(ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å´ã«ä½•ã‹ãŒæ¬²ã—ã„ãªã‚‰ decorator ã¨ã„ã†ä»•çµ„ã¿ãŒæ—¢ã«ã‚ã‚‹\u003c/p\u003e\u0026mdash; Takafumi ONAKA (@onk) \u003ca href=\"https://twitter.com/onk/status/944081650849165312?ref_src=twsrc%5Etfw\"\u003e2017å¹´12æœˆ22æ—¥\u003c/a\u003e\u003c/blockquote\u003e\n\u003cscript async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"\u003e\u003c/script\u003e\n\n\u003cblockquote class=\"twitter-tweet\" data-lang=\"ja\"\u003e\u003cp lang=\"ja\" dir=\"ltr\"\u003eè‰¯ã•ãã†ãªã‚“ã§ã™ãŒé–¢é€£ãƒ†ãƒ¼ãƒ–ãƒ«ã¿ãŸã‚Šã‚¹ã‚³ãƒ¼ãƒ—ç”Ÿã‚„ã—ãŸã‚Šã‚¯ãƒ©ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã‚„ã™ã¨ãªã‚‹ã¨ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ä¸‹ã«ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ç”¨ã®ãƒ¢ãƒ‡ãƒ«ã‚ã‚‹ã¨ä¾¿åˆ©ãã†ã§ã™ã­ï¼(ãƒ‘ã‚¹ãŒapp/models/hoges_controller/user.rbã¿ãŸã„ã«ãªã‚Šãã†ãªã®ã«è‹¥å¹²æŠµæŠ—ã‚ã‚Š)\u003c/p\u003e\u0026mdash; Miyagi (@hanachin_) \u003ca href=\"https://twitter.com/hanachin_/status/944084933286412289?ref_src=twsrc%5Etfw\"\u003e2017å¹´12æœˆ22æ—¥\u003c/a\u003e\u003c/blockquote\u003e\n\u003cscript async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"\u003e\u003c/script\u003e\n\n1æœˆã®Okinawa.rbã§æœ€è¿‘è©¦ã—ã¦ã‚‹è©±ã‚’ã—ãŸã¨ãƒ„ã‚¤ãƒ¼ãƒˆã—ãŸã‚‰åéŸ¿ã‚’ã„ãŸã ã[^kimihito_][^kazuma_lab]è¨˜äº‹ã«ã—ãŸæ¬¡ç¬¬ã§ã™ã€‚\n\n[^kazuma_lab]: https://twitter.com/kazumalab/status/961824048052281345\n[^kimihito_]: https://twitter.com/kimihito_/status/960332669954359297\n\n\n## ä½•æ°—ãªã„ãƒ¢ãƒ‡ãƒ«ã®å¤‰æ›´ãŒã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã‚’å‚·ã¤ã‘ã‚‹åŸå› \n\nã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è¦æ¨¡ãŒã©ã‚“ãªã«å¤§ããæˆé•·ã—ã¦ã‚‚1ã¤ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã«å¯¾å¿œã™ã‚‹ActiveRecordã®ãƒ¢ãƒ‡ãƒ«ã¯å¸¸ã«1ã¤ã€‚ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ãŒ1ã¤ã®ãƒ¢ãƒ‡ãƒ«ã«ä¾å­˜!\nãªã®ã§ãƒ¢ãƒ‡ãƒ«ã®æŒ¯ã‚‹èˆã„ã«å½±éŸ¿ãŒå‡ºã‚‹æ©Ÿèƒ½ã‚’ä½¿ã†ã¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã«å½±éŸ¿ãŒã§ã‚‹ã€‚\n\n## å…·ä½“çš„ã«ã©ã†ã„ã†æ©Ÿèƒ½ã§å•é¡ŒãŒå‡ºã‚„ã™ã„ã‹\n\nRailsã‚ã‚‹ã‚ã‚‹[^anti_pattern]ã‚’å‚è€ƒã«ã„ãã¤ã‹æŒ™ã’ã¦ã¿ã¾ã™ã€‚\n\n- default_scope\n- validation\n- callbacks\n- as_json\n\nã©ã‚Œã‚‚ãƒ¢ãƒ‡ãƒ«ã®æŒ¯ã‚‹èˆã„ã«å½±éŸ¿ãŒå‡ºã‚‹ã‚‚ã®ã°ã‹ã‚Šã§ã™ã­ã€‚\n\nç‰¹ã«default_scopeã«é–¢ã—ã¦ã¯åœ°é›·ãƒ¡ã‚½ãƒƒãƒ‰[^mine]ã¨ã‹æ’’ã„ã¦ã¯ã„ã‘ãªã„ç¨®[^pain_in_the_neck]ã¨ã‹evil[^default_scope_is_evil]ãªã©éæ¿€ãªå‘¼ã°ã‚Œæ–¹ã‚’ã•ã‚Œã¦ã„ã¾ã™ã€‚\n\n[^anti_pattern]: https://www.slideshare.net/tricknotes/rails-possiblestory\n[^mine]: https://qiita.com/sinsoku/items/9cbdc5304aa3ede4a178\n[^pain_in_the_neck]: https://qiita.com/juntetsu_tei/items/a1b641f7f3b10d3ae6e1\n[^default_scope_is_evil]: https://rails-bestpractices.com/posts/2013/06/15/default_scope-is-evil/\n\n## é€ƒã‚Œæ–¹\n\nä¸€å¿œãã‚Œãã‚Œè‰²ã€…ãªæ–¹æ³•ã§å¤–ã—ãŸã‚Šã‚¹ã‚­ãƒƒãƒ—å‡ºæ¥ã¾ã™ã€‚\n\n### default_scope\n\n- unscopedã§ã‚¹ã‚³ãƒ¼ãƒ—ã‚’å¤–ã™\n- reorder, rewhereãªã©ã§æ¡ä»¶ã‚’å¤‰æ›´ã™ã‚‹\n\n### validation\n\n- validationãŒã‹ã‹ã‚‰ãªã„APIã‚„`save(validate: false)`ã‚’ä½¿ã†[^skipping_validations]\n- contextã‚’è¨­å®šã—ã¦ç‰¹å®šã®å ´åˆã ã‘å®Ÿè¡Œã•ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹`save(context: :account_setup)`[^ar_validation_on]\n- ç‰¹å®šã®æ¡ä»¶ã«åˆè‡´ã™ã‚‹å ´åˆã—ã‹ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã—ãªã„[^conditional_validation]\n\n[^skipping_validations]: http://guides.rubyonrails.org/active_record_validations.html#skipping-validations\n[^ar_validation_on]: http://guides.rubyonrails.org/active_record_validations.html#on\n[^conditional_validation]: http://guides.rubyonrails.org/active_record_validations.html#conditional-validation\n\n### callbacks\n\n- callbackãŒå®Ÿè¡Œã•ã‚Œãªã„APIã‚’ä½¿ã†[^skipping_callbacks]\n- ç‰¹å®šã®æ¡ä»¶ã«åˆè‡´ã™ã‚‹å ´åˆã—ã‹ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã—ãªã„[^conditional_callbacks]\n\n[^skipping_callbacks]: http://guides.rubyonrails.org/active_record_callbacks.html#skipping-callbacks\n[^conditional_callbacks]: http://guides.rubyonrails.org/active_record_callbacks.html#conditional-callbacks\n\n### as_json\n\nActiveRecordã®`:only`, `:except`, `:methods`, `:include`ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã™ã‚‹ã¨ã‚ã‚‹ç¨‹åº¦ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã‚‹[^as_json]\n\n[^as_json]: http://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html#method-i-as_json\n\n## é€ƒã‚Œã‚‹ã®ç„¡ç†èª¬\n\nã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã§ãƒ¢ãƒ‡ãƒ«1ã¤ã ã¨ãƒ¢ãƒ‡ãƒ«ãŒå¤§ãããªã‚‹ã«ã¤ã‚Œè¤‡é›‘ã«çµ„ã¿åˆã‚ã•ã‚‹ã€‚ãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ã†å ´æ‰€å…¨éƒ¨ã§ã“ã‚Œã‚‰ã®æ©Ÿèƒ½ã‚’æ„è­˜ã—ãªãŒã‚‰æ›¸ãã®ç„¡ç†ã§ã¯...ã€‚\nã¨ã„ã†ã“ã¨ã§æœ€åˆã‹ã‚‰ä½¿ã‚ãªã„ã»ã†ãŒã‚ˆã„ã®ã§ã¯ã€ã¿ãŸã„ãªçµè«–ã«ãªã‚ŠãŒã¡ã§ã™ã€‚\n\nå˜ç´”ã«Concernã«åˆ‡ã‚Šå‡ºã—ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†ã‘ã¦ã‚‚ãƒ¢ãƒ‡ãƒ«ãŒ1ã¤ã®ã¾ã¾ã§ã¯ãƒ¢ãƒ‡ãƒ«ã®å¤‰æ›´ãŒã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã«å½±éŸ¿ã—ã¾ã™ã€‚\n\n## ãƒ¢ãƒ‡ãƒ«å…¨ä½“ã«å½±éŸ¿ã™ã‚‹æ©Ÿèƒ½ã‚’ä½¿ã‚ãªã„å ´åˆã€ä»£ã‚ã‚Šã«ä½•ã‚’ä½¿ã†ã®?\n\nãƒ¬ãƒ¼ãƒ«ã®ä¼¸ã°ã—æ–¹[^extend_the_rail]ã§ã¯ãƒ¢ãƒ‡ãƒ«ã®è²¬å‹™ã‚’PORO[^poro], FormObject, ServiceObjectã«åˆ†ã‘ã‚‹æ–¹æ³•ãŒç´¹ä»‹ã•ã‚Œã¦ã„ã¾ã™ã€‚\n\n[^extend_the_rail]: https://speakerdeck.com/willnet/rerufalseshen-basifang\n[^poro]: Plain Old Ruby Objectã€ç¶™æ‰¿å…ƒãªã—ã®Objectã‚’ç¶™æ‰¿ã—ã¦ã‚‹ãŸã ã®Rubyã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€`class PORO; end`ã“ã†ã„ã†ã‚„ã¤ã€‚\n\n### ActiveRecordä»¥å¤–ã®å±¤ã¤ãã‚‹ã¨æ„å¤–ã¨é¢å€’\n\nActiveRecordã‚’ä½¿ã†ã¨paramsã§å—ã‘å–ã£ãŸæ–‡å­—åˆ—ã‚’æ¸¡ã™ã ã‘ã§ã„ã„æ„Ÿã˜ã«å‹å¤‰æ›ã—ã¦ãã‚Œã¦ã¹ã‚“ã‚Šã§ã™ã€‚\nForm Objectãªã©ã‚’åˆ†ã‘ãŸå ´åˆã€ã“ã®ã‚ãŸã‚Šã®å‹å¤‰æ›ã®ã‚³ãƒ¼ãƒ‰ã§ã‹ãªã‚Šè¨˜è¿°é‡ãŒå¢—ãˆãŸã‚Šã—ã¾ã™ã€‚[^active_record_attributes_is_awesome]\nãªã®ã§Form Objectã‚’ä½œã‚Šã‚„ã™ãã™ã‚‹ãŸã‚ã®ã¾ãŸåˆ¥ã®gemã‚’å°å…¥ã™ã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã€‚[^ganbari]\n\n[^active_record_attributes_is_awesome]: `ActiveModel::Attributes`ãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚Œã°POROã§ã‚‚åŒã˜ã‚ˆã†ã«å‹å¤‰æ›ã§ãã‚‹ã®ã§å•é¡Œãªããªã‚‹ã‹ã‚‚ https://qiita.com/alpaca_taichou/items/bebace92f06af3f32898\n[^ganbari]: å­¦ç¿’ã‚³ã‚¹ãƒˆğŸ’ª\n\n## ä¾‹ãˆã°ãƒ¢ãƒ‡ãƒ«ã®ã‚¯ãƒ©ã‚¹ã‚’åˆ†ã‘ã‚‹\n\nãƒ¢ãƒ‡ãƒ«ã®æŒ¯ã‚‹èˆã„ã®å½±éŸ¿ç¯„å›²ãŒã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã«åŠã‚“ã§ã—ã¾ã†ã®ãŒã¤ã‚‰ã¿ã®åŸå› ãªã‚‰ã€è²¬å‹™ã”ã¨ã«ãƒ¢ãƒ‡ãƒ«ã”ã¨åˆ¥ã€…ã«åˆ†ã‘ã‚‹ã¨ç–ã«ãªã£ã¦ä¾¿åˆ©ã§ã¯?\nä»¥ä¸‹ã§æ™®æ®µã®é–‹ç™ºã®ä¸­ã§ActiveRecordã®ã‚¯ãƒ©ã‚¹ã‚’åˆ†ã‘ã‚‹ä¾‹ã‚’æŒ™ã’ã¾ã™ã€‚\n\n## ä¾‹: ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œæ™‚ã«ä½¿ã†ãƒ¢ãƒ‡ãƒ«\n\nãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆæ™‚ã®ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ[^migration_checkpoint]ã‹ã‚‰å¼•ç”¨ã—ã¾ã™ã€‚\n\n\u003e app/models ä¸‹ã®ãƒ¢ãƒ‡ãƒ«ã‚¯ãƒ©ã‚¹ãªã©ã€ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã®å¤–éƒ¨ã«å®šç¾©ã—ã¦ã„ã‚‹ã€å°†æ¥å®Ÿè£…ã‚’å¤‰æ›´ã™ã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹ã‚¯ãƒ©ã‚¹ã‚’ç›´æ¥åˆ©ç”¨ã™ã‚‹ã“ã¨ã¯ç¦ã˜æ‰‹ã¨è€ƒãˆãŸæ–¹ãŒã„ã„ã§ã—ã‚‡ã†ã€‚\n\u003e ãªãœã‹ã¨ã„ã†ã¨ã€ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã„ã†ã®ã¯ã€æœªæ¥ã«ã‚ãŸã£ã¦æœ«æ°¸ãã€æ›¸ã„ãŸã¨ãã®æ„å›³ã©ãŠã‚Šã«å‹•ã å¿…è¦ãŒã‚ã‚‹ã‹ã‚‰ã§ã™ã€‚è¨€ã„æ›ãˆã‚Œã°ã€ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚³ãƒ¼ãƒ‰ã¯ã€ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«å†…ã§é–‰ã˜ã¦ã„ã¦ã€å‡çµã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒæœ›ã¾ã—ã„ ã®ã§ã™ã€‚\n\n[^migration_checkpoint]: https://qiita.com/nay3/items/ef773006cd7f815a07cd\n\n### å•é¡Œ: 1ã¤ã®ã‚¯ãƒ©ã‚¹ã«2ã¤ã®è²¬å‹™\n\n```rb\n# app/models/user.rb\nclass User \u003c ApplicationRecord\n  UNKNOWN_BIRTHDAY = Date.new(9999, 1, 1)\nend\n```\n\n```rb\nrequire 'date'\n\nclass AddBirthdayDateToUsers \u003c ActiveRecord::Migration[5.1]\n  def up\n    add_column :users, :birthday_date, :date\n    User.reset_column_information\n    User.find_each do |u|\n      birthday_date = Date.new(u.year, u.month, u.day) rescue nil\n      u.update(birthday_date: birthday_date || User::UNKNOWN_BIRTHDAY)\n    end\n    change_column_null :users, :birthday_date, false\n  end\n\nend\n```\n\nä¸Šè¨˜ã®ã‚ˆã†ã«ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œæ™‚ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§å®šç¾©ã—ãŸActiveRecordã®ã‚¯ãƒ©ã‚¹ã‚’å‚ç…§ã™ã‚‹ã¨ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã«ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚³ãƒ¼ãƒ‰ãŒä¾å­˜ã—ã€1ã¤ã®ã‚¯ãƒ©ã‚¹ã«2ã¤ã®è²¬å‹™ãŒç”Ÿã¾ã‚Œã¾ã™ğŸ’ª\n\n- ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã®è²¬å‹™\n- ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã®è²¬å‹™\n\nã“ã®å ´åˆã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã®ä¿®æ­£ãŒãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œã«å½±éŸ¿ã‚’åŠã¼ã™å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚\nå…·ä½“çš„ãªä¾‹ã‚’Rails ã§ä¿¡é ¼æ€§ã®é«˜ã„ Migration ã‚’æ›¸ãã«ã¯[^reliable_migration]ã‹ã‚‰å¼•ç”¨ã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªæ„Ÿã˜ã§ã™ã€‚\n\n\u003e ç‰¹ã« Model ã‚’ä½¿ã£ã¦ãƒ‡ãƒ¼ã‚¿ã®ç§»è¡Œã‚’è¡Œã†å ´åˆã¯æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚create, update, where ãªã©ä¸€éƒ¨ã®ãƒ¡ã‚½ãƒƒãƒ‰ã—ã‹ä½¿ã‚ãªã„ã¤ã‚‚ã‚Šã§ã¤ã„ã¤ã„ãã®ã¾ã¾ä½¿ã£ã¦ã—ã¾ã„ãŒã¡ã§ã™ãŒã€hook ã‚„ default_scopeã€validation ãªã©ã®å¤‰åŒ–ã«ã‚ˆã£ã¦çŸ¥ã‚‰ã¬ã†ã¡ã«æŒ™å‹•ãŒå¤‰ã‚ã£ã¦ã—ã¾ã„ã¾ã™ã€‚Migration æ¯ã«å°‚ç”¨ã® Model ã‚’ä½œã‚Šã¾ã—ã‚‡ã†ã€‚\n\n[^reliable_migration]: https://qiita.com/shuhei/items/c0a6c3e29c87de6dff63#migration-%E6%AF%8E%E3%81%AB%E5%B0%82%E7%94%A8%E3%81%AE-model-%E3%82%92%E7%94%A8%E6%84%8F%E3%81%99%E3%82%8B\n\n\n### è§£æ±ºç­–: ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã®ãƒ¢ãƒ‡ãƒ«ã‚’ã¤ãã‚‹\n\nãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ä¸­ã§ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè¡Œã«å¿…è¦ãªè²¬å‹™ã ã‘ã‚’æŒã£ãŸActiveRecordã®ã‚¯ãƒ©ã‚¹ã‚’å®£è¨€ã—ã¾ã™ã€‚ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã®å¤‰æ›´ãŒãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã«å½±éŸ¿ã™ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚[^why_reset_column_info]\n\n\n```rb\nrequire 'date'\n\nclass AddBirthdayDateToUsers \u003c ActiveRecord::Migration[5.1]\n  class User \u003c ActiveRecord::Base\n    UNKNOWN_BIRTHDAY = Date.new(9999, 1, 1)\n  end\n\n  def up\n    add_column :users, :birthday_date, :date\n    User.find_each do |u|\n      birthday_date = Date.new(u.year, u.month, u.day) rescue nil\n      u.update(birthday_date: birthday_date || User::UNKNOWN_BIRTHDAY)\n    end\n    change_column_null :users, :birthday_date, false\n    User.reset_column_information\n  end\n\n  def down\n    remove_column :users, :birthday_date\n  end\nend\n```\n\n[^why_reset_column_info]: ActiveRecordã§ã¯ãƒ†ãƒ¼ãƒ–ãƒ«ã”ã¨ã«ã‚¹ã‚­ãƒ¼ãƒã®æƒ…å ±ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ã¦ãŠã‚Šã‚¯ãƒ©ã‚¹ãŒåˆ†ã‹ã‚Œã¦ã„ã¦ã‚‚å½±éŸ¿ãŒå‡ºã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚`reset_column_information`ã‚’å‘¼ã‚“ã§ã„ã‚‹ã®ã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢ã™ã‚‹ãŸã‚ã§ã™ã€‚è©³ã—ãã¯onkã•ã‚“ã®è¨˜äº‹ã‚’èª­ã¿ã¾ã—ã‚‡ã†ã€‚ https://blog.onk.ninja/2017/10/18/use_reset_column_information\n\n## è²¬å‹™ã«å¿œã˜ã¦ãƒ¢ãƒ‡ãƒ«ã‚’åˆ†ã‘ã‚‹ã¨ã‚ˆã„ã®ã§ã¯\n\nä¸Šè¨˜ã®ä¾‹ã§ã¯ActiveRecordã®ãƒ¢ãƒ‡ãƒ«ã‚’ã‚ã‘ãŸä¾‹ã‚’ç´¹ä»‹ã—ã¾ã—ãŸã€‚\nãƒ¢ãƒ‡ãƒ«ã‚’åˆ†ã‘ãŸçµæœã€ãƒ¢ãƒ‡ãƒ«ãŒå˜ä¸€è²¬ä»»ã«ãªã‚Šã€ãƒ¢ãƒ‡ãƒ«ã¸ã®å¤‰æ›´ãŒåˆ¥ã®ãƒ¢ãƒ‡ãƒ«ã‚„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã«å½±éŸ¿ã—ãªããªã‚Šã¾ã—ãŸã€‚\nãµã¤ã†ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚³ãƒ¼ãƒ‰ã‚‚ç„¡ç†ã—ã¦1ã¤ã®ãƒ¢ãƒ‡ãƒ«ã«å…¨éƒ¨è©°ã‚è¾¼ã¾ãšã€ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚ˆã†ã«ActiveRecordã®ãƒ¢ãƒ‡ãƒ«ã‚’åˆ†ã‘ã‚‹ã¨ã‚ˆã„ã®ã§ã¯?\n\n### å½±éŸ¿ç¯„å›²ãŒç‹­ããªã‚‹\n\nç›®çš„ã”ã¨ã«ãƒ¢ãƒ‡ãƒ«ã‚’å®šç¾©ã™ã‚‹ã¨å½±éŸ¿ç¯„å›²ãŒã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã‹ã‚‰ç‹­ã¾ã‚Šã¾ã™ã€‚\n`default_scope`ã‚„`validation`ã‚„`callbacks`ã‚„`as_json`ã‚’æ›¸ãæ•£ã‚‰ã‹ã—ã¦ã‚‚ã€ä»–ã®ãƒ¢ãƒ‡ãƒ«ã«å½±éŸ¿ã—ãªã„ã®ã§ä¾¿åˆ©ãã†ã§ã™ã€‚\n\n### Railsã®æ©Ÿèƒ½ãŒãã®ã¾ã¾ä½¿ãˆã¦ä¾¿åˆ©\n\nãµã¤ã†ã®ActiveRecordã®ã‚¯ãƒ©ã‚¹ãªã®ã§å‹å¤‰æ›ã‚„æ…£ã‚Œè¦ªã—ã‚“ã APIã‚’ãã®ã¾ã¾ä½¿ãˆã¾ã™ã€‚\nä»–ã®gemã®ä½¿ã„æ–¹ã‚’è¦šãˆã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚\n\n## ã‚„ã‚Šã‹ãŸ\n\n### ä¾‹: ç™»éŒ²ãŒå®Œäº†ã—ãŸã¨ããƒ¡ãƒ¼ãƒ«ã‚’é€ã‚ŠãŸã„\n\n```app/models/signup_user.rb\nclass SignupUser \u003c User\n  after_save :send_signup_email\n\n  private\n\n  def send_signup_email\n    UserMailer.signup(self).deliver_later\n  end\nend\n```\n\n```app/controllers/signup_controller.rb\nclass SignupController \u003c ApplicationController\n  def create\n    user = SignupUser.new(params)\n    if user.save\n      redirect_to root_path\n    else\n      render 'new'\n    end\n  end\nend\n```\n\n### ä¾‹: å…¬é–‹ã•ã‚Œã¦ã„ã‚‹è¨˜äº‹ã ã‘ã‚’è¡¨ç¤ºã—ãŸã„\n\n```app/models/article.rb\nclass Article \u003c ApplicationRecord\nend\n```\n\n```app/models/published_article.rb\nclass PublishedArticle \u003c ApplicationRecord\n  self.table_name = \"articles\"\n  default_scope -\u003e { where(published: true) }\nend\n```\n\n```app/controllers/articles_controller.rb\nclass ArticlesController \u003c ApplicationController\n  def index\n    # ä¸€è¦§ç”¨\n    @articles = PublishedArticle.order(published_at: :desc)\n\n    # æ–°è¦ä½œæˆç”¨\n    @new_article = Article.new\n  end\nend\n```\n\n### ä¾‹: ä½œã‚‹ã¨ãã ã‘é–¢é€£ãƒ¬ã‚³ãƒ¼ãƒ‰ã®presenceã‚’ç¢ºèªã—ãŸã„\n\n```app/models/article.rb\nclass Article \u003c ApplicationRecord\n  belongs_to :author, optional: true\nend\n```\n\n```app/models/new_article.rb\nclass NewArticle \u003c Article\n  self.table_name = \"articles\"\n  validates :author, presence: true\nend\n```\n\n```app/controllers/articles_controller.rb\nclass ArticlesController \u003c ApplicationController\n  def create\n    @new_article = NewArticle.new(params)\n\n    if @new_article.save\n      redirect_to @new_article\n    else\n      render 'new'\n    end\n  end\nend\n```\n\n## ã¾ã¨ã‚\n\nã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã§1ã¤ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã«å¯¾å¿œã™ã‚‹ActiveRecordã®ãƒ¢ãƒ‡ãƒ«ãŒ1ã¤ã ã¨ãƒ¢ãƒ‡ãƒ«å…¨ä½“ã«å½±éŸ¿ã§ã‚‹æ©Ÿèƒ½ãŒã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã«å½±éŸ¿ã§ã¦ã¤ã‚‰ã„ã€‚\n`default_scope`ã‚„`validation`ã‚„`callbacks`ã‚„`as_json`ãªã©ãƒ¢ãƒ‡ãƒ«å…¨ä½“ã«å½±éŸ¿ãŒå‡ºã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã§ã¤ã‚‰ã¿ãŒç”Ÿã¾ã‚Œã‚‹ã®ã¯ã€ãã‚Œã‚‰ã®æ©Ÿèƒ½è‡ªä½“ãŒæ‚ªã„ã‚ã‘ã§ã¯ãªãã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã§1ãƒ¢ãƒ‡ãƒ«ã‚’å…±æœ‰ã—ã¦ã„ã‚‹ã®ãŒåŸå› ã§ã¯ãªã„ã‹?\nã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æ§˜ã€…ãªå ´é¢ã§ã®è²¬å‹™ã‚’1ã¤ã®ActiveRecordã®ãƒ¢ãƒ‡ãƒ«ã«è©°ã‚è¾¼ã‚€ã¨ã¤ã‚‰ã„ã®ã§ã€è²¬å‹™ã«å¿œã˜ã¦åŒã˜ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å‚ç…§ã™ã‚‹ActiveRecordã®ãƒ¢ãƒ‡ãƒ«ã‚’åˆ†ã‘ã‚‹ã¨ã‚ˆã„ã®ã§ã¯ã€å½±éŸ¿ç¯„å›²ãŒç‹­ã¾ã‚‹ã—ActiveRecordã®æ©Ÿèƒ½ãŒãã®ã¾ã¾ä½¿ãˆã¦ä¾¿åˆ©!ã¨ã„ã†ã”ææ¡ˆã§ã—ãŸã€‚\n\n1ã¤ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã«å¯¾å¿œã™ã‚‹ActiveRecordã®ãƒ¢ãƒ‡ãƒ«ã‚’åˆ†ã‘ã‚‹ã®ã¯ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚„ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ãªã©ã§æ—¢ã«ã‚„ã£ã¦ã„ã‚‹äººã‚‚å¤šã„ã¨æ€ã„ã¾ã™ãŒã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã§ã‚‚åˆ†ã‘ã¦ã“ğŸ’ª\n\n## æ‡¸å¿µ\n\næœ€è¿‘ã®è¶£å‘³ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¡ã‚‡ã£ã¨è©¦ã—ãŸæ„Ÿã˜ã‚ˆã•ãã†ã§ã—ãŸãŒå¤§ãã„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ãªã‚‹ã¨ã¾ãŸåˆ¥ã®ã¤ã‚‰ã¿ãŒç™ºç”Ÿã—ãã†ã€‚[^tsurami]\n\n[^tsurami]: è¤‡é›‘ãªå®Ÿæ¥­å‹™ã§ã‚„ã‚‹ã¨å½±éŸ¿ç¯„å›²ãŒã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã‹ã‚‰ç‰¹å®šã®ãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ã†æ©Ÿèƒ½ã«å¤‰ã‚ã‚‹ã ã‘ã§çµå±€ãƒ¢ãƒ‡ãƒ«ã‚¯ãƒ©ã‚¹ãŒå¢—ãˆãŸåˆ†ãƒ¡ãƒ³ãƒ†ã‚³ã‚¹ãƒˆå¢—ãˆãŸã‚Šã€åŒã˜ãƒ†ãƒ¼ãƒ–ãƒ«ã«å¯¾ã™ã‚‹æ“ä½œãŒè¤‡æ•°ã®ãƒ¢ãƒ‡ãƒ«ã«æ•£ã‚‰ã°ã£ã¦ã—ã¾ã„ãã†(concernã§ã¾ã¨ã‚ã¦ã‚ã’ã‚Œã°å†åˆ©ç”¨ã§ããã†ã§ã™ãŒ)ã€ã“ã‚Œã¯Formã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«åˆ†ã‘ã¦ã‚‚åŒã˜ã‹ãªã€‚\n","coediting":false,"comments_count":2,"created_at":"2018-02-12T01:11:49+09:00","group":null,"id":"ba1dd93905567d88145c","likes_count":61,"private":false,"reactions_count":0,"tags":[{"name":"Rails","versions":[]}],"title":"ActiveRecordã®ãƒ¢ãƒ‡ãƒ«ãŒ1ã¤ã ã¨ã¤ã‚‰ã„","updated_at":"2018-08-28T06:32:56+09:00","url":"https://qiita.com/hanachin_/items/ba1dd93905567d88145c","user":{"description":"æ—¢å©šãƒã‚¤","facebook_id":"seiei.higa","followees_count":166,"followers_count":120,"github_login_name":"hanachin","id":"hanachin_","items_count":55,"linkedin_id":"","location":"Naha, Okinawa, Japan","name":"Seiei Miyagi","organization":"YassLab","permanent_id":2074,"profile_image_url":"https://qiita-image-store.s3.amazonaws.com/0/2074/profile-images/1511092027","twitter_screen_name":"hanachin_","website_url":""},"page_views_count":null}]